(function(){"use strict";var t={1101:function(t,e,s){var i=s(3751),a=s(641);function n(t,e,s,i,n,o){const l=(0,a.g2)("Header"),r=(0,a.g2)("Toolbar"),h=(0,a.g2)("Main"),d=(0,a.g2)("Footer"),c=(0,a.g2)("UserSettings"),u=(0,a.g2)("LoginPrompt"),p=(0,a.g2)("Admin"),m=(0,a.g2)("Stats"),g=(0,a.g2)("ComposeComment"),k=(0,a.g2)("Collections"),f=(0,a.g2)("EditCollection"),v=(0,a.g2)("CollectionTemplate"),L=(0,a.g2)("Modal"),b=(0,a.g2)("Loading"),w=(0,a.g2)("Preview");return(0,a.uX)(),(0,a.CE)("div",null,[o.popupVisible?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(l,{key:0,state:n.state},null,8,["state"])),o.popupVisible?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(r,{key:1,state:n.state},null,8,["state"])),n.state.mode&&!o.popupVisible?((0,a.uX)(),(0,a.Wv)(h,{key:2,state:n.state},null,8,["state"])):(0,a.Q3)("",!0),o.popupVisible?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(d,{key:3,state:n.state},null,8,["state"])),n.state.userSettingsVisible?((0,a.uX)(),(0,a.Wv)(c,{key:4,state:n.state},null,8,["state"])):(0,a.Q3)("",!0),n.state.showLoginPrompt?((0,a.uX)(),(0,a.Wv)(u,{key:5,state:n.state},null,8,["state"])):(0,a.Q3)("",!0),o.showAdminButton?((0,a.uX)(),(0,a.Wv)(p,{key:6,state:n.state},null,8,["state"])):(0,a.Q3)("",!0),n.state.showStats?((0,a.uX)(),(0,a.Wv)(m,{key:7,state:n.state},null,8,["state"])):(0,a.Q3)("",!0),n.state.showComposeComment?((0,a.uX)(),(0,a.Wv)(g,{key:8,state:n.state},null,8,["state"])):(0,a.Q3)("",!0),n.state.showCollections?((0,a.uX)(),(0,a.Wv)(k,{key:9,state:n.state},null,8,["state"])):(0,a.Q3)("",!0),n.state.editCollection.length?((0,a.uX)(),(0,a.Wv)(f,{key:10,state:n.state,collection:n.state.editCollection[0]},null,8,["state","collection"])):(0,a.Q3)("",!0),n.state.showCollectionTemplate?((0,a.uX)(),(0,a.Wv)(v,{key:11,state:n.state},null,8,["state"])):(0,a.Q3)("",!0),n.state.showModal?((0,a.uX)(),(0,a.Wv)(L,{key:12,state:n.state,content:n.state.modalContent},null,8,["state","content"])):(0,a.Q3)("",!0),n.state.showLoading?((0,a.uX)(),(0,a.Wv)(b,{key:13,state:n.state},null,8,["state"])):(0,a.Q3)("",!0),n.state.showPreview?((0,a.uX)(),(0,a.Wv)(w,{key:14,state:n.state,link:n.state.previewLink},null,8,["state","link"])):(0,a.Q3)("",!0),e[0]||(e[0]=(0,a.Lk)("div",{id:"copyConfirmation"},[(0,a.Lk)("div",{id:"innerCopied"},"COPIED!")],-1))])}s(4114),s(8992),s(4520),s(1454);var o=s(33);const l={class:"main",ref:"main",tabindex:"0"},r={key:0,class:"uploadProgressContainer"},h={class:"uploadModalInner"},d={key:0,class:"featuredItems"},c={style:{"font-size":".6em"}},u={key:1,class:"links"},p={key:2,style:{"text-align":"center"}},m={key:3,class:"links"};function g(t,e,s,n,g,k){const f=(0,a.g2)("LoadingAnimation"),v=(0,a.g2)("Link"),L=(0,a.g2)("font");return(0,a.uX)(),(0,a.CE)("div",l,[g.showUploadProgress?((0,a.uX)(),(0,a.CE)("div",r,[e[9]||(e[9]=(0,a.Lk)("br",null,null,-1)),(0,a.eW)("uploading "+(0,o.v_)(g.filesUploading.length)+" file"+(0,o.v_)(g.filesUploading.length>1?"s":"")+"... ",1),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(g.filesUploading,(t=>((0,a.uX)(),(0,a.Wv)(f,{class:"progressBar",state:s.state,percent:t.perc/100,filename:s.state.shortText(t.uploadName,30)},null,8,["state","percent","filename"])))),256))])):(0,a.Q3)("",!0),s.state.showUploadModal?((0,a.uX)(),(0,a.CE)("div",{key:1,class:(0,o.C4)(["uploadModal",{dragover:g.dragover}]),onDrop:e[2]||(e[2]=(0,i.D$)(((...e)=>t.processDrop&&t.processDrop(...e)),["prevent"])),onDragover:e[3]||(e[3]=(0,i.D$)(((...t)=>k.dragOverHandler&&k.dragOverHandler(...t)),["prevent"])),onDragleave:e[4]||(e[4]=(0,i.D$)(((...t)=>k.dragLeaveHandler&&k.dragLeaveHandler(...t)),["prevent"]))},[(0,a.Lk)("div",h,[e[10]||(e[10]=(0,a.Lk)("span",{style:{"font-size":"2em",color:"#888"}},"upload tracks",-1)),e[11]||(e[11]=(0,a.Lk)("br",null,null,-1)),e[12]||(e[12]=(0,a.Lk)("br",null,null,-1)),e[13]||(e[13]=(0,a.Lk)("br",null,null,-1)),e[14]||(e[14]=(0,a.eW)("valid formats")),e[15]||(e[15]=(0,a.Lk)("br",null,null,-1)),e[16]||(e[16]=(0,a.Lk)("br",null,null,-1)),e[17]||(e[17]=(0,a.eW)(" MP3, OGG, WAV")),e[18]||(e[18]=(0,a.Lk)("br",null,null,-1)),e[19]||(e[19]=(0,a.Lk)("br",null,null,-1)),e[20]||(e[20]=(0,a.Lk)("br",null,null,-1)),e[21]||(e[21]=(0,a.Lk)("span",{style:{"font-size":"1.4em",color:"#ff0"}},"drop file(s) here...",-1)),e[22]||(e[22]=(0,a.Lk)("br",null,null,-1)),e[23]||(e[23]=(0,a.Lk)("br",null,null,-1)),e[24]||(e[24]=(0,a.eW)("or")),e[25]||(e[25]=(0,a.Lk)("br",null,null,-1)),e[26]||(e[26]=(0,a.Lk)("br",null,null,-1)),(0,a.Lk)("button",{onClick:e[0]||(e[0]=e=>t.uploadManual()),style:{background:"#0f0","max-width":"400px"}},"manually select one from your device"),e[27]||(e[27]=(0,a.Lk)("br",null,null,-1)),e[28]||(e[28]=(0,a.Lk)("br",null,null,-1)),(0,a.Lk)("button",{onClick:e[1]||(e[1]=t=>s.state.showUploadModal=!1),style:{background:"#400",color:"#fee","font-weight":"400"}},"cancel")])],34)):(0,a.Q3)("",!0),(0,a.Lk)("div",{id:"dropTarget",class:"dropTarget",onDragover:e[6]||(e[6]=(0,i.D$)((()=>{}),["prevent"])),onDrop:e[7]||(e[7]=(0,i.D$)((t=>k.dropFiles(t)),["prevent"])),onClick:e[8]||(e[8]=()=>{}),ref:"dropTarget",style:(0,o.Tr)(k.showFeatured?"width: 700px;":"")},[k.showFeatured?((0,a.uX)(),(0,a.CE)("div",d,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.state.miscLinks,(t=>((0,a.uX)(),(0,a.Wv)(v,{state:s.state,omitAssetData:!1,link:t,key:t.id},null,8,["state","link"])))),128))])):(0,a.Q3)("",!0),(0,a.Lk)("div",{class:"dropTargetInner",style:(0,o.Tr)(k.showFeatured?"width:400px;position: fixed;":"width: 100%; margin-left:0;position: static;")},[k.showFeatured?((0,a.uX)(),(0,a.CE)("div",{key:0,ref:"dropTargetCaption",id:"dropTargetCaption",style:(0,o.Tr)([{cursor:"pointer"},"trending"==s.state.mode]),onClick:e[5]||(e[5]=t=>this.loadFiles())},[e[39]||(e[39]=(0,a.eW)(" throw sum filez [click/drop]")),e[40]||(e[40]=(0,a.Lk)("br",null,null,-1)),e[41]||(e[41]=(0,a.Lk)("br",null,null,-1)),e[42]||(e[42]=(0,a.eW)(" accepted : ")),(0,a.bF)(L,{style:{color:"#ff0"}},{default:(0,a.k6)((()=>e[29]||(e[29]=[(0,a.eW)("gif"),(0,a.Lk)("br",null,null,-1),(0,a.eW)("            web[p/m]"),(0,a.Lk)("br",null,null,-1),(0,a.eW)("            png"),(0,a.Lk)("br",null,null,-1),(0,a.eW)("            jp[e]g"),(0,a.Lk)("br",null,null,-1),(0,a.eW)("            mp4/mkv"),(0,a.Lk)("br",null,null,-1),(0,a.eW)("            mp3/ogg/wav"),(0,a.Lk)("br",null,null,-1),(0,a.Lk)("br",null,null,-1)]))),_:1}),e[43]||(e[43]=(0,a.eW)(" max size : ")),(0,a.bF)(L,{style:{color:"#ff0"}},{default:(0,a.k6)((()=>e[30]||(e[30]=[(0,a.eW)("25MB"),(0,a.Lk)("br",null,null,-1)]))),_:1}),e[44]||(e[44]=(0,a.Lk)("span",{style:{"font-size":".7em"}},"(per file)",-1)),e[45]||(e[45]=(0,a.Lk)("br",null,null,-1)),e[46]||(e[46]=(0,a.Lk)("br",null,null,-1)),e[47]||(e[47]=(0,a.eW)(" max files: ")),(0,a.bF)(L,{style:{color:"#ff0"}},{default:(0,a.k6)((()=>e[31]||(e[31]=[(0,a.eW)("15"),(0,a.Lk)("br",null,null,-1)]))),_:1}),e[48]||(e[48]=(0,a.Lk)("span",{style:{"font-size":".7em"}},"(at a time)",-1)),e[49]||(e[49]=(0,a.Lk)("br",null,null,-1)),e[50]||(e[50]=(0,a.Lk)("br",null,null,-1)),e[51]||(e[51]=(0,a.Lk)("br",null,null,-1)),(0,a.Lk)("div",c,[e[33]||(e[33]=(0,a.eW)(" WARRANTY: ")),(0,a.bF)(L,{style:{color:"#ff0"}},{default:(0,a.k6)((()=>e[32]||(e[32]=[(0,a.eW)("none"),(0,a.Lk)("br",null,null,-1),(0,a.Lk)("br",null,null,-1)]))),_:1}),e[34]||(e[34]=(0,a.Lk)("span",{style:{color:"#f00","font-size":"1.2em"}},[(0,a.Lk)("b",null,[(0,a.eW)("all anonymous uploads will"),(0,a.Lk)("br"),(0,a.eW)("be deleted after 24 hours!")])],-1)),e[35]||(e[35]=(0,a.Lk)("br",null,null,-1)),e[36]||(e[36]=(0,a.eW)(" this website is a work-in-progress.")),e[37]||(e[37]=(0,a.Lk)("br",null,null,-1)),e[38]||(e[38]=(0,a.eW)(" your files will likely be deleted anyway :D"))])],4)):(0,a.Q3)("",!0),"default"!=s.state.mode&&"user"!=s.state.mode||s.state.showStats||s.state.showPreview||s.state.showAdmin||!s.state.links.length&&!s.state.userLinks.length?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",u,[s.state.links.length?((0,a.uX)(!0),(0,a.CE)(a.FK,{key:0},(0,a.pI)(s.state.links,(t=>((0,a.uX)(),(0,a.Wv)(v,{state:s.state,omitAssetData:!1,link:t,key:t.id},null,8,["state","link"])))),128)):(0,a.Q3)("",!0),s.state.userLinks.length?((0,a.uX)(!0),(0,a.CE)(a.FK,{key:1},(0,a.pI)(s.state.userLinks,(t=>((0,a.uX)(),(0,a.Wv)(v,{state:s.state,omitAssetData:!1,link:t,key:t.id},null,8,["state","link"])))),128)):(0,a.Q3)("",!0)])),"user"!=s.state.mode||s.state.userLinks.length||s.state.loadingAssets?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",p,e[52]||(e[52]=[(0,a.Lk)("br",null,null,-1),(0,a.Lk)("br",null,null,-1),(0,a.Lk)("br",null,null,-1),(0,a.Lk)("br",null,null,-1),(0,a.Lk)("span",{style:{"font-size":"2em"}},"4 0 4",-1),(0,a.Lk)("br",null,null,-1),(0,a.Lk)("br",null,null,-1),(0,a.Lk)("br",null,null,-1),(0,a.Lk)("br",null,null,-1),(0,a.Lk)("br",null,null,-1),(0,a.eW)(" this user has no"),(0,a.Lk)("br",null,null,-1),(0,a.eW)("public items at this time ")]))),k.showFeatured||"col"!=s.state.mode&&"item"!=s.state.mode||s.state.showPreview||s.state.showAdmin||!s.state.miscLinks.length?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",m,[s.state.miscLinks.length?((0,a.uX)(!0),(0,a.CE)(a.FK,{key:0},(0,a.pI)(k.filteredLinks,(t=>((0,a.uX)(),(0,a.Wv)(v,{state:s.state,omitAssetData:!1,link:t,key:t.id},null,8,["state","link"])))),128)):(0,a.Q3)("",!0)]))],4)],36)],512)}s(3949);const k={class:"link",ref:"anchor"},f=["innerHTML"],v=["title"],L=["href"];function b(t,e,s,n,l,r){const h=(0,a.g2)("AssetData");return(0,a.uX)(),(0,a.CE)("div",k,[!s.omitAssetData&&s.state.loggedIn?((0,a.uX)(),(0,a.CE)("label",{class:"checkboxLabel",key:s.link.linkType+s.link.ct+"key"},[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=t=>s.link.selected=t),onInput:e[1]||(e[1]=t=>r.updateLinkSelected())},null,544),[[i.lH,s.link.selected]]),e[11]||(e[11]=(0,a.Lk)("span",{class:"checkmark",style:{"margin-left":"-30px"}},null,-1)),e[12]||(e[12]=(0,a.Lk)("span",{style:{"font-size":".75em","margin-top":"5px",display:"block",color:"#4f8",padding:"0","margin-left":"-34px"}},"select",-1)),e[13]||(e[13]=(0,a.Lk)("br",null,null,-1))])):(0,a.Q3)("",!0),(0,a.Lk)("div",{class:"views",innerHTML:s.state.views(s.link)},null,8,f),(0,a.Lk)("div",{onMousedown:e[2]||(e[2]=(0,i.D$)((()=>{}),["stop","prevent"])),class:"linkThumb",ref:"linkThumb",onClick:e[3]||(e[3]=(0,i.D$)((t=>s.state.preview(s.link)),["prevent","stop"])),title:"view this asset"},null,544),(0,a.Lk)("div",{class:"linkButtons",onMousedown:e[9]||(e[9]=(0,i.D$)((()=>{}),["stop","prevent"])),onClick:e[10]||(e[10]=(0,i.D$)((()=>{}),["stop","prevent"]))},[s.link.userID==s.state.loggedinUserID||s.state.admin?((0,a.uX)(),(0,a.CE)("div",{key:0,class:(0,o.C4)(["specialToolButton",{private:s.link.private,notPrivate:!s.link.private}]),onClick:e[4]||(e[4]=(0,i.D$)((t=>s.state.setLinkProperty(s.link,"private",s.link.private?0:1)),["prevent","stop"])),title:`toggle visibility. (currently: ${s.link.private?"NOT":""} featured in public galleries)`},null,10,v)):(0,a.Q3)("",!0),(0,a.Lk)("div",{class:"copyLinkButton",onClick:e[5]||(e[5]=(0,i.D$)((t=>s.state.copyLink(s.link.href)),["prevent","stop"])),title:"copy link to clipboard"}),(0,a.Lk)("a",{href:s.state.URLbase+"/"+s.link.href,class:"openButton",onClick:e[6]||(e[6]=(0,i.D$)((t=>s.state.openLink(s.link)),["prevent","stop"])),title:"open link in new tab"},null,8,L),(0,a.Lk)("div",{class:"downloadButton",onClick:e[7]||(e[7]=(0,i.D$)((t=>s.state.downloadLink(s.link,s.state.fullFileName(s.link))),["prevent","stop"])),title:"download asset"}),s.link.userID==s.state.loggedinUserID||s.state.admin?((0,a.uX)(),(0,a.CE)("div",{key:1,class:"deleteSingleButton",onClick:e[8]||(e[8]=(0,i.D$)((t=>s.state.deleteSingle(s.link)),["prevent","stop"])),title:"delete this asset only"})):(0,a.Q3)("",!0)],32),e[14]||(e[14]=(0,a.Lk)("br",null,null,-1)),(0,a.bF)(h,{omitAssetData:s.omitAssetData,state:s.state,link:s.link},null,8,["omitAssetData","state","link"])],512)}const w={key:0},y=["innerHTML"],C={class:"tdLeft"},D=["innerHTML"],T={class:"tdRight"},x={class:"loggedIn",style:{display:"inline-block",float:"left"}},P=["title"],I={style:{display:"inline-block",float:"left",color:"#fff","text-shadow":"0 0 3px #40f",margin:"10px","font-size":"16px","text-align":"center",width:"135px"}},M=["innerHTML","title"],U={key:1},S={class:"tdRight"},$=["href","innerHTML"],A={key:0,class:"tdRight"},R=["innerHTML"],E={key:2},N={key:0,class:"tdRight"},O=["innerHTML"],H={key:3},B=["innerHTML"],X={key:4},z=["innerHTML"],j={key:5},F=["innerHTML"],W={key:6},Q=["innerHTML"],V={key:7},_=["innerHTML"],J={key:8},K=["innerHTML"],Z={key:9},G={class:"tdRight"},Y={key:10},q=["innerHTML"],tt={key:11},et=["innerHTML"],st={key:12,style:{height:"28px"}},it={class:"tdLeft"},at=["innerHTML"];function nt(t,e,s,n,l,r){const h=(0,a.g2)("Votes"),d=(0,a.g2)("CollectionSelection"),c=(0,a.g2)("LinkComments");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(h,{state:s.state,link:s.link,onMousemove:e[0]||(e[0]=t=>s.state.bumpADOpacity++)},null,8,["state","link"]),(0,a.Lk)("table",{class:"assetData",onMousemove:e[17]||(e[17]=t=>s.state.bumpADOpacity++)},[s.state.showPreview?((0,a.uX)(),(0,a.CE)("tr",w,[e[19]||(e[19]=(0,a.Lk)("td",{class:"tdLeft"},"views",-1)),(0,a.Lk)("td",{class:"tdRight",innerHTML:s.state.views(s.link)},null,8,y)])):(0,a.Q3)("",!0),(0,a.Lk)("tr",null,[(0,a.Lk)("td",C,[s.omitAssetData?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:e[1]||(e[1]=(0,i.D$)((t=>s.link.expandedInfo=!s.link.expandedInfo),["stop","prevent"])),class:"expandInfoButton",title:"show less-common/extra details about this asset",innerHTML:s.link.expandedInfo?"less":"more"},null,8,D)),e[20]||(e[20]=(0,a.eW)(" owner "))]),(0,a.Lk)("td",T,[(0,a.Lk)("div",x,[(0,a.Lk)("div",{onClick:e[2]||(e[2]=t=>s.state.getUserStats(s.link.userID)),class:"avatar",title:`this asset belongs to ${s.state.userInfo[s.link.userID]?.name}`,style:(0,o.Tr)(`background-image: url(${s.state.avatar(s.link)})`)},null,12,P)]),(0,a.Lk)("div",I,[(0,a.Lk)("button",{class:"commentButton",onClick:e[3]||(e[3]=t=>s.state.openUserPage(s.link.userID)),innerHTML:s.state.shortText(s.state.userInfo[s.link.userID]?.name,16),title:`view ${s.state.shortText(s.state.userInfo[s.link.userID]?.name,16)}'s assets`},null,8,M)])])]),s.omitAssetData?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("tr",U,[e[21]||(e[21]=(0,a.Lk)("td",{class:"tdLeft"}," slug ",-1)),(0,a.Lk)("td",S,[(0,a.Lk)("a",{onMousedown:e[4]||(e[4]=(0,i.D$)((()=>{}),["stop","prevent"])),href:s.state.URLbase+"/"+s.link.href,target:"_blank",title:"open link in new tab",innerHTML:s.link.slug,class:"assetDataSlug"},null,40,$)])])),(0,a.Lk)("tr",null,[e[22]||(e[22]=(0,a.Lk)("td",{class:"tdLeft"},"name",-1)),s.state.loggedinUserID==s.link.userID?((0,a.uX)(),(0,a.CE)("td",A,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=t=>s.link.name=t),class:"assetNameInput",tabindex:"0",onFocus:e[6]||(e[6]=t=>r.onfocus()),onBlur:e[7]||(e[7]=t=>r.onblur()),onMousedown:e[8]||(e[8]=(0,i.D$)((()=>{}),["stop"])),onInput:e[9]||(e[9]=t=>s.state.setLinkProperty(s.link,"name",s.link.name,!1,!0)),onClick:e[10]||(e[10]=(0,i.D$)((t=>t.target.select()),["prevent","stop"]))},null,544),[[i.Jo,s.link.name]])])):((0,a.uX)(),(0,a.CE)("td",{key:1,class:"tdRight",innerHTML:s.state.fileName(s.link)},null,8,R))]),s.link.description||s.link.userID==s.state.loggedinUserID&&s.link.expandedInfo?((0,a.uX)(),(0,a.CE)("tr",E,[e[23]||(e[23]=(0,a.Lk)("td",{class:"tdLeft"},"description",-1)),s.state.loggedinUserID==s.link.userID?((0,a.uX)(),(0,a.CE)("td",N,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":e[11]||(e[11]=t=>s.link.description=t),class:"assetNameInput",tabindex:"0",onFocus:e[12]||(e[12]=t=>r.onfocus()),onBlur:e[13]||(e[13]=t=>r.onblur()),onMousedown:e[14]||(e[14]=(0,i.D$)((()=>{}),["stop"])),onInput:e[15]||(e[15]=t=>s.state.setLinkProperty(s.link,"description",s.link.description,!1,!0)),onClick:e[16]||(e[16]=(0,i.D$)((t=>t.target.select()),["prevent","stop"]))},null,544),[[i.Jo,s.link.description]])])):((0,a.uX)(),(0,a.CE)("td",{key:1,class:"tdRight",innerHTML:s.state.linkify(s.link.description)},null,8,O))])):(0,a.Q3)("",!0),!s.omitAssetData&&s.link.expandedInfo?((0,a.uX)(),(0,a.CE)("tr",H,[e[24]||(e[24]=(0,a.Lk)("td",{class:"tdLeft"},"hash",-1)),(0,a.Lk)("td",{class:"tdRight",innerHTML:s.link.hash,style:{"font-size":"11px"}},null,8,B)])):(0,a.Q3)("",!0),!s.omitAssetData&&s.link.expandedInfo?((0,a.uX)(),(0,a.CE)("tr",X,[e[25]||(e[25]=(0,a.Lk)("td",{class:"tdLeft"},"filetype",-1)),(0,a.Lk)("td",{class:"tdRight",innerHTML:s.link.filetype},null,8,z)])):(0,a.Q3)("",!0),!s.omitAssetData&&s.link.expandedInfo?((0,a.uX)(),(0,a.CE)("tr",j,[e[26]||(e[26]=(0,a.Lk)("td",{class:"tdLeft"},"owner ID",-1)),(0,a.Lk)("td",{class:"tdRight",innerHTML:s.link.userID},null,8,F)])):(0,a.Q3)("",!0),!s.omitAssetData&&s.link.expandedInfo?((0,a.uX)(),(0,a.CE)("tr",W,[e[27]||(e[27]=(0,a.Lk)("td",{class:"tdLeft"},"uploaded",-1)),(0,a.Lk)("td",{class:"tdRight",innerHTML:s.state.prettyDate(s.link)},null,8,Q)])):(0,a.Q3)("",!0),!s.omitAssetData&&s.link.expandedInfo?((0,a.uX)(),(0,a.CE)("tr",V,[e[28]||(e[28]=(0,a.Lk)("td",{class:"tdLeft"},"age",-1)),(0,a.Lk)("td",{class:"tdRight",innerHTML:s.state.age(s.link)},null,8,_)])):(0,a.Q3)("",!0),!s.omitAssetData&&s.link.expandedInfo?((0,a.uX)(),(0,a.CE)("tr",J,[e[29]||(e[29]=(0,a.Lk)("td",{class:"tdLeft"},"size",-1)),(0,a.Lk)("td",{class:"tdRight",innerHTML:s.state.size(s.link.size)},null,8,K)])):(0,a.Q3)("",!0),!s.omitAssetData&&s.state.loggedIn?((0,a.uX)(),(0,a.CE)("tr",Z,[e[30]||(e[30]=(0,a.Lk)("td",{class:"tdLeft"},"collections",-1)),(0,a.Lk)("td",G,[(0,a.bF)(d,{state:s.state,links:s.link,mode:t.default,someSelected:!0},null,8,["state","links","mode"])])])):(0,a.Q3)("",!0),!s.omitAssetData&&s.link.expandedInfo?((0,a.uX)(),(0,a.CE)("tr",Y,[e[31]||(e[31]=(0,a.Lk)("td",{class:"tdLeft"},"asset id",-1)),(0,a.Lk)("td",{class:"tdRight",innerHTML:s.link.id},null,8,q)])):(0,a.Q3)("",!0),!s.omitAssetData&&s.link.expandedInfo?((0,a.uX)(),(0,a.CE)("tr",tt,[e[32]||(e[32]=(0,a.Lk)("td",{class:"tdLeft"},"origin",-1)),(0,a.Lk)("td",{class:"tdRight",innerHTML:s.link.origin.split(":")[0]},null,8,et)])):(0,a.Q3)("",!0),s.link.comments.length||!s.state.showComposeComment?((0,a.uX)(),(0,a.CE)("tr",st,[(0,a.Lk)("td",it,[e[33]||(e[33]=(0,a.eW)(" comments")),(0,a.Lk)("span",{style:{"font-size":"10px"},innerHTML:`(${s.link.comments.length})`},null,8,at)]),e[34]||(e[34]=(0,a.Lk)("td",{class:"tdRight"},null,-1))])):(0,a.Q3)("",!0)],32),s.link.comments.length||!s.state.showComposeComment?((0,a.uX)(),(0,a.Wv)(c,{key:0,state:s.state,link:s.link,onMousemove:e[18]||(e[18]=t=>s.state.bumpADOpacity++)},null,8,["state","link"])):(0,a.Q3)("",!0)],64)}const ot={key:0,class:"collectionSelection"},lt=["innerHTML"],rt=["innerHTML"],ht={style:{position:"relative"}},dt={class:"checkboxLabel collectionLabel"},ct=["checked","onChange"],ut=["innerHTML"],pt=["innerHTML"],mt=["onClick"],gt={key:1,class:"collectionSelection"};function kt(t,e,s,n,l,r){return s.someSelected?((0,a.uX)(),(0,a.CE)("div",ot,[s.state.collections.length?((0,a.uX)(),(0,a.CE)("button",{key:0,onMousedown:e[0]||(e[0]=(0,i.D$)((()=>{}),["stop","prevent"])),onClick:e[1]||(e[1]=(0,i.D$)((t=>r.toggleShowCollection()),["stop","prevent"])),class:"assetDataButton",style:{background:"#84fd",color:"#fff"},title:"include or exclude this link from collections",innerHTML:l.showCollection?"close":"assign"},null,40,lt)):(0,a.Q3)("",!0),(0,a.Lk)("button",{onMousedown:e[2]||(e[2]=(0,i.D$)((()=>{}),["stop","prevent"])),onClick:e[3]||(e[3]=(0,i.D$)((t=>s.state.manageCollections()),["stop","prevent"])),class:"assetDataButton",style:(0,o.Tr)([{background:"#4f8d"},s.state.collections.length?"":"width: 100%"]),title:"view and edit your collections",innerHTML:s.state.collections.length?"manage":"create a collection"},null,44,rt),e[7]||(e[7]=(0,a.Lk)("br",null,null,-1)),(0,a.Lk)("div",{onMousedown:e[4]||(e[4]=(0,i.D$)((()=>{}),["stop","prevent"])),ref:"collectionList",class:(0,o.C4)(["collectionList",{show:l.showCollection,hide:!l.showCollection}]),style:(0,o.Tr)(`height: ${r.colHeight}`)},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.state.collections,(t=>((0,a.uX)(),(0,a.CE)("div",ht,[(0,a.Lk)("label",dt,[(0,a.Lk)("input",{checked:r.checked(t),type:"checkbox",onChange:e=>r.updateSelection(e,t)},null,40,ct),e[5]||(e[5]=(0,a.Lk)("span",{class:"checkmark",style:{"margin-left":"-30px"}},null,-1)),(0,a.Lk)("span",{style:{display:"inline-block"},innerHTML:r.supplemental(t)},null,8,ut),(0,a.Lk)("span",{class:"collectionName",style:(0,o.Tr)(`font-size:16px; margin-left:${r.checked(t)?"multi"!=s.mode?"32px":"0":"-10px"};`),innerHTML:s.state.shortText(t.name,28)},null,12,pt)]),"multi"!=s.mode&&r.checked(t)?((0,a.uX)(),(0,a.CE)("button",{key:0,class:"toolbarButtons assetDataButton",style:{color:"#fff","z-index":"1000","min-width":"unset",height:"27px",background:"#84fd",margin:"unset","margin-top":"-1px","margin-right":"5px",padding:"0","font-size":"32px","padding-top":"7px",position:"absolute","margin-left":"28px"},onClick:(0,i.D$)((e=>this.state.viewCollection(t,s.links.slug)),["stop","prevent"]),title:"view this item, in this collection"},"👁",8,mt)):(0,a.Q3)("",!0),e[6]||(e[6]=(0,a.Lk)("br",null,null,-1))])))),256))],38)])):((0,a.uX)(),(0,a.CE)("div",gt," nothing selected "))}var ft={name:"CollectionSelection",props:["state","links","mode","someSelected"],components:{},data(){return{showCollection:!1}},computed:{filteredCollections(){let t=["none"];return t=[...t,...this.state.collections],t},colHeight(){return Math.min(200,28*this.state.collections.length+5)+"px"}},methods:{supplemental(t){if(!this.checked(t))return"";let e=0;return this.state.links.map((s=>{s.selected&&t.meta.slugs.filter((t=>t==s.slug)).length&&e++})),this.state.userLinks.map((s=>{s.selected&&t.meta.slugs.filter((t=>t==s.slug)).length&&e++})),"multi"==this.mode?`[${e}]`:""},checked(t){switch(this.mode){case"multi":let e=!1;return this.links.map((s=>{t.meta.slugs.filter((t=>t==s.slug)).length&&(e=!0)})),e;default:return!!t.meta.slugs.filter((t=>t==this.links.slug)).length}},toggleShowCollection(){this.state.doMouseDown(),this.showCollection||this.$nextTick((()=>{this.$nextTick((()=>{this.showCollection=!this.showCollection}))}))},pushUpdate(t){let e={name:t.name,id:t.id,description:t.meta.description,slugs:t.meta.slugs,private:t.meta.private};this.state.updateCollection(e)},updateSelection(t,e){let s=t.target.checked;switch(this.mode){case"multi":this.links.map((t=>{e.meta.slugs=e.meta.slugs.filter((e=>e!==t.slug)),s&&e.meta.slugs.push(t.slug),this.pushUpdate(e)}));break;default:e.meta.slugs=e.meta.slugs.filter((t=>t!==this.links.slug)),s&&e.meta.slugs.push(this.links.slug),this.pushUpdate(e);break}}},mounted(){},watch:{"state.click"(t){t&&(this.showCollection=!1)}}},vt=s(6262);const Lt=(0,vt.A)(ft,[["render",kt],["__scopeId","data-v-96c4edb8"]]);var bt=Lt;const wt={key:0,class:"comButNavLabel"},yt=["disabled"],Ct=["disabled"],Dt={class:"commentRow"},Tt={class:"avatarContainer"},xt=["onClick","title"],Pt={class:"commentHeader"},It={key:0},Mt=["innerHTML"],Ut={key:0,class:"edited"},St={key:1,style:{display:"inline-block"}},$t=["onClick"],At=["onClick"],Rt={key:2,style:{display:"inline-block"}},Et=["onClick"],Nt=["innerHTML"],Ot=["onKeyup","onUpdate:modelValue"],Ht={key:0,class:"commentRow"},Bt=["disabled"],Xt=["disabled"];function zt(t,e,s,n,l,r){return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",{class:(0,o.C4)(["linkComments",{linkCommentsPreviewMode:s.state.showPreview}])},[s.link.comments.length?((0,a.uX)(),(0,a.CE)("div",wt,[e[9]||(e[9]=(0,a.eW)(" show ")),e[10]||(e[10]=(0,a.Lk)("br",null,null,-1)),(0,a.Lk)("button",{onClick:e[0]||(e[0]=(0,i.D$)((t=>r.decrementNumComments()),["stop","prevent"])),class:(0,o.C4)(["expandInfoButton lessButton",{disabledButton:0==l.numComments}]),disabled:0==l.numComments,title:"show less-common/extra details about this asset"}," less ",10,yt),(0,a.Lk)("button",{onClick:e[1]||(e[1]=(0,i.D$)((t=>r.incrementNumComments()),["stop","prevent"])),class:(0,o.C4)(["expandInfoButton",{disabledButton:l.numComments>=s.link.comments.length}]),disabled:l.numComments==s.link.comments.length,title:"show less-common/extra details about this asset"}," more ",10,Ct)])):(0,a.Q3)("",!0),s.link.comments.length?s.state.showComposeComment?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("button",{key:2,onMousedown:e[4]||(e[4]=(0,i.D$)((()=>{}),["stop","prevent"])),onClick:e[5]||(e[5]=(0,i.D$)((t=>r.manageComments()),["stop","prevent"])),class:"assetDataButton addCommentButton",title:"view and edit your comments",style:{padding:"2px"}},"add comment",32)):((0,a.uX)(),(0,a.CE)("button",{key:1,onMousedown:e[2]||(e[2]=(0,i.D$)((()=>{}),["stop","prevent"])),onClick:e[3]||(e[3]=(0,i.D$)((t=>r.manageComments()),["stop","prevent"])),class:"assetDataButton noCommentsButton",title:"view and edit your comments",style:{"margin-left":"8px"}},"be first to comment",32)),e[11]||(e[11]=(0,a.Lk)("br",null,null,-1))],2),s.link.comments.length&&l.numComments?((0,a.uX)(),(0,a.CE)("div",{key:0,ref:"commentList",class:"commentList",onMousemove:e[8]||(e[8]=t=>s.state.bumpADOpacity++)},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.filteredComments,(t=>((0,a.uX)(),(0,a.CE)("div",Dt,[(0,a.Lk)("div",Tt,[(0,a.Lk)("div",{onClick:e=>s.state.getUserStats(t.userID),class:"avatar",title:`this comment was posted by ${s.state.userInfo[t.userID]?.name}`,style:(0,o.Tr)(`background-image: url(${r.avatar(t)})`)},null,12,xt),(0,a.eW)(" "+(0,o.v_)(s.state.shortText(this.state.userInfo[t.userID]?.name,18)),1)]),(0,a.Lk)("div",Pt,[+t.userID==+s.state.loggedinUserID?((0,a.uX)(),(0,a.CE)("div",It,[(0,a.Lk)("span",{class:"headerText",innerHTML:r.header(t,!t.edited)},null,8,Mt),t.edited?((0,a.uX)(),(0,a.CE)("span",Ut," [edited] ")):(0,a.Q3)("",!0),e[12]||(e[12]=(0,a.Lk)("br",null,null,-1))])):(0,a.Q3)("",!0),t.userID==s.state.loggedinUserID?((0,a.uX)(),(0,a.CE)("div",St,[t.editing?((0,a.uX)(),(0,a.CE)("button",{key:1,class:"commentButton",style:{background:"#4f8"},title:"finish editing your comment - changes are recorded in real time",onClick:(0,i.D$)((e=>r.closeComment(t)),["stop","prevent"])},"close edit",8,At)):((0,a.uX)(),(0,a.CE)("button",{key:0,class:"commentButton",style:{background:"#4f8"},title:"edit comment text",onClick:(0,i.D$)((e=>r.editComment(t)),["stop","prevent"])},"edit",8,$t))])):(0,a.Q3)("",!0),r.deleteable(t)?((0,a.uX)(),(0,a.CE)("div",Rt,[(0,a.Lk)("button",{class:"commentButton",style:{background:"#f04"},title:"permanently delete this comment",onClick:(0,i.D$)((e=>r.deleteComment(t)),["stop","prevent"])},"delete",8,Et)])):(0,a.Q3)("",!0)]),t.editing?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("span",{key:0,class:"commentText",innerHTML:s.state.linkify(t.text)},null,8,Nt)),t.editing?(0,a.bo)(((0,a.uX)(),(0,a.CE)("textarea",{ref_for:!0,ref:"commentEdit",key:"comment"+t.id,class:"editCommentInput",onKeyup:e=>s.state.updateComment(t),"onUpdate:modelValue":e=>t.text=e},null,40,Ot)),[[i.Jo,t.text]]):(0,a.Q3)("",!0),e[13]||(e[13]=(0,a.Lk)("div",{style:{clear:"both"}},null,-1))])))),256)),s.link.comments.length>l.numComments?((0,a.uX)(),(0,a.CE)("div",Ht,[(0,a.Lk)("button",{class:(0,o.C4)(["expandInfoButton lessButton wideLB",{disabledButton:0==l.numComments}]),disabled:0==l.numComments,title:"show fewer comments",onClick:e[6]||(e[6]=(0,i.D$)((t=>r.decrementNumComments()),["stop","prevent"]))},"show less comments",10,Bt),(0,a.Lk)("button",{class:(0,o.C4)(["expandInfoButton wideLB",{disabledButton:l.numComments>=s.link.comments.length}]),disabled:l.numComments==s.link.comments.length,title:"load more comments",onClick:e[7]||(e[7]=(0,i.D$)((t=>r.incrementNumComments()),["stop","prevent"]))},"load more comments",10,Xt)])):(0,a.Q3)("",!0)],544)):(0,a.Q3)("",!0)],64)}var jt={name:"commentSelection",props:["state","link"],components:{},data(){return{showComment:!1,commentIncrVal:1,numComments:Math.min(this.link.comments.length,this.state.numComments)}},computed:{filteredComments(){let t=this.link.comments;return t.sort(((t,e)=>t.id-e.id)),t.filter(((t,e)=>e<this.numComments))},colHeight(){return Math.min(200,28*this.link.comments.length+5)+"px"}},methods:{deleteable(t){return+this.link.userID==+this.state.loggedinUserID||+t.userID==+this.state.loggedinUserID||this.state.admin},decrementNumComments(){this.numComments=Math.max(0,this.numComments-this.commentIncrVal)},incrementNumComments(){this.numComments=Math.min(this.link.comments.length,this.numComments+this.commentIncrVal),this.$nextTick((()=>{this.$refs.commentList.scrollTo(0,1e6)}))},closeComment(t){this.state.editingComment=!1,t.editing=!1},editComment(t){this.state.editingComment=!0,t.editing=!0,this.$nextTick((()=>{this.$nextTick((()=>{this.$refs.commentEdit.focus()}))}))},avatar(t){return-1!=this.state.userInfo[t.userID]?.avatar.indexOf("avatarDefault.png")?this.state.URLbase+"/avatarDefault.png":this.state.userInfo[t.userID]?.avatar},deleteComment(t){this.state.deleteComment(t)},header(t,e){return this.state.prettyDate({date:t.date},!0)},checked(t){switch(this.mode){case"multi":let t=!1;return this.links.map((t=>{})),t;default:break}},manageComments(){this.state.closePrompts(),this.state.composeCommentLink=this.link,this.state.showComposeComment=!0},toggleShowComments(){this.state.doMouseDown(),this.showComment?this.showComment=!this.showComment:this.$nextTick((()=>{this.$nextTick((()=>{this.showComment=!this.showComment}))}))},pushUpdate(t){let e={name:t.name,id:t.id,description:t.meta.description,slugs:t.meta.slugs,private:t.meta.private};this.state.updateComment(e)},updateSelection(t,e){}},mounted(){},watch:{"state.numComments"(t){this.numComments=t},"state.click"(t){}}};const Ft=(0,vt.A)(jt,[["render",zt],["__scopeId","data-v-01ffd36c"]]);var Wt=Ft;const Qt=["innerHTML"],Vt=["id","onClick","onMouseover"],_t={key:0},Jt={class:"tdRight"},Kt={class:"pop"},Zt={key:1},Gt=["innerHTML"];function Yt(t,e,s,i,n,l){return(0,a.uX)(),(0,a.CE)("div",{class:"votes",style:(0,o.Tr)(+s.link.votesCast?"":"height:60px;")},[(0,a.Lk)("div",{class:"votingTitle",innerHTML:l.vt},null,8,Qt),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.state.numv,(t=>((0,a.uX)(),(0,a.CE)("span",{id:"vel_"+s.link.slug+"_"+t,class:"vel",innerHTML:"☻",onClick:e=>l.click(t),onMouseover:e=>l.mouseover(t),onMouseout:e[0]||(e[0]=t=>l.clearVel())},null,40,Vt)))),256)),(0,a.Lk)("table",null,[+s.link.votesCast?((0,a.uX)(),(0,a.CE)("tr",_t,[e[1]||(e[1]=(0,a.Lk)("td",{class:"tdLeft"},"popularity",-1)),(0,a.Lk)("td",Jt,[(0,a.Lk)("div",Kt,[(0,a.Lk)("div",{class:"popInner",style:(0,o.Tr)(l.popStyle(s.link))},null,4)])])])):(0,a.Q3)("",!0),+s.link.votesCast?((0,a.uX)(),(0,a.CE)("tr",Zt,[e[2]||(e[2]=(0,a.Lk)("td",{class:"tdLeft"},"upvotes",-1)),(0,a.Lk)("td",{class:"tdRight",innerHTML:s.state.voteRating(s.link)},null,8,Gt)])):(0,a.Q3)("",!0)])],4)}var qt={name:"Votes",props:["state","link"],data(){return{votes:0}},methods:{popStyle(t){let e=this.state.voteRatingPerc(t);return`width:${100*e}%; background: hsla(${125*e}, 99%, 50%, 1);`},clearVel(){for(let t=0;t<this.state.numv;t++){let e=document.querySelector(`#vel_${this.link.slug}_${t+1}`);e.style.color="#40f",e.style.textShadow="3px 3px 5px #000",t<this.votes&&(e.style.color="red")}},click(t){if(!this.state.loggedIn)return this.state.showRegister=!1,this.state.showLoginPrompt=!0,this.state.pendingVoteSlug=this.link.slug,this.state.pendingVoteValue=this.votes,void(this.state.votePending=!0);this.votes=this.votes==t?0:t,this.clearVel(),this.state.setVote(this.link.slug,this.votes)},mouseover(t){this.clearVel();let e=document.querySelector(`#vel_${this.link.slug}_${t}`);e.style.textShadow="0 0 20px #fff";for(let s=0;s<t;s++)document.querySelector(`#vel_${this.link.slug}_${s+1}`).style.color="#0f8"}},watch:{"link.votes"(t){this.votes=t}},computed:{vc(){return!!+this.link.votes&&!!+this.link.votesCast},vt(){return this.vc?`your vote: ${this.votes}/${this.state.numv}`:"rate this asset"}},mounted(){this.votes=this.link.votes,Array(this.state.numv).fill().map(((t,e)=>{let s=document.querySelector(`#vel_${this.link.slug}_${e+1}`);e<this.votes&&(s.style.color="red")}))}};const te=(0,vt.A)(qt,[["render",Yt],["__scopeId","data-v-3d87459e"]]);var ee=te,se={name:"AssetData",props:["state","link","omitAssetData"],components:{CollectionSelection:bt,LinkComments:Wt,Votes:ee},data(){return{}},computed:{},methods:{onfocus(){console.log("blocking fade"),this.state.blockFade=!0},onblur(){console.log("re-enabling fade"),this.state.blockFade=!1}},mounted(){"undefined"==typeof this.link.expandedInfo&&(this.link.expandedInfo=!1)}};const ie=(0,vt.A)(se,[["render",nt],["__scopeId","data-v-3a7384f7"]]);var ae=ie,ne={name:"Link",components:{AssetData:ae},props:["state","link","omitAssetData"],data(){return{c:document.createElement("canvas"),x:null,linkType:"",img:null,w:0,h:0,t:0}},computed:{},methods:{updateLinkSelected(){this.link.selected?this.link.selected=!1:this.link.selected=!0},getThumb(){try{this.img.src="audio"==this.linkType?this.state.URLbase+"/musicNotes.svg":this.state.URLbase+"/thumb.php?res=resources/"+this.link.originalSlug+"."+this.link.href.split(".")[1]}catch(t){console.log(t)}},Draw(){this.x.globalAlpha=1,this.x.fillStyle="#0008",this.x.fillRect(0,0,this.c.width,this.c.height);let t,e="contain";switch(e){case"contain":t=this.c.width/this.c.height<=1.777777778?this.c.width/this.w:this.c.height/this.h;break;case"cover":t=this.c.width/this.c.height>1.777777778?this.c.width/this.w:this.c.height/this.h;break}let s=5,i=this.w*t-s,a=this.h*t-s;switch(this.x.drawImage(this.img,this.c.width/2-i/2,this.c.height/2-a/2,i,a),this.t+=1/60,this.linkType){case"image":setTimeout((()=>{this.img.width&&this.img.height||this.getThumb(),requestAnimationFrame(this.Draw)}),1e3);break;case"video":this.img.videoWidth&&this.img.videoHeight?requestAnimationFrame(this.Draw):setTimeout((()=>{this.getThumb(),requestAnimationFrame(this.Draw)}),1e3);break}}},mounted(){this.$refs.linkThumb.appendChild(this.c),this.x=this.c.getContext("2d"),this.linkType=this.link.filetype.split("/")[0],this.c.width=500,this.c.height=500/1.77777778,this.c.style.width="200px",this.c.style.height="113px",this.c.style.borderRadius="20px","video"==this.linkType&&(this.img=document.createElement("video"),this.img.loop=!0,this.img.muted=!0,this.img.oncanplay=()=>{this.img.paused&&(console.log("starting video! beep beep"),this.w=this.img.videoWidth,this.h=this.img.videoHeight,this.img.play(),this.Draw())},this.img.src=`${this.state.URLbase}/resources/`+this.link.originalSlug+"."+this.link.href.split(".")[1]),"image"!=this.linkType&&"audio"!=this.linkType||(this.img=new Image,this.img.onload=()=>{this.w=this.img.width,this.h=this.img.height,this.Draw()},this.getThumb())}};const oe=(0,vt.A)(ne,[["render",b],["__scopeId","data-v-47b49a70"]]);var le=oe;const re={class:"loadingAnimation",ref:"loadingAnimation"};function he(t,e,s,i,n,o){return(0,a.uX)(),(0,a.CE)("div",re,null,512)}var de={name:"LoadingAnimation",components:{AssetData:ae},props:["state","percent","filename"],data(){return{c:document.createElement("canvas"),x:null,break:!1,linkType:"",img:null,X:0,Y:0,Z:0,oZ:0,S:Math.sin,C:Math.cos,w:0,h:0,t:0,ipx:0,starImgs:[]}},computed:{},methods:{updateLinkSelected(){this.link.selected?this.link.selected=!1:this.link.selected=!0},getThumb(){try{this.img.src="audio"==this.linkType?this.state.URLbase+"/musicNotes.svg":this.state.URLbase+"/thumb.php?res=resources/"+this.link.originalSlug+"."+this.link.href.split(".")[1]}catch(t){console.log(t)}},stroke(t,e,s=1,i=!0,a=1){t&&(i&&(this.x.globalAlpha=.2*a),this.x.strokeStyle=t,this.x.lineWidth=Math.min(1e3,100*s/this.Z),i&&this.x.stroke(),this.x.lineWidth/=4,this.x.globalAlpha=1*a,this.x.stroke()),e&&(this.x.globalAlpha=1*a,this.x.fillStyle=e,this.x.fill())},Q(){return[this.c.width/2+this.X/this.Z*900,this.c.height/2+this.Y/this.Z*900]},Draw(){let t,e,s,i,a;this.x.globalAlpha=1,this.x.fillStyle="#000f",this.x.fillRect(0,0,this.c.width,this.c.height),this.oZ=28,this.x.globalAlpha=1,this.x.clearRect(0,0,this.c.width,this.c.height),this.x.lineJoin=this.x.lineCap="roud",this.x.fillStyle="#0f44",this.x.fillRect(0,0,this.c.width*this.percent,this.c.height),this.x.textAlign="left";for(let n=0;n<99*this.percent|0;n++){let i=1,a=1,o=.5,l=(n-50)*o+(-a/2+.5)*o-3.5,r=-1,h=0,d=2*o,c=16,u=2*Math.PI/c*n;for(let n=2;n--;){this.x.beginPath();let p=(this.percent<1?8*this.t:this.t)+(n?Math.PI:0);for(let g=i;g--;)this.X=l+a/i*g*o,this.Y=r+this.S(t=2*Math.PI/i*g/c+p+u)*d,this.Z=h+this.C(t)*d,this.Z+=this.oZ,this.Z>0&&this.x.lineTo(...this.Q()),this.X=l+a/i*(g+1)*o,this.Y=r+this.S(t=2*Math.PI/i*(g+1)/c+p+u)*d,this.Z=h+this.C(t)*d,this.Z+=this.oZ,this.Z>0&&(n?(e=this.Q(),this.x.lineTo(...e)):(s=this.Q(),this.x.lineTo(...s)));let m=`hsla(${this.percent<1?180*n:120},99%,50%,.7)`;this.stroke(m,"",4,!0)}this.ipx||(this.ipx=(e[0]+s[0])/2)}"undefined"!=typeof e&&(this.x.font=(i=85)+"px Courier Prime",this.x.fillStyle="#fff",this.ipx+=((e[0]+s[0])/2+i/2-this.ipx)/4,a=100,"undefined"!=typeof this.state.starImgs[6]&&"undefined"!=typeof this.state.starImgs[1]&&this.state.starImgs[6].loaded&&this.state.starImgs[1].loaded&&this.percent<1?(this.x.drawImage(this.state.starImgs[6].img,e[0]-a/2,-a/2+e[1],a,a),this.x.drawImage(this.state.starImgs[1].img,s[0]-a/2,-a/2+s[1],a,a)):"undefined"!=typeof this.state.starImgs[4]&&this.state.starImgs[4].loaded&&(this.x.drawImage(this.state.starImgs[4].img,e[0]-a/2,-a/2+e[1],a,a),this.x.drawImage(this.state.starImgs[4].img,s[0]-a/2,-a/2+s[1],a,a)),this.x.fillText(Math.round(100*this.percent)/1+"%",this.ipx+.25*i,this.c.height/2-i/16)),this.x.fillStyle="#8888",this.x.textAlign="center",this.x.fillText(this.filename,this.c.width/2,this.c.height/2+i),this.t+=1/60,this.break||requestAnimationFrame(this.Draw)}},mounted(){this.$refs.loadingAnimation.appendChild(this.c),this.x=this.c.getContext("2d"),this.c.width=1920,this.c.height=200,this.c.style.height="83px",this.c.style.width="800px",this.c.style.verticalAlign="top",this.Draw()},beforeUnmount(){this.break=!0}};const ce=(0,vt.A)(de,[["render",he],["__scopeId","data-v-20ab217c"]]);var ue=ce,pe={name:"Main",props:["state"],components:{Link:le,LoadingAnimation:ue},data(){return{preload:[],rejects:[],dragover:!1,showUploadProgress:!1,filesUploading:[]}},computed:{showFeatured(){return"col"==this.state.mode||"item"==this.state.mode||"trending"==this.state.mode||this.state.userLinks.length||this.state.links.length||this.state.loadingAssets||this.state.loadFeaturedItems(),"trending"==this.state.mode},filteredLinks(){return this.state.miscLinks.filter((t=>t))}},methods:{shortUploadName(t){let e=t;return e.length>43&&(e=e.substring(0,30)+"..."+e.substring(e.length-10)),e},dragLeaveHandler(){this.dragover=!1},dragOverHandler(){this.dragover=!0},processUpload(t){if(!t.length)return;this.showUploadProgress=!0,this.$refs.main.style.zIndex=1e5,this.filesUploading=Array(t.length).fill().map((t=>({}))),console.log(t),Array.from(t).forEach(((t,e)=>{t.completed=!1,this.filesUploading[e].perc=0,this.filesUploading[e].uploadName=t.name}));let e=0;t.map(((t,s)=>{console.log(`file ${s}: `,t),("image/gif"==t.type||"image/jiff"==t.type||"image/jpeg"==t.type||"image/jpg"==t.type||"image/png"==t.type||"image/webp"==t.type||"video/mp4"==t.type||"video/webm"==t.type||"video/mkv"==t.type||"audio/mp3"==t.type||"audio/wav"==t.type||"audio/mpeg"==t.type)&&t.size<25e6?e++:this.rejects=[...this.rejects,t]}));let s='<div style="min-width:90vw; min-height: 50vh; position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%);background: #4008; color: #f88; padding-top: 100px;">';this.rejects.map((t=>{let e=(t.size/1048576|0).toLocaleString("en-us")+" MB<br>";s+=`oversized/rejected: size: ${e} "${t.name}" <br><br>`})),this.rejects.length?(this.state.modalQueue=[...this.state.modalQueue,s+"</div>"],this.state.closeModal()):e?Array.from(t).forEach(((e,s)=>{let i={loggedIn:this.state.loggedIn,userID:this.state.loggedinUserID,passhash:this.state.passhash,description:""};console.log("batchMetaData",i);let a=new FormData;a.append("uploads_0",e),a.append("batchMetaData",JSON.stringify(i));let n=new XMLHttpRequest;n.open("POST",`${this.state.URLbase}/upload.php`),n.upload.addEventListener("progress",(t=>{let i=t.loaded/t.total*100;this.filesUploading[s].uploadName=e.name,this.filesUploading[s].perc=i;let a=!0;this.filesUploading.map((t=>{t.perc<99&&(a=!1)})),a&&(console.log("showing loading..."),this.state.showLoading=!0)})),n.addEventListener("load",(i=>{if(e.completed=!0,"<"!=i.currentTarget.responseText[0]){let t=JSON.parse(i.currentTarget.responseText);t[0]&&t[1].map(((e,i)=>{this.state.addLink(t[2][i],t[3][i],s,e,!1,this.state.loggedinUserID,t[6][i],t[7][i],t[8][i],t[9],t[10][i],t[11][i],t[12][i],t[13][i],t[14][i],t[15][i])}))}let a=!0;if(Array.from(t).forEach((t=>{t.completed||(a=!1)})),a)if(console.log("finished"),this.showUploadProgress=!1,this.$refs.main.style.zIndex=0,this.state.loggedIn)this.state.modalContent="",this.state.closeModal(),this.state.links=[],this.state.fetchUserLinks(this.state.loggedinUserID),this.state.jumpToPage(0),this.state.uploadEventTally++;else{let t=JSON.parse(i.currentTarget.responseText);t[0]?(this.state.modalContent='<div style="box-sizing: border-box;min-width:90vw; min-height: 50vh; position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%);background: #0846; color: #8f8; padding: 100px; text-align: left;word-break: auto-phrase;">excellent choice, uploading here...<br><br>you have not logged in though, which means your links will be lost soon.<br><br>If you register, nothing is needed except a name of your choosing and a password you will remember, then these uploads will be auto-saved to your new profile...<br><br>just don\'t close the page or refresh before you login or register!<br><br><br>thanks for using this service!</div>',this.state.showModal=!0,this.state.showRegister=!1,this.state.showLoginPrompt=!0):this.state.modalContent='<div style="min-width:90vw; min-height: 50vh; position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%);background: #8002; color: #f88; padding-top: 100px;">'+t[5]+"</div>"}})),n.send(a)})):(this.$refs.main.style.zIndex=0,alert("no files were uploaded. hmmmm. mebbe too big tho"),this.state.closeModal(),this.showUploadProgress=!1)},dropFiles(t){let e=[];t.dataTransfer.items?[...t.dataTransfer.items].forEach(((t,s)=>{if("file"===t.kind){const s=t.getAsFile();e=[...e,s]}})):e=Array.from(t.dataTransfer.files),e.length&&this.processUpload(e)},loadFiles(){let t=document.createElement("input");t.type="file",t.multiple=!0,t.accept="image/gif, image/jiff, image/jpeg, image/jpg, image/png, image/webp, video/mp4, video/webm, video/mkv, audio/mp3, audio/wav, audio/mpeg",t.onchange=()=>this.processUpload(Array.from(t.files)),t.click()}},mounted(){this.state.loadFiles=this.loadFiles,this.preload=[...this.preload,[document.createElement("video"),"loading.mp4"],[new Image,"../assets/nonvisible.png"]],this.preload.map((t=>{t[0].style.position="absolute",t[0].style.zIndex="-1",t[0].style.opacity="0.001",document.body.appendChild(t[0]),t[0].src=this.state.URLbase+"/"+t[1]}))}};const me=(0,vt.A)(pe,[["render",g],["__scopeId","data-v-52ff0545"]]);var ge=me;const ke={class:"modal",ref:"modal",tabindex:"1000"},fe=["innerHTML"];function ve(t,e,s,i,n,o){return(0,a.uX)(),(0,a.CE)(a.FK,null,[this.state.uploadInProgress?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:e[0]||(e[0]=t=>o.close()),class:"cancelButton",title:"close this view [ESC]"}," close/cancel ")),(0,a.Lk)("div",ke,[(0,a.Lk)("div",{class:"modalInner",innerHTML:s.content},null,8,fe)],512)],64)}var Le={name:"Modal",props:["state","content"],methods:{close(){this.state.closeModal()}},mounted(){this.$refs.modal.focus()}};const be=(0,vt.A)(Le,[["render",ve],["__scopeId","data-v-5756412a"]]);var we=be;const ye={class:"stats",ref:"stats",tabindex:"1000"},Ce={class:"modalInner",style:{overflow:"auto"}},De=["title"],Te=["innerHTML","title"],xe={class:"statsTable"},Pe=["innerHTML"],Ie=["innerHTML"],Me=["innerHTML"],Ue={class:"statsTable"},Se=["innerHTML"],$e=["innerHTML"],Ae=["innerHTML"],Re=["innerHTML"],Ee=["innerHTML"],Ne=["innerHTML"],Oe=["innerHTML"],He={class:"tdRight"},Be=["innerHTML"],Xe={key:0},ze=["onClick"],je={key:1,class:"tdRight"},Fe=["href"],We={key:2,class:"tdRight"},Qe=["href"],Ve={key:3,class:"tdRight"},_e=["href"],Je=["src"],Ke=["innerHTML"],Ze={class:"tdRight"},Ge=["innerHTML"],Ye={class:"tdRight"},qe=["innerHTML"],ts={class:"tdRight"},es=["innerHTML"],ss={class:"tdRight",style:{"min-width":"120px"}},is=["innerHTML"],as={class:"tdRight"},ns=["innerHTML"],os={class:"tdRight"},ls=["innerHTML"];function rs(t,e,s,i,n,l){return(0,a.uX)(),(0,a.CE)(a.FK,null,[this.state.uploadInProgress?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:e[0]||(e[0]=t=>l.close()),class:"cancelButton",title:"close this view [ESC]"}," close/cancel ")),(0,a.Lk)("div",ye,[(0,a.Lk)("div",Ce,[e[14]||(e[14]=(0,a.eW)(" <<< STATS >>>")),e[15]||(e[15]=(0,a.Lk)("br",null,null,-1)),e[16]||(e[16]=(0,a.Lk)("br",null,null,-1)),(0,a.Lk)("div",{class:"avatar",style:(0,o.Tr)([{width:"320px",height:"180px"},`background-image: url(${s.state.avatar({userID:s.state.userStatsID})})`]),title:`user: ${s.state.userInfo[s.state.userStatsID]?.name}`},null,12,De),e[17]||(e[17]=(0,a.Lk)("br",null,null,-1)),(0,a.Lk)("button",{class:"commentButton",onClick:e[1]||(e[1]=t=>s.state.openUserPage(s.state.userStatsID)),style:{padding:"5px",color:"#000","font-size":"20px",background:"#ff0"},innerHTML:s.state.shortText(s.state.userInfo[s.state.userStatsID]?.name,16),title:`view ${s.state.shortText(s.state.userInfo[s.state.userStatsID]?.name,16)}'s assets`},null,8,Te),e[18]||(e[18]=(0,a.Lk)("hr",null,null,-1)),(0,a.Lk)("table",xe,[(0,a.Lk)("tr",null,[e[9]||(e[9]=(0,a.Lk)("td",{class:"tdLeft",style:{"font-size":"2em"}},"assets",-1)),(0,a.Lk)("td",{class:"tdRight",style:{"font-size":"2em"},innerHTML:l.assets},null,8,Pe)]),(0,a.Lk)("tr",null,[e[10]||(e[10]=(0,a.Lk)("td",{class:"tdLeft",style:{"font-size":"2em"}},"ttl views",-1)),(0,a.Lk)("td",{class:"tdRight",style:{"font-size":"2em"},innerHTML:l.ttlViews},null,8,Ie)]),(0,a.Lk)("tr",null,[e[11]||(e[11]=(0,a.Lk)("td",{class:"tdLeft",style:{"font-size":"2em"}},"footprint",-1)),(0,a.Lk)("td",{class:"tdRight",style:{"font-size":"2em"},innerHTML:l.footprint},null,8,Me)])]),e[19]||(e[19]=(0,a.Lk)("hr",null,null,-1)),e[20]||(e[20]=(0,a.Lk)("br",null,null,-1)),(0,a.Lk)("table",Ue,[(0,a.Lk)("tr",null,[e[12]||(e[12]=(0,a.Lk)("th",null,"asset",-1)),e[13]||(e[13]=(0,a.Lk)("th",null,"thumb",-1)),(0,a.Lk)("th",null,[(0,a.Lk)("button",{class:(0,o.C4)({sortCol:"views"==n.sortMode}),onClick:e[2]||(e[2]=t=>l.setSortMode("views")),innerHTML:"views<br>"+(n.sortDir?"⇧":"⇩")},null,10,Se)]),(0,a.Lk)("th",null,[(0,a.Lk)("button",{class:(0,o.C4)({sortCol:"upvotes"==n.sortMode}),onClick:e[3]||(e[3]=t=>l.setSortMode("upvotes")),innerHTML:"up<br>votes<br>"+(n.sortDir?"⇧":"⇩")},null,10,$e)]),(0,a.Lk)("th",null,[(0,a.Lk)("button",{class:(0,o.C4)({sortCol:"votesCast"==n.sortMode}),onClick:e[4]||(e[4]=t=>l.setSortMode("votesCast")),innerHTML:"votes<br>cast<br>"+(n.sortDir?"⇧":"⇩")},null,10,Ae)]),(0,a.Lk)("th",null,[(0,a.Lk)("button",{class:(0,o.C4)({sortCol:"popularity"==n.sortMode}),onClick:e[5]||(e[5]=t=>l.setSortMode("popularity")),innerHTML:"pop<br>"+(n.sortDir?"⇧":"⇩")},null,10,Re)]),(0,a.Lk)("th",null,[(0,a.Lk)("button",{class:(0,o.C4)({sortCol:"sizes"==n.sortMode}),onClick:e[6]||(e[6]=t=>l.setSortMode("sizes")),innerHTML:"size<br>"+(n.sortDir?"⇧":"⇩")},null,10,Ee)]),(0,a.Lk)("th",null,[(0,a.Lk)("button",{class:(0,o.C4)({sortCol:"dates"==n.sortMode}),onClick:e[7]||(e[7]=t=>l.setSortMode("dates")),innerHTML:"date<br>"+(n.sortDir?"⇧":"⇩")},null,10,Ne)]),(0,a.Lk)("th",null,[(0,a.Lk)("button",{class:(0,o.C4)({sortCol:"types"==n.sortMode}),onClick:e[8]||(e[8]=t=>l.setSortMode("types")),innerHTML:"type<br>"+(n.sortDir?"⇧":"⇩")},null,10,Oe)])]),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.sortedArray,(t=>((0,a.uX)(),(0,a.CE)("tr",null,[(0,a.Lk)("td",He,[(0,a.Lk)("div",{class:"actualAsset",innerHTML:t.slug},null,8,Be)]),t.showPreview?-1!=t.filetype.indexOf("audio")?((0,a.uX)(),(0,a.CE)("td",je,[(0,a.Lk)("a",{href:s.state.URLbase+"/"+t.href,target:"_blank"},[(0,a.Lk)("div",{style:(0,o.Tr)(`background-image: url(${s.state.URLbase+"/musicNotes.svg"});`),class:"avatar"},null,4)],8,Fe)])):-1!=t.filetype.indexOf("image")?((0,a.uX)(),(0,a.CE)("td",We,[(0,a.Lk)("a",{href:s.state.URLbase+"/"+t.href,target:"_blank"},[(0,a.Lk)("div",{style:(0,o.Tr)(`background-image: url(${s.state.URLbase+"/"+t.href});`),class:"avatar"},null,4)],8,Qe)])):-1!=t.filetype.indexOf("video")?((0,a.uX)(),(0,a.CE)("td",Ve,[(0,a.Lk)("a",{href:s.state.URLbase+"/"+t.href,target:"_blank"},[(0,a.Lk)("video",{autoplay:"",loop:"",muted:"",src:s.state.URLbase+"/"+t.href,class:"avatar"},null,8,Je)],8,_e)])):(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("td",Xe,[(0,a.Lk)("button",{onClick:e=>t.showPreview=!0},"show",8,ze)])),(0,a.Lk)("td",{class:"tdRight",innerHTML:t.views},null,8,Ke),(0,a.Lk)("td",Ze,[(0,a.Lk)("div",{class:"actualAsset",innerHTML:t.upvotes},null,8,Ge)]),(0,a.Lk)("td",Ye,[(0,a.Lk)("div",{class:"actualAsset",innerHTML:t.votesCast},null,8,qe)]),(0,a.Lk)("td",ts,[(0,a.Lk)("div",{class:"actualAsset",innerHTML:100*s.state.voteRatingPerc(t)+"%"},null,8,es)]),(0,a.Lk)("td",ss,[(0,a.Lk)("div",{class:"actualAsset",innerHTML:s.state.size(t.size)},null,8,is)]),(0,a.Lk)("td",as,[(0,a.Lk)("div",{class:"actualAsset",innerHTML:s.state.prettyDate({date:t.date})},null,8,ns)]),(0,a.Lk)("td",os,[(0,a.Lk)("div",{class:"actualAsset",innerHTML:t.filetype},null,8,ls)])])))),256))])])],512)],64)}var hs={name:"Stats",props:["state"],data(){return{sortDir:!0,sortMode:"views",array:JSON.parse(JSON.stringify(this.state.userStats[this.state.userStatsID]))}},methods:{close(){this.state.showStats=!1},setSortMode(t){switch(t){case"views":"views"==this.sortMode?this.sortDir=!this.sortDir:this.sortMode="views";break;case"sizes":"sizes"==this.sortMode?this.sortDir=!this.sortDir:this.sortMode="sizes";break;case"dates":"dates"==this.sortMode?this.sortDir=!this.sortDir:this.sortMode="dates";break;case"types":"types"==this.sortMode?this.sortDir=!this.sortDir:this.sortMode="types";break;case"upvotes":"upvotes"==this.sortMode?this.sortDir=!this.sortDir:this.sortMode="upvotes";break;case"votesCast":"votesCast"==this.sortMode?this.sortDir=!this.sortDir:this.sortMode="votesCast";break;case"popularity":"popularity"==this.sortMode?this.sortDir=!this.sortDir:this.sortMode="popularity";break}}},computed:{ttlViews(){let t=0;return this.array.map((e=>{t+=+e.views})),t},sortedByViews(){let t=this.array;return t.sort(((t,e)=>(this.sortDir?e:t).views-(this.sortDir?t:e).views))},sortedByUpVotes(){let t=this.array;return t.sort(((t,e)=>(this.sortDir?e:t).upvotes-(this.sortDir?t:e).upvotes))},sortedByVotesCast(){let t=this.array;return t.sort(((t,e)=>(this.sortDir?e:t).votesCast-(this.sortDir?t:e).votesCast))},sortedByPopularity(){let t=this.array;return t.sort(((t,e)=>this.state.voteRatingPerc(this.sortDir?e:t)-this.state.voteRatingPerc(this.sortDir?t:e)))},sortedBySizes(){let t=this.array;return t.sort(((t,e)=>(this.sortDir?e:t).size-(this.sortDir?t:e).size))},sortedByTypes(){let t=this.array;return t.sort(((t,e)=>(this.sortDir?e:t).filetype-(this.sortDir?t:e).filetype))},sortedByDates(){let t=this.array;return t.sort(((t,e)=>new Date((this.sortDir?e:t).date)-new Date((this.sortDir?t:e).date)))},assets(){return this.state.userStats[this.state.userStatsID].length},footprint(){let t=0;return this.state.userStats[this.state.userStatsID].map((e=>{t+=e.size})),this.state.size(t)},sortedArray(){switch(this.sortMode){case"views":return this.sortedByViews;case"upvotes":return this.sortedByUpVotes;case"votesCast":return this.sortedByVotesCast;case"popularity":return this.sortedByPopularity;case"sizes":return this.sortedBySizes;case"types":return this.sortedByTypes;case"dates":return this.sortedByDates}}},mounted(){this.$refs.stats.focus()}};const ds=(0,vt.A)(hs,[["render",rs],["__scopeId","data-v-55970cd0"]]);var cs=ds;const us={key:0,class:"admin",ref:"admin",tabindex:"1000"},ps={key:0,class:"modalInner"},ms={key:0,class:"adminSection"},gs=["innerHTML"],ks=["innerHTML"],fs=["innerHTML"],vs={key:1,class:"adminSection"},Ls=["innerHTML"],bs=["innerHTML"],ws=["innerHTML"],ys=["innerHTML"],Cs={class:"td"},Ds=["innerHTML"],Ts={key:0},xs=["onClick"],Ps={key:1,class:"td"},Is=["href"],Ms={key:2,class:"td"},Us=["href"],Ss={key:3,class:"td"},$s=["href"],As=["src"],Rs=["onClick","innerHTML"],Es={class:"td"},Ns=["innerHTML"],Os={class:"td"},Hs=["innerHTML"],Bs={class:"td"},Xs=["innerHTML"],zs={class:"td"},js=["onClick"],Fs={key:2,class:"adminSection"},Ws={class:"td"},Qs=["innerHTML"],Vs={class:"td"},_s=["innerHTML"],Js={key:0},Ks=["onClick"],Zs={key:1,class:"td"},Gs={class:"td"},Ys=["innerHTML"],qs={class:"td"},ti=["innerHTML"],ei={class:"td"},si=["innerHTML"],ii={class:"td"},ai=["innerHTML"],ni={class:"td"},oi=["innerHTML"],li=["innerHTML"];function ri(t,e,s,i,n,l){return(0,a.uX)(),(0,a.CE)(a.FK,null,[s.state.showAdmin?((0,a.uX)(),(0,a.CE)("div",us,[s.state.adminData?((0,a.uX)(),(0,a.CE)("div",ps,[s.state.adminData?.footprint?((0,a.uX)(),(0,a.CE)("div",ms,[(0,a.Lk)("table",null,[e[5]||(e[5]=(0,a.Lk)("tr",null,[(0,a.Lk)("th",null,"footprint"),(0,a.Lk)("th",null,"files"),(0,a.Lk)("th",null,"orphans")],-1)),(0,a.Lk)("tr",null,[(0,a.Lk)("td",{class:"td",innerHTML:s.state.size(s.state.adminData.footprint)},null,8,gs),(0,a.Lk)("td",{class:"td",innerHTML:s.state.adminData["number assets"].toLocaleString()},null,8,ks),(0,a.Lk)("td",{class:"td",innerHTML:s.state.adminData["orphaned assets"].length},null,8,fs)])])])):(0,a.Q3)("",!0),s.state.adminData?.fileSizes?((0,a.uX)(),(0,a.CE)("div",vs,[e[9]||(e[9]=(0,a.eW)(" Actual Assets, on drive")),e[10]||(e[10]=(0,a.Lk)("br",null,null,-1)),(0,a.Lk)("table",null,[(0,a.Lk)("tr",null,[e[6]||(e[6]=(0,a.Lk)("th",null,"slug",-1)),e[7]||(e[7]=(0,a.Lk)("th",null,"preview",-1)),(0,a.Lk)("th",null,[(0,a.Lk)("button",{class:(0,o.C4)({sortCol:"trending"==n.sortMode}),onClick:e[0]||(e[0]=t=>l.setSortMode("trending")),innerHTML:"trending<br>"+(n.sortDir?"⇧":"⇩")},null,10,Ls)]),(0,a.Lk)("th",null,[(0,a.Lk)("button",{class:(0,o.C4)({sortCol:"sizes"==n.sortMode}),onClick:e[1]||(e[1]=t=>l.setSortMode("sizes")),innerHTML:"size<br>"+(n.sortDir?"⇧":"⇩")},null,10,bs)]),(0,a.Lk)("th",null,[(0,a.Lk)("button",{class:(0,o.C4)({sortCol:"dates"==n.sortMode}),onClick:e[2]||(e[2]=t=>l.setSortMode("dates")),innerHTML:"date<br>"+(n.sortDir?"⇧":"⇩")},null,10,ws)]),(0,a.Lk)("th",null,[(0,a.Lk)("button",{class:(0,o.C4)({sortCol:"types"==n.sortMode}),onClick:e[3]||(e[3]=t=>l.setSortMode("types")),innerHTML:"type<br>"+(n.sortDir?"⇧":"⇩")},null,10,ys)]),e[8]||(e[8]=(0,a.Lk)("th",null,"delete",-1))]),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.sortedArray,(t=>((0,a.uX)(),(0,a.CE)("tr",null,[(0,a.Lk)("td",Cs,[(0,a.Lk)("div",{class:"actualAsset",innerHTML:s.state.adminData.slugs[t]},null,8,Ds)]),s.state.showAssetPreview[t]?-1!=s.state.adminData.filetypes[t].indexOf("audio")?((0,a.uX)(),(0,a.CE)("td",Ps,[(0,a.Lk)("a",{href:s.state.URLbase+"/"+s.state.adminData.hrefs[t],target:"_blank"},[(0,a.Lk)("div",{style:(0,o.Tr)(`background-image: url(${s.state.URLbase+"/musicNotes.svg"});`),class:"avatar"},null,4)],8,Is)])):-1!=s.state.adminData.filetypes[t].indexOf("image")?((0,a.uX)(),(0,a.CE)("td",Ms,[(0,a.Lk)("a",{href:s.state.URLbase+"/"+s.state.adminData.hrefs[t],target:"_blank"},[(0,a.Lk)("div",{style:(0,o.Tr)(`background-image: url(${s.state.URLbase+"/"+s.state.adminData.hrefs[t]});`),class:"avatar"},null,4)],8,Us)])):-1!=s.state.adminData.filetypes[t].indexOf("video")?((0,a.uX)(),(0,a.CE)("td",Ss,[(0,a.Lk)("a",{href:s.state.URLbase+"/"+s.state.adminData.hrefs[t],target:"_blank"},[(0,a.Lk)("video",{autoplay:"",loop:"",muted:"",src:s.state.adminData.hrefs[t],class:"avatar"},null,8,As)],8,$s)])):(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("td",Ts,[(0,a.Lk)("button",{onClick:e=>s.state.showAssetPreview[t]=!0},"show",8,xs)])),(0,a.Lk)("td",null,[(0,a.Lk)("button",{onClick:e=>s.state.toggleTrending(s.state.adminData.slugs[t]),style:(0,o.Tr)("background: "+(s.state.isTrending(s.state.adminData.slugs[t])?"#f04":"#0f4")),innerHTML:s.state.isTrending(s.state.adminData.slugs[t])?"remove":"add"},null,12,Rs)]),(0,a.Lk)("td",Es,[(0,a.Lk)("div",{class:"actualAsset",innerHTML:s.state.size(s.state.adminData.fileSizes[t])},null,8,Ns)]),(0,a.Lk)("td",Os,[(0,a.Lk)("div",{class:"actualAsset",innerHTML:s.state.prettyDate({date:s.state.adminData.fileDates[t]})},null,8,Hs)]),(0,a.Lk)("td",Bs,[(0,a.Lk)("div",{class:"actualAsset",innerHTML:s.state.adminData.filetypes[t]},null,8,Xs)]),(0,a.Lk)("td",zs,[(0,a.Lk)("div",{onClick:e=>s.state.adminDeleteAsset(s.state.adminData.slugs[t]),class:"deleteSingleButton",title:"nuke this asset and all its relations"},null,8,js)])])))),256))])])):(0,a.Q3)("",!0),s.state.adminData?.users?((0,a.uX)(),(0,a.CE)("div",Fs,[e[12]||(e[12]=(0,a.eW)(" Users")),e[13]||(e[13]=(0,a.Lk)("br",null,null,-1)),(0,a.Lk)("table",null,[e[11]||(e[11]=(0,a.Lk)("tr",null,[(0,a.Lk)("th",null,"id"),(0,a.Lk)("th",null,"name"),(0,a.Lk)("th",null,"avatar"),(0,a.Lk)("th",null,"admin"),(0,a.Lk)("th",null,"enabled"),(0,a.Lk)("th",null,"assets"),(0,a.Lk)("th",null,"joined"),(0,a.Lk)("th",null,"seen")],-1)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.state.adminData.users,((t,e)=>((0,a.uX)(),(0,a.CE)("tr",null,[(0,a.Lk)("td",Ws,[(0,a.Lk)("div",{class:"actualAsset",innerHTML:t.id},null,8,Qs)]),(0,a.Lk)("td",Vs,[(0,a.Lk)("div",{class:"actualAsset",innerHTML:t.name},null,8,_s)]),s.state.showAvatarPreview[e]?((0,a.uX)(),(0,a.CE)("td",Zs,[(0,a.Lk)("div",{style:(0,o.Tr)(`background-image: url(${s.state.avatar({userID:t.id})});`),class:"avatar"},null,4)])):((0,a.uX)(),(0,a.CE)("td",Js,[(0,a.Lk)("button",{onClick:t=>s.state.showAvatarPreview[e]=!0},"show",8,Ks)])),(0,a.Lk)("td",Gs,[(0,a.Lk)("div",{class:"actualAsset",innerHTML:t.admin},null,8,Ys)]),(0,a.Lk)("td",qs,[(0,a.Lk)("div",{class:"actualAsset",innerHTML:t.enabled},null,8,ti)]),(0,a.Lk)("td",ei,[(0,a.Lk)("div",{class:"actualAsset",innerHTML:t.slugs.length},null,8,si)]),(0,a.Lk)("td",ii,[(0,a.Lk)("div",{class:"actualAsset",innerHTML:t.dateJoined},null,8,ai)]),(0,a.Lk)("td",ni,[(0,a.Lk)("div",{class:"actualAsset",innerHTML:t.dateSeen},null,8,oi)])])))),256))])])):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0)],512)):(0,a.Q3)("",!0),s.state.showPreview||s.state.showModal?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("button",{key:1,class:"adminButton",onClick:e[4]||(e[4]=t=>l.toggleShowAdmin()),innerHTML:s.state.showAdmin?"exit admin view":"show admin view"},null,8,li))],64)}var hi={name:"Admin",props:["state"],components:{},data(){return{sortDir:!0,sortMode:"sizes",array:JSON.parse(JSON.stringify(this.state.adminData))}},methods:{close(){this.state.showAdmin=!1},toggleShowAdmin(){this.state.showAdmin?this.state.showAdmin=!1:(this.showLoading=!0,this.launch())},launch(){this.state.getAdminData()},setSortMode(t){switch(t){case"views":"views"==this.sortMode?this.sortDir=!this.sortDir:this.sortMode="views";break;case"sizes":"sizes"==this.sortMode?this.sortDir=!this.sortDir:this.sortMode="sizes";break;case"dates":"dates"==this.sortMode?this.sortDir=!this.sortDir:this.sortMode="dates";break;case"types":"types"==this.sortMode?this.sortDir=!this.sortDir:this.sortMode="types";break;case"trending":"trending"==this.sortMode?this.sortDir=!this.sortDir:this.sortMode="trending";break;case"upvotes":"upvotes"==this.sortMode?this.sortDir=!this.sortDir:this.sortMode="upvotes";break;case"votesCast":"votesCast"==this.sortMode?this.sortDir=!this.sortDir:this.sortMode="votesCast";break;case"avgvotes":"avgvotes"==this.sortMode?this.sortDir=!this.sortDir:this.sortMode="avgvotes";break}}},computed:{ttlViews(){let t=0;return this.array.map((e=>{t+=+e.views})),t},sortedByViews(){if(this.state.adminData){let t=Array(this.state.adminData.fileViews.length).fill().map(((t,e)=>({idx:e,views:this.state.adminData.fileViews[e]})));return t.sort(((t,e)=>(this.sortDir?e:t).views-(this.sortDir?t:e).views)),t.map((t=>t.idx))}return[]},sortedByTrending(){if(this.state.adminData){let t=Array(this.state.adminData.slugs.length).fill().map(((t,e)=>({idx:e,trending:this.state.isTrending(this.state.adminData.slugs[e])})));return t.sort(((t,e)=>(this.sortDir?e:t).trending-(this.sortDir?t:e).trending)),t.map((t=>t.idx))}return[]},sortedByUpVotes(){},sortedByDownVotes(){},sortedByAvgVotes(){},sortedBySizes(){if(this.state.adminData){let t=Array(this.state.adminData.fileSizes.length).fill().map(((t,e)=>({idx:e,size:this.state.adminData.fileSizes[e]})));return t.sort(((t,e)=>(this.sortDir?e:t).size-(this.sortDir?t:e).size)),t.map((t=>t.idx))}return[]},sortedByTypes(){if(this.state.adminData){let t=Array(this.state.adminData.filetypes.length).fill().map(((t,e)=>({idx:e,type:this.state.adminData.filetypes[e]})));return t.sort(((t,e)=>(this.sortDir?e:t).type==(this.sortDir?t:e).type?0:(this.sortDir?e:t).type<(this.sortDir?t:e).type?-1:(this.sortDir?e:t).type>(this.sortDir?t:e).type?1:void 0)),t.map((t=>t.idx))}return[]},sortedByDates(){if(this.state.adminData){let t=Array(this.state.adminData.fileDates.length).fill().map(((t,e)=>({idx:e,date:new Date(this.state.adminData.fileDates[e])})));return t.sort(((t,e)=>(this.sortDir?e:t).date-(this.sortDir?t:e).date)),t.map((t=>t.idx))}return[]},sortedArray(){switch(this.sortMode){case"views":return this.sortedByViews;case"upvotes":return this.sortedByUpVotes;case"votesCast":return this.sortedByDownVotes;case"avgvotes":return this.sortedByAvgViews;case"trending":return this.sortedByTrending;case"sizes":return this.sortedBySizes;case"types":return this.sortedByTypes;case"dates":return this.sortedByDates}}},mounted(){}};const di=(0,vt.A)(hi,[["render",ri],["__scopeId","data-v-0aebebe0"]]);var ci=di;const ui={class:"header"};function pi(t,e,s,i,n,o){const l=(0,a.g2)("User");return(0,a.uX)(),(0,a.CE)("div",ui,[(0,a.Lk)("div",{class:"headerImg",onClick:e[0]||(e[0]=t=>o.reload())}),s.state.loggedIn?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(l,{key:0,state:s.state},null,8,["state"]))])}const mi={key:0,class:"username"},gi=["innerHTML","title"],ki={key:1,style:{display:"inline-block"}},fi={key:2,style:{display:"inline-block"}},vi={class:"userButtonContainer"},Li={class:"loggedIn",style:{display:"inline-block"}},bi=["title"];function wi(t,e,s,i,n,l){return(0,a.uX)(),(0,a.CE)("div",{class:(0,o.C4)(["user",{loggedInWidth:s.state.loggedIn,notLoggedInWidth:!s.state.loggedIn}])},[s.state.loggedIn?((0,a.uX)(),(0,a.CE)("div",mi,[e[8]||(e[8]=(0,a.Lk)("span",{style:{"font-size":".75em"}},"welcome,   ",-1)),e[9]||(e[9]=(0,a.Lk)("br",null,null,-1)),(0,a.Lk)("button",{class:"commentButton",style:{"font-size":"16px","line-height":"18px"},onClick:e[0]||(e[0]=t=>s.state.openUserPage(s.state.loggedinUserID)),innerHTML:s.state.shortText(s.state.userInfo[s.state.loggedinUserID]?.name,16),title:`view ${s.state.shortText(s.state.userInfo[s.state.loggedinUserID]?.name,16)}'s assets`},null,8,gi)])):(0,a.Q3)("",!0),s.state.loggedIn?((0,a.uX)(),(0,a.CE)("div",fi,[(0,a.Lk)("div",vi,[(0,a.Lk)("button",{onClick:e[3]||(e[3]=t=>l.logout()),title:"log out",class:"userbutton"},"logout"),(0,a.Lk)("button",{onClick:e[4]||(e[4]=t=>l.userFiles()),title:"go to your assets",style:{"background-color":"#80fc",color:"#fff"},class:"userbutton"},"my assets"),(0,a.Lk)("button",{onClick:e[5]||(e[5]=t=>l.showSettings()),title:"show user settings",class:"userbutton"},"settings"),(0,a.Lk)("button",{onClick:e[6]||(e[6]=t=>l.explore()),title:"learn more about similar tools offered",style:{"background-color":"#08fc",color:"#fff"},class:"userbutton"},"explore")]),(0,a.Lk)("div",Li,[(0,a.Lk)("div",{onClick:e[7]||(e[7]=t=>l.showSettings()),class:"avatar",title:`logged in as ${s.state.loggedinUserName}. click to show user settings`,style:(0,o.Tr)(`background-image: url(${s.state.getAvatar()})`)},null,12,bi)])])):((0,a.uX)(),(0,a.CE)("div",ki,[(0,a.Lk)("button",{onClick:e[1]||(e[1]=t=>l.login()),class:"loginButton",title:"sign in"}," login "),(0,a.Lk)("button",{onClick:e[2]||(e[2]=t=>s.state.register()),class:"loginButton",style:{top:"26px"},title:"register anonymously.<br><br>we only need a user name as<br>something to attach your files to"}," register ")]))],2)}var yi={name:"Login",props:["state"],data(){return{}},methods:{explore(){open("https://whr.rf.gd/a/about","_blank")},userFiles(){this.state.fetchUserLinks(this.state.loggedinUserID)},showSettings(){this.state.showUserSettings()},login(){this.state.showRegister=!1,this.state.showLoginPrompt=!0},logout(){this.state.logout()},toggleLogin(){this.state.loggedin||this.state.showLoginPrompt()}},mounted(){}};const Ci=(0,vt.A)(yi,[["render",wi],["__scopeId","data-v-32afc932"]]);var Di=Ci,Ti={name:"Header",props:["state"],components:{User:Di},data(){return{}},methods:{reload(){location.href=this.state.URLbase}},mounted(){}};const xi=(0,vt.A)(Ti,[["render",pi],["__scopeId","data-v-7aab3eb0"]]);var Pi=xi;const Ii={class:"footer"},Mi=["innerHTML"];function Ui(t,e,s,i,n,o){const l=(0,a.g2)("Pages");return(0,a.uX)(),(0,a.CE)("div",Ii,[(0,a.Lk)("span",{innerHTML:s.state.footerMsg},null,8,Mi),"col"!=s.state.mode&&"item"!=s.state.mode?((0,a.uX)(),(0,a.Wv)(l,{key:0,state:s.state},null,8,["state"])):(0,a.Q3)("",!0)])}const Si=["disabled"],$i=["disabled"],Ai=["disabled"],Ri=["disabled"];function Ei(t,e,s,i,n,l){return(s.state.totalPages>0||s.state.totalUserPages>0)&&"item"!=s.state.mode||s.state.search.string&&s.state.totalPages>1?((0,a.uX)(),(0,a.CE)("div",{key:0,class:(0,o.C4)(["pages",{bumpLeft:!s.state.loggedIn}])},[(0,a.Lk)("button",{class:(0,o.C4)(["navButton",{disabled:l.curPage<1}]),disabled:l.curPage<1,title:"go to first page [alt + home]",onClick:e[0]||(e[0]=t=>s.state.firstPage())}," << ",10,Si),(0,a.Lk)("button",{class:(0,o.C4)(["navButton",{disabled:l.curPage<1}]),disabled:l.curPage<1,title:"go back one page  [alt + left arrow]",onClick:e[1]||(e[1]=t=>s.state.regressPage())}," < ",10,$i),(0,a.eW)(" "+(0,o.v_)(l.pagenumber)+" ",1),(0,a.Lk)("button",{class:(0,o.C4)(["navButton",{disabled:l.totalPages==l.curPage+1}]),disabled:l.totalPages==l.curPage+1,title:"go forward one page  [alt + right arrow]",onClick:e[2]||(e[2]=t=>s.state.advancePage())}," > ",10,Ai),(0,a.Lk)("button",{class:(0,o.C4)(["navButton",{disabled:l.totalPages==l.curPage+1}]),title:"go to last page  [alt + end]",disabled:l.totalPages==l.curPage+1,onClick:e[3]||(e[3]=t=>s.state.lastPage())}," >> ",10,Ri)],2)):(0,a.Q3)("",!0)}var Ni={name:"Pages",props:["state"],data(){return{}},methods:{},computed:{totalPages(){switch(this.state.mode){case"user":return+this.state.totalPages;case"default":return+this.state.totalPages}},curPage(){switch(this.state.mode){case"user":return+this.state.curPage;case"default":return+this.state.curPage}},pagenumber(){let t;switch(this.state.mode){case"user":t="Page "+(this.state.curPage+1)+" of "+this.state.totalPages;break;case"default":t="Page "+(this.state.curPage+1)+" of "+this.state.totalPages;break}return t}},mounted(){this.curPage>this.totalPages&&this.state.jumpToPage(this.totalPages)}};const Oi=(0,vt.A)(Ni,[["render",Ei],["__scopeId","data-v-f8547bc4"]]);var Hi=Oi,Bi={name:"Footer",props:["state"],components:{Pages:Hi},data(){return{}},methods:{},mounted(){}};const Xi=(0,vt.A)(Bi,[["render",Ui],["__scopeId","data-v-35b1d456"]]);var zi=Xi;const ji={ref:"previewContainer",class:"previewContainer"},Fi={class:"previewInner"},Wi={class:"slideshow",ref:"slideshow"},Qi=["title"],Vi=["href"];function _i(t,e,s,n,l,r){const h=(0,a.g2)("Magnify"),d=(0,a.g2)("AssetData");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("label",{onMouseover:e[2]||(e[2]=t=>l.pauseMag=!0),onMouseout:e[3]||(e[3]=t=>l.pauseMag=!1),class:"checkboxLabel",title:"pinning prevents info from fading out...",style:{"z-index":"100000",margin:"10px","margin-left":"40px"}},[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=t=>s.state.pinned=t),onInput:e[1]||(e[1]=t=>r.togglePinned())},null,544),[[i.lH,s.state.pinned]]),e[29]||(e[29]=(0,a.Lk)("span",{class:"checkmark",style:{"margin-left":"-36px",width:"25px","margin-top":"-6px"}},null,-1)),e[30]||(e[30]=(0,a.Lk)("span",{style:{"margin-top":"-11px",width:"40px","margin-left":"-56px",position:"absolute","padding-left":"10px"}},"📌",-1))],32),(0,a.Lk)("button",{onClick:e[4]||(e[4]=t=>r.close()),onMouseover:e[5]||(e[5]=t=>l.pauseMag=!0),onMouseout:e[6]||(e[6]=t=>l.pauseMag=!1),class:"cancelButton",title:"close this view"}," close/cancel ",32),l.mounted?((0,a.uX)(),(0,a.Wv)(h,{key:0,onMouseover:e[7]||(e[7]=t=>l.pauseMag=!0),onMouseout:e[8]||(e[8]=t=>l.pauseMag=!1),class:(0,o.C4)({fade:!s.state.pinned&&!s.state.magLevel}),state:s.state,pause:l.pauseMag,element:r.previewContainer},null,8,["class","state","pause","element"])):(0,a.Q3)("",!0),(0,a.Lk)("div",ji,[(0,a.Lk)("div",{class:"preview",onMousemove:e[9]||(e[9]=t=>r.bumpNavButtonOpacity()),ref:"preview"},[(0,a.Lk)("div",Fi,[(0,a.Lk)("div",Wi,null,512)])],544)],512),(0,a.Lk)("div",{class:(0,o.C4)(["inputs",{fade:!s.state.pinned}]),ref:"inputs"},[(0,a.Lk)("div",{onMouseover:e[15]||(e[15]=t=>l.pauseMag=!0),onMouseout:e[16]||(e[16]=t=>l.pauseMag=!1),onMousemove:e[17]||(e[17]=t=>s.state.bumpADOpacity++),class:"linkButtons"},[s.state.loggedIn&&s.link.userID==s.state.loggedinUserID||s.state.admin?((0,a.uX)(),(0,a.CE)("div",{key:0,class:(0,o.C4)(["specialToolButton",{private:s.link.private,notPrivate:!s.link.private}]),onClick:e[10]||(e[10]=(0,i.D$)((t=>s.state.setLinkProperty(s.link,"private",s.link.private?0:1)),["prevent","stop"])),title:`toggle visibility. (currently: ${s.link.private?"NOT":""} featured in public galleries)`},null,10,Qi)):(0,a.Q3)("",!0),(0,a.Lk)("div",{class:"copyLinkButton",onClick:e[11]||(e[11]=(0,i.D$)((t=>s.state.copyLink(s.link.href)),["prevent","stop"])),title:"copy link to clipboard"}),(0,a.Lk)("a",{href:s.state.URLbase+"/"+s.link?.href,class:"openButton",onClick:e[12]||(e[12]=(0,i.D$)((t=>s.state.openLink(s.link)),["prevent","stop"])),title:"open link in new tab"},null,8,Vi),(0,a.Lk)("div",{class:"downloadButton",onClick:e[13]||(e[13]=(0,i.D$)((t=>s.state.downloadLink(s.link,s.state.fullFileName(s.link))),["prevent","stop"])),title:"download asset"}),s.state.loggedIn&&s.link.userID==s.state.loggedinUserID||s.state.admin?((0,a.uX)(),(0,a.CE)("div",{key:1,class:"deleteSingleButton",onClick:e[14]||(e[14]=(0,i.D$)((t=>s.state.deleteSingle(s.link)),["prevent","stop"])),title:"delete this asset only"})):(0,a.Q3)("",!0)],32),(0,a.bF)(d,{state:s.state,link:s.link,omitAssetData:!1,onMouseover:e[18]||(e[18]=t=>l.pauseMag=!0),onMouseout:e[19]||(e[19]=t=>l.pauseMag=!1),onMousemove:e[20]||(e[20]=t=>r.bumpNavButtonOpacity())},null,8,["state","link"]),s.state.multipleLinks()?((0,a.uX)(),(0,a.CE)("div",{key:0,class:"leftButton",ref:"leftButton",onMouseover:e[21]||(e[21]=t=>{l.pauseMag=!0,r.bumpNavButtonOpacity(!0)}),onMouseout:e[22]||(e[22]=t=>l.pauseMag=!1),onClick:e[23]||(e[23]=t=>s.state.prev()),onMousemove:e[24]||(e[24]=t=>r.bumpNavButtonOpacity()),title:"view previous asset [left arrow]"},null,544)):(0,a.Q3)("",!0),s.state.multipleLinks()?((0,a.uX)(),(0,a.CE)("div",{key:1,class:"rightButton",ref:"rightButton",onMouseover:e[25]||(e[25]=t=>{l.pauseMag=!0,r.bumpNavButtonOpacity(!0)}),onMouseout:e[26]||(e[26]=t=>l.pauseMag=!1),onClick:e[27]||(e[27]=t=>s.state.next()),onMousemove:e[28]||(e[28]=t=>r.bumpNavButtonOpacity()),title:"view next asset [right arrow]"},null,544)):(0,a.Q3)("",!0)],2)],64)}const Ji={class:"magnify"},Ki=["innerHTML"],Zi={key:0,class:"magnifyingGlass",ref:"magnifyingGlass"};function Gi(t,e,s,n,o,l){return(0,a.uX)(),(0,a.CE)("div",Ji,[(0,a.Lk)("div",{class:"magLevel",innerHTML:s.state.magLevel,title:"current magnification"},null,8,Ki),e[3]||(e[3]=(0,a.Lk)("br",null,null,-1)),(0,a.Lk)("div",{onClick:e[0]||(e[0]=(0,i.D$)((t=>l.magnify()),["stop","prevent"])),class:"magup specialToolButton",title:"increase magnification [+]"}),e[4]||(e[4]=(0,a.Lk)("br",null,null,-1)),(0,a.Lk)("div",{onClick:e[1]||(e[1]=(0,i.D$)((t=>l.unmagnify()),["stop","prevent"])),class:"magdown specialToolButton",title:"decrease magnification [-]"}),e[5]||(e[5]=(0,a.Lk)("br",null,null,-1)),(0,a.Lk)("div",{onClick:e[2]||(e[2]=(0,i.D$)((t=>l.cancelMagnify()),["stop","prevent"])),class:"nomag specialToolButton",title:"cancel magnification [0]"}),s.state.magLevel?((0,a.uX)(),(0,a.CE)("div",Zi,null,512)):(0,a.Q3)("",!0)])}var Yi={name:"Magnify",props:["state","element","pause"],components:{},data(){return{contents:null}},methods:{cancelMagnify(){do{this.unmagnify()}while(this.state.magLevel)},magnify(){this.state.magLevel=Math.min(this.state.maxMagLevel,this.state.magLevel+1)},unmagnify(){this.state.magLevel=Math.max(0,this.state.magLevel-1)},reset(){"undefined"!==typeof this.$refs?.magnifyingGlass&&(this.$refs.magnifyingGlass.contains(this.contents)&&(this.$refs.magnifyingGlass.removeChild(this.contents),this.contents=this.element.cloneNode(!0),this.contents.style.width=this.element.clientWidth+"px",this.contents.className="contents",this.contents.style.transform=`scale(${this.state.magLevel+1})`),this.$nextTick((()=>{if(this.$refs.magnifyingGlass.appendChild(this.contents),"video"==this.state.previewLink.filetype.split("/")[0]){console.log("video link detected");let t=document.querySelectorAll(".previewAsset");t.length>1&&(console.log("playing asset"),t=t[0],t.muted=!0,t.loop=!0,t.play())}this.refresh()})))},refresh(){null==this.$refs?.magnifyingGlass||this.$refs.magnifyingGlass.contains(this.contents)?"undefined"!=typeof this.$refs.magnifyingGlass&&null!==this.$refs.magnifyingGlass&&(this.$refs.magnifyingGlass.style.display=this.pause?"none":"block",this.state.magLevel&&(this.$refs.magnifyingGlass.style.left=this.state.mx-400+"px",this.$refs.magnifyingGlass.style.top=this.state.my-400+"px",this.contents.style.marginLeft=(-document.body.clientWidth/2-this.state.mx+document.body.clientWidth/2-100)*(this.state.magLevel+1)+440+800*(this.state.magLevel+1-1)+"px",this.contents.style.marginTop=(this.element.clientHeight/2+(-this.state.my-this.element.clientHeight/2))*(this.state.magLevel+1)+400+"px")):this.$nextTick((()=>this.reset()))}},mounted(){this.contents=this.element.cloneNode(!0),this.contents.style.width=this.element.clientWidth+"px",this.contents.className="contents",this.contents.style.transform=`scale(${this.state.magLevel+1})`,window.addEventListener("mousemove",(t=>{this.state.mx=t.pageX,this.state.my=t.pageY,this.state.magLevel&&this.refresh()})),this.state.magLevel&&this.$nextTick((()=>{this.refresh()}))},beforeUnmount(){window.removeEventListener("mousemove",(t=>{this.state.mx=t.pageX,this.state.my=t.pageY,this.state.magLevel&&this.refresh()}))},watch:{"state.keys[48]"(t){t&&this.cancelMagnify()},"state.keys[96]"(t){t&&this.cancelMagnify()},"state.magLevel"(t){t&&(this.contents.style.transform=`scale(${this.state.magLevel+1})`,this.refresh(),this.$nextTick((()=>{this.refresh()})))}}};const qi=(0,vt.A)(Yi,[["render",Gi],["__scopeId","data-v-5e14f06f"]]);var ta=qi,ea={name:"Preview",components:{AssetData:ae,Magnify:ta},props:["state","link"],data(){return{asset:null,linkType:"",mounted:!1,pauseMag:!1}},computed:{previewContainer(){return this.$refs.previewContainer}},methods:{togglePinned(){this.state.pinned=!this.state.pinned,this.$nextTick((()=>{this.bumpNavButtonOpacity()}))},bumpNavButtonOpacity(t=!1){(t||this.state.pinned||!this.state.magLevel)&&(this.$refs.inputs.classList.remove("fade"),this.$refs.inputs.style.height=this.$refs.inputs.clientHeight+"px",this.$refs.inputs.classList.add("fade"),this.state.blockFade||this.state.pinned?this.$refs.inputs.classList.add("fullOpacity"):this.$refs.inputs.classList.remove("fullOpacity"))},close(){this.state.closePrompts()}},watch:{"state.bumpADOpacity"(t){t&&(this.bumpNavButtonOpacity(),this.state.bumpADOpacity=0)}},mounted(){if(this.linkType=this.link.filetype.split("/")[0],"image"==this.linkType||"audio"==this.linkType){this.asset=document.createElement("div"),this.asset.className="previewAsset",this.asset.style.top="50%",this.asset.style.left="50%",this.asset.style.width="100%",this.asset.style.height="100%",this.asset.style.position="absolute",this.asset.style.transform="translate(-50%, -50%)",this.asset.style.objectFit="contain",this.asset.style.backgroundColor="#000",this.asset.style.backgroundSize="contain",this.asset.style.backgroundRepeat="no-repeat",this.asset.style.backgroundPosition="center center";let t=new Image;this.state.showLoading=!0,t.onload=()=>{this.state.showLoading=!1};let e="audio"==this.linkType?"musicNotes.svg":this.state.URLbase+"/"+this.link.href;t.src=e,this.asset.style.backgroundImage=`url(${e})`,this.$refs.slideshow.appendChild(this.asset)}"audio"==this.linkType&&(this.asset=document.createElement("audio"),this.asset.className="previewAsset",this.asset.controls=!0,this.asset.style.position="absolute",this.asset.style.left="50%",this.asset.style.top="50%",this.asset.loop=!0,this.asset.style.transform="translate(-50%, -50%)",this.asset.oncanplay=()=>{this.asset.play(),this.state.showLoading=!1},this.$refs.slideshow.appendChild(this.asset),this.asset.src=this.state.URLbase+"/"+this.link.href),"video"==this.linkType&&(this.asset=document.createElement("video"),this.asset.className="previewAsset",this.asset.controls=!0,this.asset.style.position="absolute",this.asset.style.left="50%",this.asset.style.top="50%",this.asset.style.width="100%",this.asset.style.height="100%",this.asset.style.objectFit="contain",this.asset.style.background="#000",this.asset.loop=!0,this.asset.muted=!this.state.userInteraction,this.asset.style.transform="translate(-50%, -50%)",this.asset.oncanplay=()=>{this.asset.play(),this.state.showLoading=!1},this.$refs.slideshow.appendChild(this.asset),this.asset.src=this.state.URLbase+"/"+this.link.href),this.mounted=!0},beforeUnmount(){"boolean"==typeof this.asset?.paused&&(this.asset.paused=!0),"undefined"!=typeof this.asset?.src&&(this.asset.src="")}};const sa=(0,vt.A)(ea,[["render",_i],["__scopeId","data-v-f343f40e"]]);var ia=sa;const aa={class:"toolbar"},na={key:0,class:"menu",ref:"menu"},oa={class:"parent",style:{"z-index":"1900",width:"145px"}},la=["disabled"],ra=["disabled"],ha={class:"sub",style:{"z-index":"1700",width:"375px",height:"42px"}},da={class:"sub",style:{"z-index":"1700",width:"375px",height:"42px"}},ca={class:"sub",style:{"z-index":"1700",width:"375px",height:"30px","min-height":"unset"}},ua={class:"sub",style:{"z-index":"1700",width:"375px",height:"69px"}},pa=["disabled"],ma=["disabled"],ga=["disabled"],ka={key:0,class:"sub",style:{"z-index":"1700",width:"375px",height:"44px"}},fa={key:1,class:"sub",style:{"z-index":"1700",width:"375px",height:"44px","line-height":"16px","padding-top":"4px","font-size":".8em"}},va=["onClick"],La=["onClick"],ba=["onClick"];function wa(t,e,s,n,l,r){const h=(0,a.g2)("User"),d=(0,a.g2)("PageSel"),c=(0,a.g2)("CommentSel"),u=(0,a.g2)("CollectionSelection");return(0,a.uX)(),(0,a.CE)("div",aa,[(0,a.bF)(h,{state:s.state},null,8,["state"]),(0,a.Lk)("button",{onClick:e[0]||(e[0]=t=>s.state.loadFiles()),class:"toolbarButtons"}," upload "),!l.memo.length&&s.state.loggedIn?((0,a.uX)(),(0,a.CE)("div",na,[(0,a.Lk)("div",oa,[e[32]||(e[32]=(0,a.eW)(" asset tools ")),(0,a.Lk)("div",{class:"sub",onClick:e[3]||(e[3]=t=>console.log(Math.PI)),STYLE:"width: 300px; height:47px;"},[(0,a.Lk)("button",{onClick:e[1]||(e[1]=t=>s.state.selectAll()),class:(0,o.C4)(["toolbarButtons",{buttons:!r.allSelected,disabledButton:r.allSelected}]),disabled:r.allSelected,title:"select all [ctrl + a]"}," select all ",10,la),(0,a.Lk)("button",{onClick:e[2]||(e[2]=t=>s.state.deSelectAll()),class:(0,o.C4)(["toolbarButtons",{buttons:r.someSelected,disabledButton:!r.someSelected}]),disabled:!r.someSelected,title:"de-select all [ctrl + shift + a]"}," deselect all ",10,ra)]),(0,a.Lk)("div",ha,[e[25]||(e[25]=(0,a.Lk)("span",{style:{float:"left","margin-left":"5px","font-size":".8em"}},"[w/selected→]",-1)),(0,a.Lk)("button",{onClick:e[4]||(e[4]=(0,i.D$)((t=>s.state.expandAll()),["prevent","stop"])),class:"expandInfoButton",style:{width:"100px",margin:"6px","font-size":"14px"}}," more info "),(0,a.Lk)("button",{onClick:e[5]||(e[5]=(0,i.D$)((t=>s.state.unExpandAll()),["prevent","stop"])),class:"expandInfoButton",style:{width:"100px",margin:"6px","font-size":"14px"}}," less info ")]),(0,a.Lk)("div",da,[e[26]||(e[26]=(0,a.Lk)("span",{style:{float:"left","margin-left":"5px","font-size":".8em"}},"[w/selected→]",-1)),(0,a.Lk)("button",{onClick:e[6]||(e[6]=(0,i.D$)((t=>s.state.downloadZip()),["prevent","stop"])),class:"expandInfoButton",style:{width:"unset",margin:"6px","font-size":"14px","padding-left":"5px","padding-right":"5px"}}," download as zip ")]),(0,a.Lk)("div",ca,[(0,a.Lk)("button",{onClick:e[7]||(e[7]=(0,i.D$)((t=>s.state.downloadFullZip()),["prevent","stop"])),class:"expandInfoButton",style:{width:"unset",margin:"6px","margin-top":"-1px","font-size":"14px","padding-left":"5px","padding-right":"5px"}}," download ENTIRE CATALOGUE as zip ")]),(0,a.Lk)("div",ua,[e[27]||(e[27]=(0,a.Lk)("span",{style:{"margin-left":"5px","font-size":".8em"}},"[w/selected→]",-1)),(0,a.Lk)("button",{class:(0,o.C4)(["toolbarButtons specialToolButton",{actionButton:r.someSelected,disabledButton:!r.someSelected,private:r.someSelected,privateDisabled:!r.someSelected}]),style:{"min-width":"50px","min-height":"50px"},disabled:!r.someSelected,onClick:e[8]||(e[8]=(0,i.D$)((t=>s.state.setLinkPropertySelected("private",1)),["prevent","stop"])),title:"set visibility to HIDDEN (from public galleries), for all selected"},null,10,pa),(0,a.Lk)("button",{class:(0,o.C4)(["toolbarButtons specialToolButton",{actionButton:r.someSelected,disabledButton:!r.someSelected,notPrivate:r.someSelected,notPrivateDisabled:!r.someSelected}]),style:{"min-width":"50px","min-height":"50px"},disabled:!r.someSelected,onClick:e[9]||(e[9]=(0,i.D$)((t=>s.state.setLinkPropertySelected("private",0)),["prevent","stop"])),title:"set visibility to VISIBLE (from public galleries), for all selected"},null,10,ma),(0,a.Lk)("button",{onClick:e[10]||(e[10]=t=>s.state.deleteSelected()),class:(0,o.C4)(["toolbarButtons",{deleteButton:r.someSelected,disabledButton:!r.someSelected}]),disabled:!r.someSelected,title:"delete selected [del]"}," delete ",10,ga)]),(0,a.Lk)("div",{class:"sub",onClick:e[11]||(e[11]=(0,i.D$)((()=>{}),["stop","prevent"])),style:{width:"175px"}},[s.state.loggedIn?((0,a.uX)(),(0,a.Wv)(d,{key:0,state:s.state},null,8,["state"])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",{class:"sub",onClick:e[12]||(e[12]=(0,i.D$)((()=>{}),["stop","prevent"])),style:{width:"238px"}},[(0,a.bF)(c,{state:s.state},null,8,["state"])]),r.someSelected?((0,a.uX)(),(0,a.CE)("div",ka,[e[28]||(e[28]=(0,a.Lk)("span",{style:{"margin-left":"5px","font-size":".8em"}},"[w/selected→]",-1)),(0,a.bF)(u,{state:s.state,links:r.filteredLinksForCollectionSelection,mode:"multi",someSelected:r.someSelected},null,8,["state","links","someSelected"])])):((0,a.uX)(),(0,a.CE)("div",fa,e[29]||(e[29]=[(0,a.eW)(" select multiple items, then check here"),(0,a.Lk)("br",null,null,-1),(0,a.eW)("for bulk assign-to-collection buttons ")]))),(0,a.Lk)("div",{title:"view my stats, including views etc",class:"sub",onClick:e[13]||(e[13]=t=>s.state.getUserStats(s.state.loggedinUserID))}," my stats "),(0,a.Lk)("div",{class:"sub",style:{"z-index":"100","min-width":"180px"},onClick:e[14]||(e[14]=t=>s.state.showCollections=!0)},[e[30]||(e[30]=(0,a.eW)(" my collections ")),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.state.collections,(t=>((0,a.uX)(),(0,a.CE)("div",{class:"sub2",onClick:(0,i.D$)((e=>r.viewCollection(t)),["stop","prevent"])},[(0,a.Lk)("button",{class:"toolbarButtons assetDataButton",style:{color:"#fff","min-width":"unset",height:"24px",background:"#84fd",margin:"unset","margin-right":"5px"},onClick:(0,i.D$)((e=>r.viewCollection(t)),["stop","prevent"]),title:"view this collection"},"👁",8,La),(0,a.Lk)("button",{class:"toolbarButtons assetDataButton",style:{height:"24px",margin:"unset","margin-right":"5px","min-width":"unset"},onClick:(0,i.D$)((e=>s.state.showEditCollection(t)),["stop","prevent"]),title:"edit this collection"},"✎",8,ba),(0,a.Lk)("span",null,(0,o.v_)(s.state.shortText(t.name,16)),1)],8,va)))),256))]),(0,a.Lk)("div",{class:"sub",onClick:e[19]||(e[19]=()=>{})},[e[31]||(e[31]=(0,a.eW)(" submenus [unused] ")),(0,a.Lk)("div",{class:"sub2",onClick:e[15]||(e[15]=t=>l.window.open("https://gifs.twilightparadox.com/df0898b287292aab8cf29efb75cb1783.gif","_blank"))},"easter egg 1!"),(0,a.Lk)("div",{class:"sub2",onClick:e[16]||(e[16]=t=>l.window.open("https://whr.rf.gd/a/full/2whT","_blank"))},"easter egg 2!"),(0,a.Lk)("div",{class:"sub2",onClick:e[17]||(e[17]=t=>l.window.open("https://emphasis.bizuit.com/?c=the%20super%20secret","_blank"))},"easter egg 3!"),(0,a.Lk)("div",{class:"sub2",onClick:e[18]||(e[18]=t=>l.window.open("https://srmcgann.github.io/spaceflex","_blank"))},"easter egg 4!")])])],512)):(0,a.Q3)("",!0),(0,a.bo)((0,a.Lk)("input",{type:"text",autofocus:"",ref:"uploadURL",class:"URLinput",onKeydown:e[20]||(e[20]=(0,i.D$)((t=>r.keydown(t)),["stop"])),onKeypress:e[21]||(e[21]=(0,i.jR)((t=>r.uploadByURL()),["enter"])),"onUpdate:modelValue":e[22]||(e[22]=t=>s.state.uploadFromURL=t),placeholder:"or, upload from a URL... it might work!"},null,544),[[i.Jo,s.state.uploadFromURL]]),(0,a.Lk)("button",{onClick:e[23]||(e[23]=t=>r.uploadByURL()),class:"goButton",title:"download asset by URL [enter]"},"go"),s.state.loggedIn?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:e[24]||(e[24]=t=>r.loadFeatured()),style:{margin:"5px",position:"absolute","margin-top":"7px"}}," trending ")):(0,a.Q3)("",!0)])}const ya=["value"];function Ca(t,e,s,i,n,o){return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("select",{ref:"pageSel",onChange:e[0]||(e[0]=t=>o.updatePgSel()),value:s.state.maxResultsPerPage,title:"select how many items per page you like. warning: too many items may degrade performance!",class:"pageSelection"},e[1]||(e[1]=[(0,a.Fv)('<option value="1" style="background:#04f4;" data-v-2f918b2a>1</option><option value="2" style="background:#08c4;" data-v-2f918b2a>2</option><option value="3" style="background:#0f84;" data-v-2f918b2a>3</option><option value="4" style="background:#0f44;" data-v-2f918b2a>4</option><option value="5" style="background:#0f24;" data-v-2f918b2a>5</option><option value="6" style="background:#4f04;" data-v-2f918b2a>6</option><option value="8" style="background:#ff04;" data-v-2f918b2a>8</option><option value="10" style="background:#f884;" data-v-2f918b2a>10</option><option value="15" style="background:#f604;" data-v-2f918b2a>15</option><option value="30" style="background:#f404;" data-v-2f918b2a>30</option><option value="50" style="background:#f004;" data-v-2f918b2a>50</option>',11)]),40,ya),e[2]||(e[2]=(0,a.eW)(" items/pg "))],64)}var Da={name:"PageSelection",props:["state"],components:{},data(){return{}},computed:{},methods:{updatePgSel(){this.state.setUserPref("pageSel",this.$refs.pageSel.value)}},mounted(){this.$refs.pageSel.value=this.state.maxResultsPerPage},watch:{}};const Ta=(0,vt.A)(Da,[["render",Ca],["__scopeId","data-v-2f918b2a"]]);var xa=Ta;const Pa=["value"];function Ia(t,e,s,i,n,o){return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("select",{ref:"commentSel",onChange:e[0]||(e[0]=t=>o.updateComSel()),value:s.state.numComments,title:"select how many comments you like to see by default, per asset, before clicking 'less' or 'more'",class:"commentSelection"},e[1]||(e[1]=[(0,a.Fv)('<option value="0" style="background:#01f4;" data-v-22dd36f5>0</option><option value="1" style="background:#04f4;" data-v-22dd36f5>1</option><option value="2" style="background:#08c4;" data-v-22dd36f5>2</option><option value="3" style="background:#0f84;" data-v-22dd36f5>3</option><option value="4" style="background:#0f44;" data-v-22dd36f5>4</option><option value="5" style="background:#0f24;" data-v-22dd36f5>5</option><option value="6" style="background:#4f04;" data-v-22dd36f5>6</option><option value="8" style="background:#ff04;" data-v-22dd36f5>8</option><option value="10" style="background:#f884;" data-v-22dd36f5>10</option><option value="15" style="background:#f604;" data-v-22dd36f5>15</option><option value="30" style="background:#f404;" data-v-22dd36f5>30</option><option value="50" style="background:#f004;" data-v-22dd36f5>50</option>',12)]),40,Pa),e[2]||(e[2]=(0,a.eW)(" comments/asset "))],64)}var Ma={name:"CommentSelection",props:["state"],components:{},data(){return{}},computed:{},methods:{updateComSel(){this.state.setUserPref("commentSel",this.$refs.commentSel.value)}},mounted(){this.$refs.commentSel.value=this.state.numComments},watch:{}};const Ua=(0,vt.A)(Ma,[["render",Ia],["__scopeId","data-v-22dd36f5"]]);var Sa=Ua,$a={name:"Toolbar",props:["state"],components:{User:Di,PageSel:xa,CommentSel:Sa,CollectionSelection:bt},data(){return{memo:[],window:window}},computed:{filteredLinksForCollectionSelection(){let t=[],e=0;return this.state.links.map((s=>{s.selected&&(t=[...t,s],e++)})),this.state.userLinks.map((s=>{s.selected&&(t=[...t,s],e++)})),this.state.linksSelectedTally=e,t},someSelected(){return this.state.links.filter((t=>t.selected)).length||this.state.userLinks.filter((t=>t.selected)).length},allSelected(){return this.state.links.filter((t=>t.selected)).length+this.state.userLinks.filter((t=>t.selected)).length==this.state.links.length+this.state.userLinks.length}},methods:{loadFeatured(){this.state.loadFeaturedItems()},viewCollection(t){this.state.previewPosition=0,this.state.viewCollection(t,0)},keydown(t){(46==t.keyCode||17==t.keyCode||this.state.keys[17]||18==t.keyCode||this.state.keys[18])&&this.state.onkeydown(t)},uploadByURL(){let t=this.state.uploadFromURL;if(!t)return void this.$refs.uploadURL.focus();let e=this.state.uploadFromURL.split("/");e=decodeURIComponent(e[e.length-1].split("?")[0]),this.state.modalContent=`<br><br><br><br><br><br>importing asset<br><br><div style="color: #f80">${e}<br><br></div>`,this.state.showLoading=!0,this.state.showModal=!0;let s={loggedIn:this.state.loggedIn,userID:this.state.loggedinUserID,passhash:this.state.passhash,description:""};if(t){let e={userName:this.state.loggedinUserName,passhash:this.state.passhash,URL:t,batchMetaData:s};fetch(`${this.state.URLbase}/uploadFromURL.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((t=>t.json())).then((t=>{t[0]?(t[0]&&(this.state.uploadFromURL="",t[1].map(((e,s)=>{this.state.addLink(t[2][s],t[3][s],s,e,!1,this.state.loggedinUserID,t[6][s],t[7][s],t[8][s],t[9],t[10][s],t[11][s],t[12][s],t[13][s],t[14][s],t[15][s]),this.state.previewLink=this.state.links[this.state.links.length-1],this.state.showPreview=!0}))),this.state.modalContent="",this.state.closeModal(),this.state.loggedIn?(this.state.links=[],this.state.fetchUserLinks(this.state.loggedinUserID),this.state.jumpToPage(0),this.state.uploadEventTally++):t[0]?(this.state.modalContent='<div style="box-sizing: border-box;min-width:90vw; min-height: 50vh; position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%);background: #0846; color: #8f8; padding: 100px; text-align: left;word-break: auto-phrase;">excellent choice, uploading here...<br><br>you have not logged in though, which means your links will be lost soon.<br><br>If you register, nothing is needed except a name of your choosing and a password you will remember, then these uploads will be auto-saved to your new profile...<br><br>just don\'t close the page or refresh before you login or register!<br><br><br>thanks for using this service!</div>',this.state.showModal=!0,this.state.showRegister=!1,this.state.showLoginPrompt=!0,this.state.uploadEventTally++):this.state.modalContent='<div style="min-width:90vw; min-height: 50vh; position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%);background: #8002; color: #f88; padding-top: 100px;">'+t[5]+"</div>"):(this.state.modalContent=`<div style="box-sizing: border-box;min-width:90vw; min-height: 50vh; position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%);background: #6006; color: #f00; padding: 100px; text-align: left;">failed to import asset:<br><br>error: &rarr;${t[5]}</div>`,this.state.showModal=!0),this.$refs.uploadURL=""}))}}},mounted(){}};const Aa=(0,vt.A)($a,[["render",wa],["__scopeId","data-v-e58ad82a"]]);var Ra=Aa;const Ea={class:"loading"},Na=["src"];function Oa(t,e,s,i,n,o){return(0,a.uX)(),(0,a.CE)("div",Ea,[(0,a.Lk)("video",{class:"loadingVid",autoplay:"",muted:"",loop:"",src:`${s.state.URLbase}/loading.mp4`},null,8,Na)])}var Ha={name:"Loading",props:["state"],data(){return{}},methods:{},mounted(){}};const Ba=(0,vt.A)(Ha,[["render",Oa],["__scopeId","data-v-58cbc9cc"]]);var Xa=Ba;const za={class:"collections",ref:"collections",tabindex:"1000"},ja={class:"collectionsInner"},Fa={key:1,class:"collectionsTable"},Wa=["innerHTML"],Qa=["innerHTML"],Va=["innerHTML"],_a=["innerHTML"],Ja=["innerHTML"],Ka=["innerHTML"],Za=["innerHTML"],Ga=["innerHTML"],Ya=["innerHTML"],qa=["innerHTML"],tn=["innerHTML"],en=["innerHTML"],sn=["innerHTML"],an=["onClick"],nn=["onClick"],on={class:"linkButtons"},ln=["onClick","title"],rn=["onClick"],hn=["href","onClick"],dn=["onClick"];function cn(t,e,s,n,l,r){const h=(0,a.g2)("font"),d=(0,a.g2)("CollectionTemplate");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("button",{onClick:e[0]||(e[0]=t=>r.close()),class:"cancelButton",title:"close this view [ESC]"}," close/cancel "),(0,a.Lk)("div",za,[(0,a.Lk)("div",ja,[e[12]||(e[12]=(0,a.eW)(" <<< COLLECTIONS >>>")),e[13]||(e[13]=(0,a.Lk)("br",null,null,-1)),s.state.collections.length?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:e[1]||(e[1]=t=>s.state.showCollectionTemplate=!0),title:"create new collection",class:"addButton"}," + ")):(0,a.Q3)("",!0),s.state.collections.length?((0,a.uX)(),(0,a.CE)("table",Fa,[(0,a.Lk)("tr",null,[(0,a.Lk)("th",null,[(0,a.Lk)("button",{class:(0,o.C4)({sortCol:"name"==l.sortMode}),onClick:e[2]||(e[2]=t=>r.setSortMode("name")),innerHTML:"name<br>"+(l.sortDir?"⇧":"⇩")},null,10,Wa)]),(0,a.Lk)("th",null,[(0,a.Lk)("button",{class:(0,o.C4)({sortCol:"slug"==l.sortMode}),onClick:e[3]||(e[3]=t=>r.setSortMode("slug")),innerHTML:"slug<br>"+(l.sortDir?"⇧":"⇩")},null,10,Qa)]),(0,a.Lk)("th",null,[(0,a.Lk)("button",{class:(0,o.C4)({sortCol:"views"==l.sortMode}),onClick:e[4]||(e[4]=t=>r.setSortMode("views")),innerHTML:"views<br>"+(l.sortDir?"⇧":"⇩")},null,10,Va)]),(0,a.Lk)("th",null,[(0,a.Lk)("button",{class:(0,o.C4)({sortCol:"description"==l.sortMode}),onClick:e[5]||(e[5]=t=>r.setSortMode("description")),innerHTML:"description<br>"+(l.sortDir?"⇧":"⇩")},null,10,_a)]),(0,a.Lk)("th",null,[(0,a.Lk)("button",{class:(0,o.C4)({sortCol:"age"==l.sortMode}),onClick:e[6]||(e[6]=t=>r.setSortMode("age")),innerHTML:"age<br>"+(l.sortDir?"⇧":"⇩")},null,10,Ja)]),(0,a.Lk)("th",null,[(0,a.Lk)("button",{class:(0,o.C4)({sortCol:"created"==l.sortMode}),onClick:e[7]||(e[7]=t=>r.setSortMode("created")),innerHTML:"created<br>"+(l.sortDir?"⇧":"⇩")},null,10,Ka)]),(0,a.Lk)("th",null,[(0,a.Lk)("button",{class:(0,o.C4)({sortCol:"items"==l.sortMode}),onClick:e[8]||(e[8]=t=>r.setSortMode("items")),innerHTML:"items<br>"+(l.sortDir?"⇧":"⇩")},null,10,Za)]),e[9]||(e[9]=(0,a.Lk)("th",null,[(0,a.eW)("collection"),(0,a.Lk)("br"),(0,a.eW)("tools")],-1))]),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.sortedArray,(t=>((0,a.uX)(),(0,a.CE)("tr",null,[(0,a.Lk)("td",{innerHTML:s.state.collections[t].name},null,8,Ga),(0,a.Lk)("td",{innerHTML:s.state.collections[t].slug},null,8,Ya),(0,a.Lk)("td",{innerHTML:s.state.collections[t].meta.views},null,8,qa),(0,a.Lk)("td",{innerHTML:s.state.linkify(s.state.collections[t].meta.description)},null,8,tn),(0,a.Lk)("td",{innerHTML:s.state.age(s.state.collections[t].meta)},null,8,en),(0,a.Lk)("td",{innerHTML:s.state.prettyDate(s.state.collections[t].meta)},null,8,sn),(0,a.Lk)("td",null,[(0,a.bF)(h,{style:{"font-size":"1em"}},{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(s.state.collections[t].meta.slugs.length)+" items",1)])),_:2},1024),e[10]||(e[10]=(0,a.Lk)("br",null,null,-1)),(0,a.Lk)("button",{onClick:e=>r.view(s.state.collections[t]),class:"viewCollectionButton",title:"view this collection"},"view",8,an),e[11]||(e[11]=(0,a.Lk)("br",null,null,-1)),(0,a.Lk)("button",{onClick:e=>s.state.showEditCollection(s.state.collections[t]),class:"editCollectionButton",title:"edit this collection"},"edit",8,nn)]),(0,a.Lk)("td",null,[(0,a.Lk)("div",on,[(0,a.Lk)("div",{class:(0,o.C4)(["specialToolButton",{private:s.state.collections[t].meta.private,notPrivate:!s.state.collections[t].meta.private}]),onClick:(0,i.D$)((e=>s.state.setCollectionProperty(s.state.collections[t],"private",s.state.collections[t].meta.private?0:1)),["prevent","stop"]),title:`toggle visibility. (currently: ${s.state.collections[t].meta.private?"NOT":""} featured in public galleries)`},null,10,ln),(0,a.Lk)("div",{class:"copyLinkButton",onClick:(0,i.D$)((e=>s.state.copyLink("col/"+s.state.collections[t].slug+"/view")),["prevent","stop"]),title:"copy link to clipboard"},null,8,rn),(0,a.Lk)("a",{href:s.state.URLbase+"/col/"+s.state.collections[t].slug+"/view",class:"openButton",onClick:(0,i.D$)((e=>s.state.openCollection(s.state.collections[t])),["prevent","stop"]),title:"open link in new tab"},null,8,hn),(0,a.Lk)("div",{class:"deleteSingleButton",onClick:(0,i.D$)((e=>s.state.deleteCollection(s.state.collections[t])),["prevent","stop"]),title:"delete this collection"},null,8,dn)])])])))),256))])):((0,a.uX)(),(0,a.Wv)(d,{key:2,state:s.state},null,8,["state"]))])],512)],64)}const un={class:"collectionTemplate",ref:"collectionTempate",tabindex:"2000"},pn={class:"collectionTemplateInner"},mn={class:"newCollectionForm"},gn=["title"];function kn(t,e,s,n,l,r){return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("button",{onClick:e[0]||(e[0]=t=>r.close()),class:"cancelButton",title:"close this view [ESC]"}," close/cancel "),(0,a.Lk)("div",un,[(0,a.Lk)("div",pn,[e[13]||(e[13]=(0,a.Lk)("br",null,null,-1)),e[14]||(e[14]=(0,a.Lk)("br",null,null,-1)),e[15]||(e[15]=(0,a.eW)(" CREATE A NEW COLLECTION ")),e[16]||(e[16]=(0,a.Lk)("br",null,null,-1)),e[17]||(e[17]=(0,a.Lk)("br",null,null,-1)),e[18]||(e[18]=(0,a.eW)(" enter details below, click create,")),e[19]||(e[19]=(0,a.Lk)("br",null,null,-1)),e[20]||(e[20]=(0,a.eW)(" then browse your assets and add items")),e[21]||(e[21]=(0,a.Lk)("br",null,null,-1)),e[22]||(e[22]=(0,a.eW)(" you may also edit this stuff later")),e[23]||(e[23]=(0,a.Lk)("br",null,null,-1)),(0,a.Lk)("div",mn,[(0,a.bo)((0,a.Lk)("input",{class:"collectionFormInput",ref:"name","onUpdate:modelValue":e[1]||(e[1]=t=>l.name=t),placeholder:"collection name",onKeydown:e[2]||(e[2]=(0,i.jR)((0,i.D$)((t=>r.submit()),["stop","prevent"]),["enter"]))},null,544),[[i.Jo,l.name]]),e[7]||(e[7]=(0,a.Lk)("br",null,null,-1)),(0,a.bo)((0,a.Lk)("input",{class:"collectionFormInput","onUpdate:modelValue":e[3]||(e[3]=t=>l.description=t),placeholder:"description/hashtags",onKeydown:e[4]||(e[4]=(0,i.jR)((0,i.D$)((t=>r.submit()),["stop","prevent"]),["enter"]))},null,544),[[i.Jo,l.description]]),e[8]||(e[8]=(0,a.Lk)("br",null,null,-1)),e[9]||(e[9]=(0,a.Lk)("br",null,null,-1)),e[10]||(e[10]=(0,a.eW)(" set visibility")),e[11]||(e[11]=(0,a.Lk)("br",null,null,-1)),(0,a.Lk)("div",{class:(0,o.C4)(["specialToolButton",{private:l.private,notPrivate:!l.private}]),onClick:e[5]||(e[5]=(0,i.D$)((t=>r.setProperty("private",l.private?0:1)),["prevent","stop"])),title:`toggle visibility. (currently: ${l.private?"NOT":""} featured in public galleries)`},null,10,gn),e[12]||(e[12]=(0,a.Lk)("br",null,null,-1)),(0,a.Lk)("button",{onClick:e[6]||(e[6]=t=>r.submit())},"create")])])],512)],64)}var fn={name:"CollectionTemplate",props:["state"],data(){return{name:"",description:"",slugs:[],private:0}},methods:{setProperty(t,e){this[t]=e},submit(){if(!this.name)return;let t={name:this.name,description:this.description,slugs:this.slugs,private:this.private};this.state.createCollection(t),this.state.showCollectionTemplate=!1},close(){this.state.showCollectionTemplate=!1}},mounted(){this.$nextTick((()=>{this.$refs.name.focus()}))}};const vn=(0,vt.A)(fn,[["render",kn],["__scopeId","data-v-e5ae59ee"]]);var Ln=vn,bn={name:"Collections",props:["state"],components:{CollectionTemplate:Ln},data(){return{sortDir:!1,sortMode:"age",array:JSON.parse(JSON.stringify(this.state.collections,!0))}},methods:{close(){this.state.closePrompts()},setSortMode(t){switch(t){case"name":"name"==this.sortMode?this.sortDir=!this.sortDir:this.sortMode="name";break;case"slug":"slug"==this.sortMode?this.sortDir=!this.sortDir:this.sortMode="slug";break;case"views":"views"==this.sortMode?this.sortDir=!this.sortDir:this.sortMode="views";break;case"description":"description"==this.sortMode?this.sortDir=!this.sortDir:this.sortMode="description";break;case"age":"age"==this.sortMode?this.sortDir=!this.sortDir:this.sortMode="age";break;case"created":"created"==this.sortMode?this.sortDir=!this.sortDir:this.sortMode="created";break;case"items":"items"==this.sortMode?this.sortDir=!this.sortDir:this.sortMode="items";break}},view(t){this.close(),this.$nextTick((()=>{this.state.previewPosition=0,this.state.viewCollection(t,0)}))}},computed:{sortedByItems(){if(this.array){let t=Array(this.state.collections.length).fill().map(((t,e)=>({idx:e,items:this.state.collections[e].meta.slugs.length})));return t.sort(((t,e)=>(this.sortDir?e:t).items-(this.sortDir?t:e).items)),t.map((t=>t.idx))}return[]},sortedByViews(){if(this.array){let t=Array(this.state.collections.length).fill().map(((t,e)=>({idx:e,views:this.state.collections[e].meta.views})));return t.sort(((t,e)=>(this.sortDir?e:t).views-(this.sortDir?t:e).views)),t.map((t=>t.idx))}return[]},sortedByAge(){if(console.log("computed: sortedByAge"),this.array){let t=Array(this.state.collections.length).fill().map(((t,e)=>({idx:e,age:new Date(this.state.collections[e].meta.date).getTime()})));return t.sort(((t,e)=>(this.sortDir?e:t).age-(this.sortDir?t:e).age)),t.map((t=>t.idx))}return[]},sortedByCreated(){if(this.array){let t=Array(this.state.collections.length).fill().map(((t,e)=>({idx:e,created:new Date(this.state.collections[e].meta.date).getTime()})));return t.sort(((t,e)=>(this.sortDir?e:t).created-(this.sortDir?t:e).created)),t.map((t=>t.idx))}return[]},sortedByName(){if(this.array){let t=Array(this.state.collections.length).fill().map(((t,e)=>({idx:e,name:this.state.collections[e].name})));return t.sort(((t,e)=>(this.sortDir?e:t).name==(this.sortDir?t:e).name?0:(this.sortDir?e:t).name<(this.sortDir?t:e).name?-1:(this.sortDir?e:t).name>(this.sortDir?t:e).name?1:void 0)),t.map((t=>t.idx))}return[]},sortedBySlug(){if(this.array){let t=Array(this.state.collections.length).fill().map(((t,e)=>({idx:e,slug:this.state.collections[e].slug})));return t.sort(((t,e)=>(this.sortDir?e:t).slug==(this.sortDir?t:e).slug?0:(this.sortDir?e:t).slug<(this.sortDir?t:e).slug?-1:(this.sortDir?e:t).slug>(this.sortDir?t:e).slug?1:void 0)),t.map((t=>t.idx))}return[]},sortedByDescription(){if(this.array){let t=Array(this.state.collections.length).fill().map(((t,e)=>({idx:e,description:this.state.collections[e].meta.description})));return t.sort(((t,e)=>(this.sortDir?e:t).description==(this.sortDir?t:e).description?0:(this.sortDir?e:t).description<(this.sortDir?t:e).description?-1:(this.sortDir?e:t).description>(this.sortDir?t:e).description?1:void 0)),t.map((t=>t.idx))}return[]},sortedArray(){switch(this.sortMode){case"name":return this.sortedByName;case"slug":return this.sortedBySlug;case"views":return this.sortedByViews;case"description":return this.sortedByDescription;case"age":return this.sortedByAge;case"created":return this.sortedByCreated;case"items":return this.sortedByItems}}},mounted(){this.array=JSON.parse(JSON.stringify(this.state.collections))}};const wn=(0,vt.A)(bn,[["render",cn],["__scopeId","data-v-1d9c11d8"]]);var yn=wn;const Cn={class:"LoginPrompt"},Dn={class:"mainLoginContainer"},Tn={key:0},xn={class:"inputContainer"},Pn={class:"inputContainer"},In={key:0,class:"invalidLogin"},Mn={key:1},Un={key:0,class:"mustRegister"},Sn={class:"inputContainer"},$n={class:"inputTitle"},An={key:0,style:{display:"inline-block",color:"#f00"}},Rn={key:1,style:{display:"inline-block",color:"#0f4"}},En={class:"inputContainer"},Nn={class:"inputTitle"},On={key:0,style:{display:"inline-block",color:"#f00"}},Hn={key:1,style:{display:"inline-block",color:"#0f4"}},Bn={class:"inputContainer"},Xn=["disabled"],zn={key:1,class:"invalidLogin"},jn={style:{position:"absolute","z-index":"-1",opacity:"0"},ref:"bottomTabAnchor",type:"text"};function Fn(t,e,s,n,l,r){return(0,a.uX)(),(0,a.CE)("div",Cn,[(0,a.Lk)("div",Dn,[s.state.showRegister?((0,a.uX)(),(0,a.CE)("div",Mn,[e[43]||(e[43]=(0,a.Lk)("div",{class:"spacerDiv",style:{"margin-top":"10px"}},null,-1)),(0,a.Lk)("button",{class:"toggleButton",onClick:e[11]||(e[11]=t=>r.toggleView())}," ↑   login   ↑ "),e[44]||(e[44]=(0,a.Lk)("br",null,null,-1)),s.state.displayLoginRequired?((0,a.uX)(),(0,a.CE)("div",Un,e[33]||(e[33]=[(0,a.eW)(" You must register or"),(0,a.Lk)("br",null,null,-1),(0,a.eW)(" log-in to create a demo!"),(0,a.Lk)("br",null,null,-1)]))):(0,a.Q3)("",!0),e[45]||(e[45]=(0,a.Lk)("span",{class:"title"},"register",-1)),e[46]||(e[46]=(0,a.Lk)("br",null,null,-1)),(0,a.Lk)("div",Sn,[(0,a.Lk)("div",$n,[e[36]||(e[36]=(0,a.eW)(" User Name ")),l.userNameAvailable?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",An,e[34]||(e[34]=[(0,a.eW)("     "),(0,a.Lk)("i",null,"user name unavailable",-1)]))),l.userNameAvailable&&s.state.regusername?((0,a.uX)(),(0,a.CE)("div",Rn,e[35]||(e[35]=[(0,a.eW)("     "),(0,a.Lk)("i",null,"user name available",-1)]))):(0,a.Q3)("",!0)]),(0,a.Lk)("input",{style:{position:"absolute","z-index":"-1",opacity:"0"},ref:"loginTabAnchor",type:"text",onKeydown:[e[12]||(e[12]=(0,i.jR)((t=>r.submit()),["enter"])),e[13]||(e[13]=(0,i.jR)((0,i.D$)((e=>t.$refs.bottomTabAnchor.focus()),["shift"]),["tab"]))]},null,544),(0,a.bo)((0,a.Lk)("input",{type:"text",ref:"regusername","onUpdate:modelValue":e[14]||(e[14]=t=>s.state.regusername=t),class:(0,o.C4)(["input",{userNameUnavailable:!l.userNameAvailable,userNameAvailable:l.userNameAvailable&&s.state.regusername}]),maxlength:"16",onInput:e[15]||(e[15]=t=>r.checkUserNameAvailability()),onKeydown:[e[16]||(e[16]=(0,i.jR)((t=>r.submit()),["enter"])),e[17]||(e[17]=(0,i.jR)((0,i.D$)((e=>t.$refs.bottomTabAnchor.focus()),["shift"]),["tab"]))]},null,34),[[i.Jo,s.state.regusername]]),e[37]||(e[37]=(0,a.Lk)("br",null,null,-1))]),(0,a.Lk)("div",En,[(0,a.Lk)("div",Nn,[e[39]||(e[39]=(0,a.eW)(" Password ")),!r.passwordsMatch&&s.state.regpassword&&s.state.confirmpassword?((0,a.uX)(),(0,a.CE)("div",On,"     passwords do not match ")):(0,a.Q3)("",!0),r.passwordsMatch&&s.state.regpassword&&s.state.confirmpassword?((0,a.uX)(),(0,a.CE)("div",Hn,e[38]||(e[38]=[(0,a.eW)("     "),(0,a.Lk)("i",null,"passwords match!",-1)]))):(0,a.Q3)("",!0)]),(0,a.bo)((0,a.Lk)("input",{type:"password",ref:"regpassword","onUpdate:modelValue":e[18]||(e[18]=t=>s.state.regpassword=t),class:(0,o.C4)(["input",{passwordsDoNotMatch:!r.passwordsMatch&&s.state.regpassword&&s.state.confirmpassword,passwordsMatch:r.passwordsMatch&&s.state.regpassword&&s.state.confirmpassword}]),onKeydown:e[19]||(e[19]=(0,i.jR)((t=>r.submit()),["enter"]))},null,34),[[i.Jo,s.state.regpassword]]),e[40]||(e[40]=(0,a.Lk)("br",null,null,-1))]),(0,a.Lk)("div",Bn,[e[41]||(e[41]=(0,a.Lk)("div",{class:"inputTitle"},"Confirm Password",-1)),(0,a.bo)((0,a.Lk)("input",{type:"password",ref:"confirmpassword","onUpdate:modelValue":e[20]||(e[20]=t=>s.state.confirmpassword=t),class:(0,o.C4)(["input",{passwordsDoNotMatch:!r.passwordsMatch&&s.state.regpassword&&s.state.confirmpassword,passwordsMatch:r.passwordsMatch&&s.state.regpassword&&s.state.confirmpassword}]),onKeydown:e[21]||(e[21]=(0,i.jR)((t=>r.submit()),["enter"]))},null,34),[[i.Jo,s.state.confirmpassword]]),e[42]||(e[42]=(0,a.Lk)("br",null,null,-1))]),(0,a.Lk)("button",{onClick:e[22]||(e[22]=t=>r.submit()),disabled:!r.validate,class:(0,o.C4)({disabledButton:!r.validate})},"submit",10,Xn),(0,a.Lk)("button",{onClick:e[23]||(e[23]=t=>r.closePrompt()),onKeydown:[e[24]||(e[24]=(0,i.jR)((e=>t.$refs.loginTabAnchor.focus()),["tab"])),e[25]||(e[25]=(0,i.jR)((0,i.D$)((e=>t.$refs.cancelButton.focus()),["shift"]),["tab"]))],ref:"cancelButton",style:{background:"#faa"}},"cancel",544),l.showInvalid?((0,a.uX)(),(0,a.CE)("div",zn," Whoa! check your info... ")):(0,a.Q3)("",!0),(0,a.Lk)("input",jn,null,512)])):((0,a.uX)(),(0,a.CE)("div",Tn,[e[30]||(e[30]=(0,a.Lk)("span",{class:"title"},"login",-1)),e[31]||(e[31]=(0,a.Lk)("br",null,null,-1)),(0,a.Lk)("div",xn,[e[26]||(e[26]=(0,a.Lk)("div",{class:"inputTitle"},"User Name",-1)),(0,a.Lk)("input",{style:{position:"absolute","z-index":"-1",opacity:"0"},ref:"loginTabAnchor",onKeydown:e[0]||(e[0]=(0,i.jR)((0,i.D$)((e=>t.$refs.bottomTabAnchor.focus()),["shift"]),["tab"])),type:"text"},null,544),(0,a.bo)((0,a.Lk)("input",{type:"text",ref:"username","onUpdate:modelValue":e[1]||(e[1]=t=>s.state.username=t),class:"input",onKeydown:[e[2]||(e[2]=(0,i.jR)((t=>s.state.login()),["enter"])),e[3]||(e[3]=(0,i.jR)((0,i.D$)((e=>t.$refs.bottomTabAnchor.focus()),["shift"]),["tab"]))]},null,544),[[i.Jo,s.state.username]]),e[27]||(e[27]=(0,a.Lk)("br",null,null,-1))]),(0,a.Lk)("div",Pn,[e[28]||(e[28]=(0,a.Lk)("div",{class:"inputTitle"},"Password",-1)),(0,a.bo)((0,a.Lk)("input",{type:"password",ref:"password","onUpdate:modelValue":e[4]||(e[4]=t=>s.state.password=t),class:"input",onKeydown:e[5]||(e[5]=(0,i.jR)((t=>s.state.login()),["enter"]))},null,544),[[i.Jo,s.state.password]]),e[29]||(e[29]=(0,a.Lk)("br",null,null,-1))]),(0,a.Lk)("button",{onClick:e[6]||(e[6]=t=>s.state.login()),ref:"go"},"Go",512),(0,a.Lk)("button",{onClick:e[7]||(e[7]=t=>r.closePrompt()),onKeydown:[e[8]||(e[8]=(0,i.jR)((e=>t.$refs.loginTabAnchor.focus()),["tab"])),e[9]||(e[9]=(0,i.jR)((0,i.D$)((e=>t.$refs.cancelButton.focus()),["shift"]),["tab"]))],style:{background:"#faa"},ref:"cancelButton"},"cancel",544),s.state.invalidLoginAttempt?((0,a.uX)(),(0,a.CE)("div",In," Invalid User Name or Password ")):(0,a.Q3)("",!0),e[32]||(e[32]=(0,a.Lk)("div",{class:"spacerDiv",style:{"margin-top":"30px"}},null,-1)),(0,a.Lk)("button",{class:"toggleButton",onClick:e[10]||(e[10]=t=>r.toggleView()),ref:"bottomTabAnchor"}," ↓   register   ↓ ",512)]))])])}var Wn={name:"LoginPrompt",props:["state"],data(){return{userNameAvailable:!0,showInvalid:!1}},computed:{passwordsMatch(){return this.state.regpassword===this.state.confirmpassword},validate(){return this.state.regusername&&this.state.regpassword&&this.passwordsMatch&&this.userNameAvailable}},methods:{submit(){if(this.validate){let t={userName:this.state.regusername,password:this.state.regpassword,avatar:this.state.defaultAvatar};fetch(`${this.state.URLbase}/submitReg.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((t=>t.json())).then((t=>{console.log(t),t[0]?(this.state.modalContent="",this.state.showModal=!1,this.state.username=this.state.regusername,console.log("login succeeded!"),this.state.loggedIn=!0,this.state.loggedinUserName=this.state.regusername,this.state.loggedinUserID=+t[2],this.state.fetchUserInfo(this.state.loggedinUserID),this.state.isAdmin=+t[4],this.state.loggedInUser.avatar=this.state.defaultAvatar,this.state.passhash=t[1],this.state.setCookie(),this.state.votePending?this.state.setVote():this.state.commentPending?this.state.submitComment():this.state.closePrompts(),this.state.invalidLoginAttemp=!1,this.state.checkLogin(),this.state.setLinksOwner(),this.state.fetchUserLinks(this.state.loggedinUserID)):this.showInvalid=!0}))}else console.log("failed validation. no reg submitted"),this.showInvalid=!0},toggleView(){this.state.showRegister=!this.state.showRegister,this.$nextTick((()=>{this.state.showRegister?this.$refs.regusername.focus():this.$refs.username.focus()}))},toggleLogin(){this.state.loggedIn||this.state.showLoginPrompt()},closePrompt(){this.state.closePrompts()},checkUserNameAvailability(){if(this.userNameAvailable=!0,this.state.regusername){let t={userName:this.state.regusername};fetch(`${this.state.URLbase}/checkUserNameAvailability.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((t=>t.json())).then((t=>{this.userNameAvailable=t}))}}},mounted(){this.state.confirmpassword="",this.state.showRegister?this.$refs.regusername.focus():this.$refs.username.focus()}};const Qn=(0,vt.A)(Wn,[["render",Fn],["__scopeId","data-v-fe53e2e8"]]);var Vn=Qn;const _n={class:"UserSettings"},Jn={class:"mainContainer"},Kn={style:{"font-size":"28px","line-height":"1em","font-weight":"900"}},Zn={class:"editAvatarImgContainer"},Gn=["src"],Yn={key:0,style:{color:"#4f8","font-size":"18px",background:"#055",padding:"4px","margin-top":"10px","padding-bottom":"8px"}},qn={key:1,style:{color:"#f44","font-size":"18px",background:"#500",padding:"4px","margin-top":"10px","padding-bottom":"8px"}},to={key:2,style:{color:"#4f8","font-size":"24px",background:"#055",padding:"4px","margin-top":"10px","padding-bottom":"8px"}},eo={key:3,style:{color:"#f44","font-size":"20px",background:"#400",padding:"4px","margin-top":"10px","padding-bottom":"8px"}},so={key:4,style:{color:"#f00","font-size":"20px"}},io={key:5,style:{color:"#0f4"}},ao=["disabled"];function no(t,e,s,n,l,r){return(0,a.uX)(),(0,a.CE)("div",_n,[(0,a.Lk)("div",Jn,[(0,a.Lk)("span",Kn,[(0,a.eW)((0,o.v_)(s.state.loggedinUserName)+" ",1),e[21]||(e[21]=(0,a.Lk)("br",null,null,-1)),e[22]||(e[22]=(0,a.Lk)("span",{style:{color:"#aff","font-size":"36px","font-weight":"400"}},"settings",-1))]),e[24]||(e[24]=(0,a.Lk)("div",{class:"spacerDiv"},null,-1)),e[25]||(e[25]=(0,a.eW)(" your avatar")),e[26]||(e[26]=(0,a.Lk)("br",null,null,-1)),(0,a.Lk)("div",Zn,[(0,a.Lk)("img",{src:s.state.getAvatar(),class:"editAvatarImg"},null,8,Gn)]),(0,a.Lk)("input",{style:{opacity:"0",position:"absolute","z-index":"-1"},ref:"tabAnchor",onKeydown:e[0]||(e[0]=(0,i.jR)((0,i.D$)((e=>t.$refs.cancelButton.focus()),["shift"]),["tab"]))},null,544),(0,a.bo)((0,a.Lk)("input",{type:"text",ref:"avatarURL","onUpdate:modelValue":e[1]||(e[1]=t=>s.state.loggedInUser.avatar=t),class:"input avatarInput",onInput:e[2]||(e[2]=t=>r.updateAvatar()),onClick:e[3]||(e[3]=t=>t.target.select()),placeholder:"URL to an online image..."},null,544),[[i.Jo,s.state.loggedInUser.avatar]]),e[27]||(e[27]=(0,a.Lk)("br",null,null,-1)),1==l.avatarUpdateSuccessful?((0,a.uX)(),(0,a.CE)("div",Yn,"     avatar update successful ")):(0,a.Q3)("",!0),-1==l.avatarUpdateSuccessful?((0,a.uX)(),(0,a.CE)("div",qn,"     avatar update NOT successful ")):(0,a.Q3)("",!0),e[28]||(e[28]=(0,a.Lk)("div",{class:"spacerDiv",style:{"margin-top":"20px"}},null,-1)),e[29]||(e[29]=(0,a.eW)(" change your password")),e[30]||(e[30]=(0,a.Lk)("br",null,null,-1)),(0,a.bo)((0,a.Lk)("input",{type:"password",ref:"currentpassword",class:"input passwordFields","onUpdate:modelValue":e[4]||(e[4]=t=>l.currentPassword=t),onKeydown:e[5]||(e[5]=(0,i.jR)((t=>r.savePassword()),["enter"])),onClick:e[6]||(e[6]=t=>t.target.select()),onInput:e[7]||(e[7]=t=>l.showInvalid=!1),placeholder:"current password"},null,544),[[i.Jo,l.currentPassword]]),e[31]||(e[31]=(0,a.Lk)("br",null,null,-1)),(0,a.bo)((0,a.Lk)("input",{type:"password",ref:"newpassword",class:(0,o.C4)(["input passwordFields",{passwordsDoNotMatch:!r.passwordsMatch&&l.newPassword&&l.confirmNewPassword,passwordsMatch:r.passwordsMatch&&l.newPassword&&l.confirmNewPassword}]),"onUpdate:modelValue":e[8]||(e[8]=t=>l.newPassword=t),onKeydown:e[9]||(e[9]=(0,i.jR)((t=>r.savePassword()),["enter"])),onInput:e[10]||(e[10]=t=>l.showInvalid=!1),onClick:e[11]||(e[11]=t=>t.target.select()),placeholder:"new password"},null,34),[[i.Jo,l.newPassword]]),e[32]||(e[32]=(0,a.Lk)("br",null,null,-1)),(0,a.bo)((0,a.Lk)("input",{type:"password",ref:"confirmnewpassword","onUpdate:modelValue":e[12]||(e[12]=t=>l.confirmNewPassword=t),onInput:e[13]||(e[13]=t=>l.showInvalid=!1),class:(0,o.C4)(["input passwordFields",{passwordsDoNotMatch:!r.passwordsMatch&&l.newPassword&&l.confirmNewPassword,passwordsMatch:r.passwordsMatch&&l.newPassword&&l.confirmNewPassword}]),onClick:e[14]||(e[14]=t=>t.target.select()),onKeydown:e[15]||(e[15]=(0,i.jR)((t=>r.savePassword()),["enter"])),placeholder:"confirm new password"},null,34),[[i.Jo,l.confirmNewPassword]]),e[33]||(e[33]=(0,a.Lk)("br",null,null,-1)),l.savedPassword?((0,a.uX)(),(0,a.CE)("div",to,"     password saved ")):(0,a.Q3)("",!0),l.showInvalid?((0,a.uX)(),(0,a.CE)("div",eo,"     ERROR SAVING PASSWORD! ")):(0,a.Q3)("",!0),l.savedPassword||l.showInvalid||r.passwordsMatch||!l.newPassword||!l.confirmNewPassword?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",so,"     passwords do not match ")),!l.savedPassword&&!l.showInvalid&&r.passwordsMatch&&l.newPassword&&l.confirmNewPassword?((0,a.uX)(),(0,a.CE)("div",io,e[23]||(e[23]=[(0,a.eW)("     "),(0,a.Lk)("i",null,"passwords match!",-1)]))):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:e[16]||(e[16]=t=>r.savePassword()),ref:"cancelButton",disabled:!r.validate,class:(0,o.C4)([{disabledButton:!r.validate},"userSettingsButton"])},"save",10,ao),e[34]||(e[34]=(0,a.Lk)("div",{class:"spacerDiv"},null,-1)),(0,a.Lk)("button",{onClick:e[17]||(e[17]=t=>r.closePrompt()),onKeydown:[e[18]||(e[18]=(0,i.jR)((e=>t.$refs.tabAnchor.focus()),["tab"])),e[19]||(e[19]=(0,i.jR)((0,i.D$)((e=>t.$refs.cancelButton.focus()),["shift"]),["tab"]))],ref:"cancelButton",style:{background:"#faa"},class:"userSettingsButton"},"close / cancel",544),(0,a.Lk)("input",{style:{opacity:"0",position:"absolute","z-index":"-1"},ref:"endTabAnchor",onKeydown:e[20]||(e[20]=(0,i.jR)((0,i.D$)((e=>t.$refs.confirmnewassword.focus()),["shift"]),["tab"]))},null,544)])])}var oo={name:"UserSettings",props:["state"],data(){return{newPassword:"",confirmNewPassword:"",currentPassword:"",savedPassword:!1,showInvalid:!1,avatarUpdateSuccessful:0}},computed:{passwordsMatch(){return this.newPassword===this.confirmNewPassword},validate(){return this.passwordsMatch&&this.newPassword&&this.confirmNewPassword&&this.currentPassword}},methods:{savePassword(){if(this.validate){let t={userName:this.state.loggedinUserName,currentPassword:this.currentPassword,newPassword:this.newPassword};fetch(`${this.state.URLbase}/changePassword.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((t=>t.json())).then((t=>{t[0]?(this.state.passhash=t[1],this.savedPassword=!0,this.currentPassword=this.newPassword=this.confirmNewPassword="",this.state.setCookie()):this.showInvalid=!0}))}else this.savedPassword=!1,this.showInvalid=!0},closePrompt(){this.state.closePrompts()},updateAvatar(){let t={userName:this.state.loggedinUserName,passhash:this.state.passhash,newAvatar:this.state.loggedInUser.avatar};fetch(`${this.state.URLbase}/updateAvatar.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((t=>t.json())).then((t=>{t[0]?(this.avatarUpdateSuccessful=1,this.state.userInfo[this.state.loggedinUserID].avatar=this.state.loggedInUser.avatar,setTimeout((()=>this.avatarUpdateSuccessful=0),2e3)):(this.avatarUpdateSuccssful=-1,setTimeout((()=>this.avatarUpdateSuccessful=0),2e3))}))}},mounted(){this.$refs.currentpassword.focus()}};const lo=(0,vt.A)(oo,[["render",no]]);var ro=lo;const ho={class:"editCollection",ref:"editCollection",tabindex:"2000"},co={class:"editCollectionInner"},uo={class:"editCollectionForm"},po=["title"],mo={key:0,style:{display:"flex",width:"100%","flex-wrap":"wrap","justify-content":"space-evenly"}},go={key:1};function ko(t,e,s,n,l,r){const h=(0,a.g2)("Link");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("button",{onClick:e[0]||(e[0]=t=>r.close()),class:"cancelButton",title:"close this view [ESC]"}," close/cancel "),(0,a.Lk)("div",ho,[(0,a.Lk)("div",co,[e[20]||(e[20]=(0,a.Lk)("br",null,null,-1)),e[21]||(e[21]=(0,a.eW)(" EDIT COLLECTION ")),e[22]||(e[22]=(0,a.Lk)("br",null,null,-1)),e[23]||(e[23]=(0,a.Lk)("br",null,null,-1)),e[24]||(e[24]=(0,a.eW)(" changes are effective instantly, universe-wide")),e[25]||(e[25]=(0,a.Lk)("br",null,null,-1)),(0,a.Lk)("div",uo,[e[9]||(e[9]=(0,a.eW)(" name")),e[10]||(e[10]=(0,a.Lk)("br",null,null,-1)),(0,a.bo)((0,a.Lk)("input",{class:"collectionFormInput",ref:"name","onUpdate:modelValue":e[1]||(e[1]=t=>s.collection.name=t),placeholder:"collection name",onInput:e[2]||(e[2]=(0,i.D$)((t=>r.save()),["stop","prevent"])),onKeyup:e[3]||(e[3]=(0,i.jR)((0,i.D$)((t=>r.close()),["prevent"]),["enter"]))},null,544),[[i.Jo,s.collection.name]]),e[11]||(e[11]=(0,a.Lk)("br",null,null,-1)),e[12]||(e[12]=(0,a.Lk)("br",null,null,-1)),e[13]||(e[13]=(0,a.eW)(" description")),e[14]||(e[14]=(0,a.Lk)("br",null,null,-1)),(0,a.bo)((0,a.Lk)("input",{class:"collectionFormInput","onUpdate:modelValue":e[4]||(e[4]=t=>s.collection.meta.description=t),placeholder:"description/hashtags",onInput:e[5]||(e[5]=(0,i.D$)((t=>r.save()),["stop","prevent"])),onKeyup:e[6]||(e[6]=(0,i.jR)((0,i.D$)((t=>r.close()),["prevent"]),["enter"]))},null,544),[[i.Jo,s.collection.meta.description]]),e[15]||(e[15]=(0,a.Lk)("br",null,null,-1)),e[16]||(e[16]=(0,a.Lk)("br",null,null,-1)),e[17]||(e[17]=(0,a.eW)(" set visibility")),e[18]||(e[18]=(0,a.Lk)("br",null,null,-1)),(0,a.Lk)("div",{class:(0,o.C4)(["specialToolButton",{private:s.collection.meta.private,notPrivate:!s.collection.meta.private}]),onClick:e[7]||(e[7]=(0,i.D$)((t=>r.setProperty("private",s.collection.meta.private?0:1)),["prevent","stop"])),title:`toggle visibility. (currently: ${s.collection.meta.private?"NOT":""} featured in public galleries)`},null,10,po),e[19]||(e[19]=(0,a.Lk)("br",null,null,-1)),s.collection.meta.slugs.length?((0,a.uX)(),(0,a.CE)("div",mo,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.state.miscLinks,(t=>((0,a.uX)(),(0,a.Wv)(h,{omitAssetData:!1,key:t.id,state:s.state,link:t},null,8,["state","link"])))),128))])):((0,a.uX)(),(0,a.CE)("div",go,e[8]||(e[8]=[(0,a.Lk)("br",null,null,-1),(0,a.Lk)("br",null,null,-1),(0,a.eW)(" [nothing added yet - go browse!] ")])))])])],512)],64)}var fo={name:"EditCollection",props:["state","collection"],components:{Link:le},data(){return{}},computed:{},methods:{setProperty(t,e){this.collection.meta[t]=e,this.save()},save(){let t={name:this.collection.name,id:this.collection.id,description:this.collection.meta.description,slugs:this.collection.meta.slugs,private:this.collection.meta.private};this.state.updateCollection(t)},close(){this.state.editCollection=[]}},mounted(){this.$nextTick((()=>{this.$refs.name.focus()})),this.collection.meta.slugs=this.collection.meta.slugs.filter((t=>t)),this.state.loadLinks(this.collection.meta.slugs,!1)}};const vo=(0,vt.A)(fo,[["render",ko],["__scopeId","data-v-646a0838"]]);var Lo=vo;const bo={class:"modalInner"},wo={class:"composeComment",ref:"composeComment",tabindex:"1000"},yo=["disabled"];function Co(t,e,s,n,l,r){const h=(0,a.g2)("Link");return(0,a.uX)(),(0,a.CE)("div",bo,[this.state.uploadInProgress?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:e[0]||(e[0]=t=>s.state.closePrompts()),class:"cancelButton",title:"close this view [ESC]"}," close/cancel ")),(0,a.Lk)("div",wo,[(0,a.bF)(h,{state:s.state,link:s.state.composeCommentLink,omitAssetData:!0},null,8,["state","link"]),e[4]||(e[4]=(0,a.Lk)("br",null,null,-1)),(0,a.bo)((0,a.Lk)("input",{onKeydown:e[1]||(e[1]=(0,i.jR)((t=>r.submit()),["enter"])),"onUpdate:modelValue":e[2]||(e[2]=t=>s.state.newComment=t),type:"text",ref:"commentInput",maxlength:"1024",class:"commentInput",placeholder:"enter your comment..."},null,544),[[i.Jo,s.state.newComment]]),e[5]||(e[5]=(0,a.Lk)("br",null,null,-1)),e[6]||(e[6]=(0,a.Lk)("br",null,null,-1)),(0,a.Lk)("button",{disabled:!s.state.newComment,class:(0,o.C4)([{disabled:!s.state.newComment},"submitCommentButton"]),onClick:e[3]||(e[3]=(0,i.D$)((t=>r.submit()),["stop","prevent"]))}," post comment ",10,yo)],512)])}var Do={name:"ComposeComment",props:["state"],components:{Link:le},methods:{submit(){this.state.submitComment()}},mounted(){this.$refs.commentInput.focus()}};const To=(0,vt.A)(Do,[["render",Co],["__scopeId","data-v-5f5b2223"]]);var xo=To,Po={name:"App",components:{Main:ge,Modal:we,Stats:cs,Admin:ci,Footer:zi,Header:Pi,Toolbar:Ra,Loading:Xa,Preview:ia,LoginPrompt:Vn,Collections:yn,UserSettings:ro,ComposeComment:xo,EditCollection:Lo,CollectionTemplate:Ln},data(){return{state:{footerMsg:'<b><span style="transform: scaleX(3.325);display: inline-block; margin-left: 86px; ">ASSETS</span></b><br>A FREE DIGITAL ASSET<br><span style="transform: scaleX(.87);display: inline-block; margin-left: -18px;">HOSTING SERVICE - ©'+(new Date).getFullYear()+'</span><br><a href="mailto:whitehotrobot@gmail.com"><span style="transform: scaleX(.87);display: inline-block; margin-left: -18px;">whitehotrobot@gmail.com</span></a>',links:[],userLinks:[],miscLinks:[],cacheLinks:[],uploadInProgress:!1,showModal:!1,fetchUserLinks:null,fetchUserInfo:null,setCookie:null,mode:null,age:null,views:null,size:null,deleteSelected:null,showEditCollection:null,editCollection:[],fetchUserInfoMemo:[],downloadZip:null,downloadFullZip:null,votePending:!1,pendingVoteSlug:null,pendingVoteValue:null,adminDeleteAsset:null,setVote:null,linkify:null,editingComment:!1,multipleLinks:null,featuredItems:[],deleteComment:null,pinned:!1,mx:0,my:0,updateComment:null,expandAll:null,unExpandAll:null,userStatsID:null,getAvatar:null,showLoading:!1,magLevel:0,maxMagLevel:10,showPreview:!1,openUserPage:null,bumpADOpacity:!1,rootDomain:location.hostname,modalContent:"",modalQueue:[],previewLink:null,passhash:"",loggedinUserID:null,loadCollection:null,userStats:[],preview:null,blockFade:!1,fetchCollections:null,click:!1,loadLinks:null,closeModal:null,closePreview:null,showAssetPreview:[],showAvatarPreview:[],closePrompts:null,setUserPref:null,starImgs:[],starsLoaded:!1,voteRating:null,voteRatingPerc:null,numv:10,submitComment:null,defaultAvatar:"avatarDefault.png",loggedInUser:{avatar:"avatarDefault.png"},loggedinUserName:"",copyLink:null,avatar:null,loadFeaturedItems:null,manageCollections:null,getUserStats:null,viewCollection:null,deleteSingle:null,toggleTrending:null,isTrending:null,syncCache:null,deleteCollection:null,createCollection:null,choice:null,downloadLink:null,next:null,prev:null,commentPending:!1,fileName:null,updateCollection:null,fullFileName:null,login:null,showCollectionTemplate:!1,register:null,isNumber:null,openCollection:null,setLinkProperty:null,setCollectionProperty:null,collections:[],setLinkPropertySelected:null,URLbase:null,linksSelectedTally:0,showCollection:!1,showCollections:!1,logout:null,showComposeComment:!1,onkeydown:null,showAdmin:!1,uploadEventTally:0,fetchEventTally:0,newComment:"",deleteEventTally:0,regusername:"",username:"",userView:!1,prettyDate:null,showStats:!1,firstSeen:null,password:"",showUserSettings:null,uploadFromURL:"",invalidLoginAttempt:!1,displayLoginRequired:!1,userSettingsVisible:!1,jumpToPage:null,regpassword:"",showUploadModal:!1,loadingAssets:!0,composeCommentLink:null,previewCollection:null,loadingCollections:!0,userInfo:[],checkLogin:null,adminData:null,search:{string:"",hits:0,inProgress:!1,timer:0,timerHandle:null,exact:!1,allWords:!0},confirmpassword:"",doMouseDown:null,totalPages:0,totalUserPages:0,numComments:2,userInteraction:!1,setLinksOwner:null,curPage:0,shortText:null,curUserPage:0,maxResultsPerPage:6,collectionsPage:0,maxCollectionResultsPerPage:6,regressPage:null,advancePage:null,lastPage:null,firstPage:null,selectAll:null,deSelectAll:null,showLoginPrompt:!1,loadFiles:null,showRegister:!1,loggedIn:!1,loginPromptVisible:!1,getAdminData:null,addLink:null,previewPosition:0,keys:Array(128).fill(!1)}}},methods:{alphaToDec(t){let e,s,i=0,a=0;while(""!=t)e=t[t.length-1],t=t.substring(0,t.length-1),s=e.charCodeAt(0)<58?e:e.charCodeAt(0)-(e.charCodeAt(0)>96?87:29),a+=s*62**i,i++;return a},prev(){if(this.state.showPreview){switch(this.state.showPreview=!1,this.state.previewPosition-=1,this.state.mode){case"trending":this.state.previewPosition<0&&(this.state.previewPosition=this.state.miscLinks.length+this.state.miscLinks.length-1),this.state.previewPosition>this.state.miscLinks.length-1?this.state.previewLink=this.state.miscLinks[this.state.previewPosition-this.state.miscLinks.length]:this.state.previewLink=this.state.miscLinks[this.state.previewPosition];break;case"user":case"default":this.state.loggedIn?(this.state.previewPosition<0&&(this.state.previewPosition=this.state.userLinks.length+this.state.links.length-1),this.state.previewPosition>this.state.links.length-1?this.state.previewLink=this.state.userLinks[this.state.previewPosition-this.state.links.length]:this.state.previewLink=this.state.links[this.state.previewPosition]):(this.state.previewPosition<0&&(this.state.previewPosition=this.state.miscLinks.length+this.state.miscLinks.length-1),this.state.previewPosition>this.state.miscLinks.length-1?this.state.previewLink=this.state.miscLinks[this.state.previewPosition-this.state.miscLinks.length]:this.state.previewLink=this.state.miscLinks[this.state.previewPosition]);break;case"col":this.state.miscLinks.map(((t,e)=>{this.state.previewLink.slug==t.slug&&(this.state.previewPosition=e)})),this.state.previewPosition--,this.state.previewPosition<0&&(this.state.previewPosition=this.state.miscLinks.length-1),this.state.previewPosition>this.state.miscLinks.length-1?this.state.previewLink=this.state.miscLinks[this.state.previewPosition-this.state.miscLinks.length]:this.state.previewLink=this.state.miscLinks[this.state.previewPosition],history.pushState(null,null,`${this.URLbase}/col/${this.state.previewCollection.slug}/view/${this.state.previewLink.slug}`);break}this.$nextTick((()=>{this.state.showPreview=!0}))}},next(){if(this.state.showPreview){switch(this.state.showPreview=!1,this.state.previewPosition++,this.state.mode){case"trending":this.state.previewPosition%=this.state.userLinks.length+this.state.miscLinks.length,this.state.previewPosition>this.state.miscLinks.length-1?this.state.previewLink=this.state.userLinks[this.state.previewPosition-this.state.miscLinks.length]:this.state.previewLink=this.state.miscLinks[this.state.previewPosition];break;case"user":case"default":this.state.loggedIn?(this.state.previewPosition%=this.state.userLinks.length+this.state.links.length,this.state.previewPosition>this.state.links.length-1?this.state.previewLink=this.state.userLinks[this.state.previewPosition-this.state.links.length]:this.state.previewLink=this.state.links[this.state.previewPosition]):(this.state.previewPosition%=this.state.userLinks.length+this.state.miscLinks.length,this.state.previewPosition>this.state.miscLinks.length-1?this.state.previewLink=this.state.userLinks[this.state.previewPosition-this.state.miscLinks.length]:this.state.previewLink=this.state.miscLinks[this.state.previewPosition]);break;case"col":this.state.miscLinks.map(((t,e)=>{this.state.previewLink.slug==t.slug&&(this.state.previewPosition=e)})),this.state.previewPosition++,this.state.previewPosition>this.state.miscLinks.length-1?this.state.previewLink=this.state.miscLinks[this.state.previewPosition-this.state.miscLinks.length]:this.state.previewLink=this.state.miscLinks[this.state.previewPosition],history.pushState(null,null,`${this.URLbase}/col/${this.state.previewCollection.slug}/view/${this.state.previewLink.slug}`);break}this.$nextTick((()=>{this.state.showPreview=!0}))}},register(){console.log("registering"),this.state.showLoginPrompt=!0,this.state.showRegister=!0},getUserStats(t){if(t){let e={userID:t,passhash:this.state.passhash};fetch(`${this.URLbase}/getStats.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((t=>t.json())).then((e=>{this.state.loadingAssets=!1,+e[0]&&(this.state.userStats[t]=e[1].map((t=>(t.showPreview=!1,t))),this.state.showStats=!0,history.pushState(null,null,this.URLbase+"/user/"+t+"/stats"),this.state.userStatsID=t)}))}},showUserSettings(){document.getElementsByTagName("HTML")[0].style.overflowY="hidden",this.state.userSettingsVisible=!0},viewCollection(t,e=""){this.state.mode="col",this.state.previewCollection=t,console.log("loading collection",t),!e&&t.meta.slugs.length&&(e=t.meta.slugs[0]),this.state.loadLinks(t.meta.slugs,!0,t.id,e),history.pushState(null,null,`${this.URLbase}/col/${this.state.previewCollection.slug}/view${"/"+e}`)},firstPage(){let t=this.state.search.string?"/1/"+this.state.search.string:"";switch(this.state.mode){case"user":this.state.curPage=0,this.state.fetchUserLinks(this.state.userID),history.pushState(null,null,this.URLbase+"/user/"+this.state.userID+"/"+(this.state.curPage+1));break;case"default":this.state.curPage=0,this.state.fetchUserLinks(this.state.loggedinUserID),history.pushState(null,null,this.URLbase+"/"+(this.state.curPage+1));break;case"track":window.location.href=this.URLbase+"/track/"+this.state.curTrack+t;break}},jumpToPage(t){let e=this.state.search.string?"/"+this.state.search.string:"";switch(this.state.mode){case"user":this.state.curPage=Math.max(0,Math.min(this.state.totalPages-1,t)),this.state.fetchUserLinks(this.state.userID),this.state.curPage?history.pushState(null,null,this.URLbase+"/user/"+this.state.userID+"/"+(this.state.curPage+1)):history.pushState(null,null,this.URLbase+"/user/"+this.state.userID+"/1");break;case"default":this.state.curPage=Math.max(0,Math.min(this.state.totalPages-1,t)),this.state.loggedIn&&this.state.fetchUserLinks(this.state.loggedinUserID),this.state.curPage?history.pushState(null,null,this.URLbase+"/"+(this.state.curPage+1)):history.pushState(null,null,this.URLbase);break;case"track":window.location.href=this.URLbase+"/track/"+this.decToAlpha(this.state.curTrack)+"/"+t+e;break}},lastPage(){let t=this.state.search.string?"/"+this.state.search.string:"";switch(this.state.mode){case"user":this.state.curPage=this.state.totalPages-1,this.state.fetchUserLinks(this.state.userID),console.log("curPage",this.state.curPage),history.pushState(null,null,this.URLbase+"/user/"+this.state.userID+"/"+(this.state.curPage+1));break;case"default":this.state.curPage=this.state.totalPages-1,this.state.loggedIn&&this.state.fetchUserLinks(this.state.loggedinUserID),console.log("curPage",this.state.curPage),history.pushState(null,null,this.URLbase+"/"+(this.state.curPage+1));break;case"track":window.location.href=this.URLbase+"/track/"+this.decToAlpha(this.state.curTrack)+"/"+this.state.totalPages+t;break}},advancePage(){let t=this.state.search.string?"/"+this.state.search.string:"";switch(this.state.mode){case"user":this.state.curPage<this.state.totalPages-1&&this.state.curPage++,this.state.fetchUserLinks(this.state.userID),history.pushState(null,null,this.URLbase+"/user/"+this.state.userID+"/"+(this.state.curPage+1));break;case"default":this.state.curPage<this.state.totalPages-1&&this.state.curPage++,this.state.loggedIn&&this.state.fetchUserLinks(this.state.loggedinUserID),history.pushState(null,null,this.URLbase+"/"+(this.state.curPage+1));break;case"track":window.location.href=this.URLbase+"/track/"+this.decToAlpha(this.state.curTrack)+"/"+(this.state.curPage+2)+t;break}},regressPage(){let t=this.state.search.string?"/"+this.state.search.string:"";switch(this.state.mode){case"user":this.state.curPage&&this.state.curPage--,this.state.fetchUserLinks(this.state.userID),this.state.curPage?history.pushState(null,null,this.URLbase+"/user/"+this.state.userID+"/"+(this.state.curPage+1)):history.pushState(null,null,this.URLbase+"/user/"+this.state.userID+"/1");break;case"default":this.state.curPage&&this.state.curPage--,this.state.loggedIn&&this.state.fetchUserLinks(this.state.loggedinUserID),this.state.curPage?history.pushState(null,null,this.URLbase+"/"+(this.state.curPage+1)):history.pushState(null,null,this.URLbase);break;case"track":window.location.href=this.URLbase+"/track/"+this.decToAlpha(this.state.curTrack)+"/"+(this.state.curPage+2)+t;break}},downloadLink(t,e){let s=document.createElement("a");s.download=e,s.href=`${this.URLbase}/${t.href}`,s.style.position="absolute",s.style.opacity=.01,document.body.appendChild(s),s.click(),s.remove()},openCollection(t){open(`${this.URLbase}/col/${t.slug}/view`,"_blank")},openLink(t){open(`${this.URLbase}/item/`+t.slug,"_blank")},copyLink(t){let e=document.createElement("div");e.innerHTML=this.URLbase+"/"+t,e.style.opacity=.01,e.style.position="absolute",document.body.appendChild(e);var s=document.createRange();s.selectNode(e),window.getSelection().removeAllRanges(),window.getSelection().addRange(s),document.execCommand("copy"),window.getSelection().removeAllRanges(),e.remove();let i=document.querySelector("#copyConfirmation");i.style.display="block",i.style.opacity=1;let a=()=>{+i.style.opacity>0&&(i.style.opacity-=.04,+i.style.opacity<.1?(i.style.opacity=1,i.style.display="none"):setTimeout((()=>{a()}),10))};setTimeout((()=>{a()}),250)},closePrompts(){switch(this.state.newComment?confirm("are you sure you want to leave?\n\nthis comment may be lost")&&(this.state.showComposeComment=!1,this.state.newComment="",this.state.composeCommentLink=null):this.state.showComposeComment=!1,this.state.showLoginPrompt=!1,this.state.userSettingsVisible=!1,this.state.showAdmin=!1,this.state.showModal=!1,this.state.showRegister=!1,this.state.showPreview=!1,this.state.showCollections=!1,this.state.showStats=!1,this.state.showCollectionTemplate=!1,this.state.editCollection=[],console.log("state.mode: ",this.state.mode),this.state.mode){case"user":history.pushState(null,null,this.URLbase+"/user/"+this.state.userID+`/${this.state.curPage+1}`);break;case"col":let t=this.state.previewCollection.slug;history.pushState(null,null,this.URLbase+"/col/"+t);break;case"default":history.pushState(null,null,this.URLbase+`/${this.state.curPage+1}`);break}},getAdminData(){this.state.showLoading=!0;let t={userName:this.state.loggedinUserName,passhash:this.state.passhash};fetch(`${this.URLbase}/getAdminData.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((t=>t.json())).then((t=>{this.state.showLoading=!1,console.log("getAdminData.php, data; ",t),t[0]&&(this.state.adminData=JSON.parse(t[1]),this.showLoading=!1,this.state.showAdmin=!0,this.state.showAssetPreview=Array(this.state.adminData.slugs.length).fill(!1),this.state.showAvatarPreview=Array(this.state.adminData.users.length).fill(!1))}))},closeModal(){this.state.modalQueue.length?this.state.modalContent=this.state.modalQueue.shift():(this.state.showModal=!1,this.state.modalContent=""),this.state.showLoading=!1},getAvatar(t){return this.state.loggedIn?this.state.loggedInUser.avatar==this.state.defaultAvatar?`${this.state.URLbase}/`+this.state.loggedInUser.avatar:this.state.loggedInUser.avatar:`${this.state.URLbase}/`+this.state.defaultAvatar},closePreview(){this.state.showPreview=!1,this.state.previewLink=null},checkEnabled(){if(this.state.loggedinUserName){let t={userName:this.state.loggedinUserName,passhash:this.state.passhash};fetch(`${this.URLbase}/checkEnabled.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((t=>t.json())).then((t=>{if(console.log("checkEnabled.php: ",t),+t[0])switch(console.log("logged in."),this.state.loggedIn=!0,this.state.maxResultsPerPage=+t[4],this.state.numComments=+t[5],this.state.loggedinUserID=+t[1],this.state.loggedInUser.avatar=t[2],this.state.username=this.state.regusername||this.state.loggedinUserName,this.setCookie(),this.state.loginPromptVisible=!1,this.state.invalidLoginAttemp=!1,+t[3]&&(this.state.isAdmin=!0),this.state.mode){case"trending":this.state.fetchUserInfo(this.state.loggedinUserID),this.state.loadingAssets=!1;break;case"user":this.state.fetchUserInfo(this.state.loggedinUserID),this.state.loadingAssets=!1;break;case"col":this.state.fetchUserInfo(this.state.loggedinUserID),this.state.loadingAssets=!1;break;case"item":this.state.fetchUserInfo(this.state.loggedinUserID),this.state.loadingAssets=!1;break;case"default":this.state.fetchUserInfo(this.state.loggedinUserID),this.state.loadingAssets=!1;break}else console.log("not logged in."),this.state.loggedIn=!1,this.state.loggedinUserName="",this.state.loggedinUserID="",this.state.passhash="",this.state.isAdmin=!1,this.state.invalidLoginAttempt=!0;this.state.mode||this.getMode()}))}},fetchUserInfo(t){if(t&&-1==this.state.fetchUserInfoMemo.indexOf(t)&&(this.state.fetchUserInfoMemo=[...this.state.fetchUserInfoMemo,t],"undefined"==typeof this.state.userInfo[t])){let e={userID:t};fetch(`${this.URLbase}/fetchUserInfo.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((t=>t.json())).then((e=>{+e[0]?(this.state.userInfo[t]=e[1],this.state.fetchUserInfoMemo=this.state.fetchUserInfoMemo.filter((e=>e!=t))):console.log(`there was a problem fetching user info for user: ${t}`)}))}},loadFeaturedItems(){this.state.mode="trending";let t={};fetch(`${this.URLbase}/loadFeaturedItems.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((t=>t.json())).then((t=>{t[0]?(console.log("loaded featured items: ",t[1]),this.state.miscLinks=[],this.state.featuredItems=t[1].map((t=>t.slug)),this.state.loadLinks(this.state.featuredItems)):alert("there was an error loading featured items")}))},updateComment(t){let e={userName:this.state.username,passhash:this.state.passhash,commentText:t.text,commentID:t.id};fetch(`${this.URLbase}/updateComment.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((t=>t.json())).then((e=>{e[0]?t.edited=!0:alert("there was an error updating the comment... :(")}))},toggleTrending(t){let e={userName:this.state.username,passhash:this.state.passhash,slug:t};fetch(`${this.URLbase}/toggleTrending.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((t=>t.json())).then((e=>{e[0]?(e[1]?console.log(`removed: ${t} from featured items`):console.log(`added: ${t} to featured items`),this.state.featuredItems.filter((e=>e==t)).length?this.state.featuredItems=this.state.featuredItems.filter((e=>e!=t)):this.state.featuredItems=[t,...this.state.featuredItems]):alert(`there was an error toggling trending for slug: ${t}... :(`)}))},deleteComment(t){if(confirm("are you sure you want to delete this comment?\n\nthis action is irreversible!!!")){let e={userName:this.state.username,passhash:this.state.passhash,commentID:t.id};fetch(`${this.URLbase}/deleteComment.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((t=>t.json())).then((e=>{e[0]?(this.state.links.map((e=>{e.comments=e.comments.filter((e=>+e.id!=+t.id))})),this.state.userLinks.map((e=>{e.comments=e.comments.filter((e=>+e.id!=+t.id))})),this.state.miscLinks.map((e=>{e.comments=e.comments.filter((e=>+e.id!=+t.id))})),this.state.cacheLinks.map((e=>{e.comments=e.comments.filter((e=>+e.id!=+t.id))}))):alert("there was an error deleting the comment... :(")}))}},setLinksOwner(){if(!this.state.links.length)return;let t={userName:this.state.username,passhash:this.state.passhash,ids:JSON.parse(JSON.stringify(this.state.links)).map((t=>t.id))};fetch(`${this.URLbase}/setOwner.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((t=>t.json())).then((t=>{console.log("res from setOwner.php: ",t),t[0]||alert("error setting link owner")}))},loadCollection(t,e=!1,s=""){this.state.loadingCollections=!0;let i={userID:this.state.loggedinUserID?this.state.loggedinUserID:-1,passhash:this.state.loggedinUserID?"":this.state.passhash,collectionID:+t};fetch(`${this.URLbase}/loadCollection.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then((t=>t.json())).then((i=>{this.state.loadingCollections=!1,console.log("data",i),!+i[0]||s&&!i[1].meta.slugs.filter((t=>t==s)).length?e&&(this.state.modalContent='<div style="width: 500px; padding: 50px; background: #400b; position:absolute; text-align: center;font-size: 24px; color: white; top: 50%; left: 50%; transform: translate(-50%, -50%);">oh snap.<br><br>this collection has no items, or this asset is private!</div>',this.state.showModal=!0):(this.state.collections.filter((e=>+e.id==+t)).length||(this.state.collections=[...this.state.collections,i[1]]),this.state.showCollectionTemplate=!1,this.state.viewCollection(i[1],s),e||this.$nextTick((()=>{this.state.showPreview=!1})))}))},fetchCollections(t,e=!1){if(!this.state.loggedIn)return;this.state.loadingCollections=!0;let s={userID:t,passhash:this.state.passhash,page:this.state.collectionsPage,maxResultsPerPage:this.state.maxCollectionResultsPerPage};fetch(`${this.URLbase}/fetchCollections.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then((t=>t.json())).then((t=>{this.state.loadingCollections=!1,+t[0]&&(this.state.collections=t[1],this.state.showCollectionTemplate=!1,this.showLoading=!1,e&&(this.state.showCollections=!0))}))},fetchUserLinks(t){let e={userID:t,passhash:this.state.passhash,page:this.state.curPage,loggedinUserID:this.state.loggedinUserID,maxResultsPerPage:this.state.maxResultsPerPage};console.log("fetchUserLinks.php sendData: ",e),fetch(`${this.URLbase}/fetchUserLinks.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((t=>t.json())).then((t=>{this.state.loadingAssets=!1,+t[0]&&(this.state.userLinks=[],this.state.links=[],t[1].map(((e,s)=>{let i={size:+t[2][s].size,filetype:t[2][s].filetype,selected:!1,ct:s,href:e,votes:+t[2][s].votes,upvotes:t[2][s].upvotes,votesCast:t[2][s].votesCast,userID:+t[2][s].userID,id:+t[2][s].id,slug:t[2][s].slug,name:decodeURIComponent(t[2][s].name),description:decodeURIComponent(t[2][s].description),originalSlug:t[2][s].originalSlug,originalDate:t[2][s].originalDate,origin:t[2][s].origin,comments:t[2][s].comments.map((t=>(t.editing=!1,t.edited=!!+t.edited,this.state.fetchUserInfo(t.userID),t))),hash:t[2][s].hash,date:t[2][s].date,private:!!+t[2][s].private,linkType:"userLink",serverTZO:t[2][s].serverTZO,views:t[2][s].views};this.state.fetchEventTally++,this.state.userLinks.push(i)})),this.state.userLinks.map((t=>{this.state.fetchUserInfo(t.userID)})),this.state.totalPages=+t[3],this.state.curPage+1>this.state.totalPages&&this.lastPage(),this.state.fetchCollections(this.state.loggedinUserID),this.state.showLoading=!1)}))},syncCache(){this.state.links.map((t=>{this.state.cacheLinks.filter((e=>e.id==t.id)).length||(this.state.cacheLinks=[...this.state.cacheLinks,t])})),this.state.userLinks.map((t=>{this.state.cacheLinks.filter((e=>e.id==t.id)).length||(this.state.cacheLinks=[...this.state.cacheLinks,t])})),this.state.miscLinks.map((t=>{this.state.cacheLinks.filter((e=>e.id==t.id)).length||(this.state.cacheLinks=[...this.state.cacheLinks,t])}))},updateCollection(t){let e={userID:this.state.loggedinUserID,passhash:this.state.passhash,colData:t};console.log(e),fetch(`${this.URLbase}/updateCollection.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((t=>t.json())).then((t=>{console.log(t),t[0]||console.log("there was an error updating the collection")}))},selectAll(){this.state.links.map((t=>{t.selected=!0})),this.state.userLinks.map((t=>{t.selected=!0})),this.state.miscLinks.map((t=>{t.selected=!0}))},deSelectAll(){this.state.links.map((t=>{t.selected=!1})),this.state.userLinks.map((t=>{t.selected=!1})),this.state.miscLinks.map((t=>{t.selected=!1}))},downloadFullZip(){if(!this.state.loggedIn)return;let t=document.createElement("iframe");t.addEventListener("load",(()=>{setTimeout((()=>{t.remove()}),1e4)})),t.style.opacity=.01,t.style.position="absolute",document.body.appendChild(t),t.src=`${this.state.URLbase}/getFullZip.php?userName=${this.state.loggedinUserName}&passhash=${this.state.passhash}`},downloadZip(){if(!this.state.loggedIn)return;let t=[],e=[],s=[],i=[];this.state.links.map(((e,s)=>{e.selected&&(t=[...t,e.id],i=[...i,e.slug])})),this.state.userLinks.map(((t,s)=>{t.selected&&(e=[...e,t.id],i=[...i,t.slug])})),this.state.miscLinks.map(((t,e)=>{t.selected&&(s=[...s,t.id],i=[...i,t.slug])}));let a=document.createElement("iframe");a.addEventListener("load",(()=>{setTimeout((()=>{a.remove()}),1e4)})),a.style.opacity=.01,a.style.position="absolute",document.body.appendChild(a);let n=i.map((t=>`"${t}"`)).join(",");a.src=`${this.state.URLbase}/getZip.php?userName=${this.state.loggedinUserName}&passhash=${this.state.passhash}&slugs=[${n}]`},deleteSelected(){let t=0,e=!1,s=[],i=[],a=[],n=[];if(this.state.links.map(((e,i)=>{e.selected&&(t++,s=[...s,e.id],n=[...n,e.slug])})),this.state.userLinks.map(((e,s)=>{e.selected&&(t++,i=[...i,e.id],n=[...n,e.slug])})),this.state.miscLinks.map(((e,s)=>{e.selected&&(t++,a=[...a,e.id],n=[...n,e.slug])})),!t)return e;let o=prompt(`\n\nARE YOU SURE YOU WANT TO DELETE ${t} ITEM${t>1?"S":""}?\n\n   >>> THIS ACTION CANNOT BE UNDONE! <<<\n\n  type 'yes' to continue"`);if(o&&-1!=o.toLowerCase().indexOf("yes")){e=!0,console.log("deleting selected...");let o={userName:this.state.username,passhash:this.state.passhash,slugs:n};console.log("sendData",o),fetch(`${this.URLbase}/delete.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then((t=>t.json())).then((e=>{console.log(e),e[0]?(this.state.links=this.state.links.filter(((t,e)=>!s.filter((e=>e==t.id)).length)),this.state.userLinks=this.state.userLinks.filter(((t,e)=>!i.filter((e=>e==t.id)).length)),this.state.miscLinks=this.state.miscLinks.filter(((t,e)=>!a.filter((e=>e==t.id)).length)),this.state.deleteEventTally++,this.state.jumpToPage(this.state.curPage-1),this.state.closePrompts(),console.log(`deleted ${t} items`)):alert(`there was a problem deleting ${n.length>1?"these":"this"} asset${n.length>1?"s":""}`)}))}return e},createCollection(t){let e={userID:this.state.loggedinUserID,passhash:this.state.passhash,colData:t};console.log(e),fetch(`${this.URLbase}/createCollection.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((t=>t.json())).then((t=>{console.log(t),t[0]?this.state.collections=[...this.state.collections,t[1]]:console.log("there was an error creating the collection")}))},preview(t){switch(this.state.mode){case"default":this.state.editCollection.length?(this.state.previewLink=t,history.pushState(null,null,`${this.URLbase}/col/${this.state.editCollection[0].slug}/view/${t.slug}`)):(this.state.previewPosition=t.ct,this.state.previewPosition+="userLink"==t.linkType?this.state.links.length:0,this.state.previewLink=t);break;case"col":this.state.previewLink=t,history.pushState(null,null,`${this.URLbase}/col/${this.state.previewCollection.slug}/view/${this.state.previewLink.slug}`);break;case"item":this.state.previewLink=t,history.pushState(null,null,`${this.URLbase}/item/${t.slug}`);break;case"user":this.state.previewLink=t;break;case"trending":this.state.previewPosition=t.ct,this.state.previewPosition+="userLink"==t.linkType?this.state.miscLinks.length:0,this.state.previewLink=t;break}this.state.showPreview=!0},voteRating(t){let e=t.upvotes,s=t.votesCast;return`${Math.round(e/s/this.state.numv*100)/1}% [${Math.round(e/this.state.numv*100)/100}/${s} votes]`},voteRatingPerc(t){let e=t.upvotes,s=t.votesCast;return e/s/this.state.numv},deleteCollection(t){console.log("deleteCollection: ",t);let e=prompt(`\n\nARE YOU SURE YOU WANT TO DELETE THIS COLLECTION?\n\n   it contains ${t.meta.slugs.length} items\n\nThe items if any, will not be deleted... only the collection\n\n>>> THIS ACTION CANNOT BE UNDONE! <<<\n\n  type 'yes' to continue"`);if(e&&-1!=e.toLowerCase().indexOf("yes")){let e={userName:this.state.username,passhash:this.state.passhash,collectionID:t.id};console.log("sendData",e),fetch(`${this.URLbase}/deleteCollection.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((t=>t.json())).then((e=>{console.log(e),e[0]?(console.log(`deleted collection id: ${t.id}`),this.state.collections=this.state.collections.filter((e=>+e.id!==+t.id))):alert("there was a problem!")}))}},deleteSingle(t,e=!0){if(e&&this.state.editCollection.length){let e=escape(JSON.stringify({function:"delete",name:"collection",link:t})),s=escape(JSON.stringify({function:"delete",name:"account",link:t}));this.state.modalContent=`<div style="width: 500px; padding: 50px; background: #400b; position:absolute; text-align: center;font-size: 24px; color: white; top: 50%; left: 50%; transform: translate(-50%, -50%);">delete how?<br><br><button style="width: 375px;" onclick="window.choose('${e}')">from this collection ONLY</button><br><br><button style="width: 375px; background: #f44;" onclick="window.choose('${s}')">from ACCOUNT AND ALL COLLECTIONS</button></div>`,this.state.showModal=!0}else{let e=[],s=[],i=[];this.state.links.map((t=>{e=[...e,t.selected]})),this.state.userLinks.map((t=>{s=[...s,t.selected]})),this.state.miscLinks.map((t=>{i=[...i,t.selected]})),this.deSelectAll(),this.state.links.map((e=>{e.id==t.id&&(e.selected=!0)})),this.state.userLinks.map((e=>{e.id==t.id&&(e.selected=!0)})),this.deleteSelected(),e.map(((t,e)=>{this.state.links[e].selected=t})),s.map(((t,e)=>{this.state.userLinks[e].selected=t})),i.map(((t,e)=>{this.state.miscLinks[e].selected=t})),this.state.showPreview=!1}},multipleLinks(){switch(this.state.mode){case"col":return this.state.miscLinks.length>1;case"trending":return this.state.miscLinks.length>1;case"default":return this.state.userLinks.length>1||this.state.miscLinks.length>1;case"user":return this.state.userID==this.state.loggedinUserID&&this.state.userLinks.length>1||this.state.miscLinks.length>1}},setCookie(){let t=document.cookie;t.split(";").map((t=>{-1==t.indexOf("autoplay")&&(document.cookie=t+"; expires="+new Date(0).toUTCString()+"; path=/; domain="+this.state.rootDomain)})),document.cookie="loggedinuser="+this.state.loggedinUserName+"; expires="+new Date(Date.now()+31536e8).toUTCString()+"; path=/; domain="+this.state.rootDomain,document.cookie="loggedinuserID="+this.state.loggedinUserID+"; expires="+new Date(Date.now()+31536e8).toUTCString()+"; path=/; domain="+this.state.rootDomain,document.cookie="token="+this.state.passhash+"; expires="+new Date(Date.now()+31536e8).toUTCString()+"; path=/; domain="+this.state.rootDomain,document.cookie="autoplay="+this.state.autoplay+"; expires="+new Date(Date.now()+31536e8).toUTCString()+"; path=/; domain="+this.state.rootDomain,document.cookie="showControls="+this.state.showControls+"; expires="+new Date(Date.now()+31536e8).toUTCString()+"; path=/; domain="+this.state.rootDomain},setVote(t,e){this.state.votePending&&(t=this.state.pendingVoteSlug,e=this.state.pendingVoteValue,this.state.votePending=!1);let s={userName:this.state.username,passhash:this.state.passhash,slug:t,val:e};fetch(`${this.URLbase}/setVote.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then((t=>t.json())).then((s=>{s[0]?(this.state.links.map((i=>{i.slug==t&&(i.votes=e,i.upvotes=+s[1],i.votesCast=+s[2])})),this.state.userLinks.map((i=>{i.slug==t&&(i.votes=e,i.upvotes=+s[1],i.votesCast=+s[2])})),this.state.miscLinks.map((i=>{i.slug==t&&(i.votes=e,i.upvotes=+s[1],i.votesCast=+s[2])})),this.state.cacheLinks.map((i=>{i.slug==t&&(i.votes=e,i.upvotes=+s[1],i.votesCast=+s[2])})),console.log(`successfully set vote for slug ${t} to ${e}`)):console.log(`there was a problem setting the vote for slug ${t} to ${e}`)}))},login(){let t={userName:this.state.username,password:this.state.password};fetch(`${this.URLbase}/login.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((t=>t.json())).then((t=>{if(console.log("login.php: ",t),t[0]){this.state.modalContent="",this.state.showModal=!1,console.log("login succeeded!"),this.state.loggedIn=!0,this.state.loggedinUserName=this.state.username,this.state.loggedinUserID=+t[2],this.state.maxResultsPerPage=+t[5],this.state.numComments=+t[6],this.state.isAdmin=+t[4],this.state.passhash=t[1],this.setCookie(),this.state.invalidLoginAttemp=!1,this.state.loggedInUser.avatar=t[3],this.setLinksOwner();let e=[];this.state.miscLinks.map((t=>{e=[...e,t.slug]})),this.state.loadLinks(e),this.fetchUserLinks(this.state.loggedinUserID),this.state.links=[],this.state.commentPending?this.state.submitComment():this.state.closePrompts()}else console.log("not logged in."),this.state.loggedIn=!1,this.state.invalidLoginAttempt=!0}))},isNumber(t){return t>-1e50&&+t<1e50},setUserPref(t,e){let s={userID:this.state.loggedinUserID,passhash:this.state.passhash,property:t,value:e};console.log(s),fetch(`${this.URLbase}/setUserPref.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then((t=>t.json())).then((s=>{if(console.log(s),s[0]){switch(t){case"pageSel":this.state.maxResultsPerPage=+e;break;case"commentSel":this.state.numComments=+e;break}console.log(`successfull set user pref: ${t} to ${e}`)}else console.log("there was an error setting the user preference")}))},expandAll(){this.state.links.map((t=>{t.selected&&(t.expandedInfo=!0)})),this.state.userLinks.map((t=>{t.selected&&(t.expandedInfo=!0)})),this.state.miscLinks.map((t=>{t.selected&&(t.expandedInfo=!0)})),this.state.cacheLinks.map((t=>{t.selected&&(t.expandedInfo=!0)}))},unExpandAll(){this.state.links.map((t=>{t.selected&&(t.expandedInfo=!1)})),this.state.userLinks.map((t=>{t.selected&&(t.expandedInfo=!1)})),this.state.miscLinks.map((t=>{t.selected&&(t.expandedInfo=!1)})),this.state.cacheLinks.map((t=>{t.selected&&(t.expandedInfo=!1)}))},openUserPage(t){this.state.userID=+t,this.state.closePrompts(),this.state.mode="user",this.state.curPage=0,this.state.fetchUserLinks(t),history.pushState(null,null,this.URLbase+`/user/${t}/${this.state.curPage+1}`)},adminDeleteAsset(t){if("yes"===prompt('>>> DANGER! <<<\n\nTHIS ADMIN ACTION WILL DESTROY THE ASSET,\n ALL DERIVATIVES, ASSOCIATED COMMENTS,\n VOTES, AND REMOVE IT FROM ALL COLLECTIONS.... FOREVER\n\ntype "yes" to continue').toLowerCase()){let e={userID:this.state.loggedinUserID,passhash:this.state.passhash,slug:t};console.log(e),fetch(`${this.URLbase}/adminDelete.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((t=>t.json())).then((e=>{if(console.log(e),e[0]){let e;this.state.adminData.slugs.map(((s,i)=>{this.state.adminData.slugs[i]==t&&(e=i)})),this.state.links=this.state.links.filter((e=>e.slug!==t)),this.state.userLinks=this.state.userLinks.filter((e=>e.slug!==t)),this.state.miscLinks=this.state.miscLinks.filter((e=>e.slug!==t)),this.state.cacheLinks=this.state.cacheLinks.filter((e=>e.slug!==t)),this.state.adminData.fileSizes=this.state.adminData.fileSizes.filter(((t,s)=>s!=e)),this.state.adminData.hrefs=this.state.adminData.hrefs.filter(((t,s)=>s!=e)),this.state.adminData.slugs=this.state.adminData.slugs.filter(((t,s)=>s!=e)),this.state.adminData.originalSlugs=this.state.adminData.originalSlugs.filter(((t,s)=>s!=e)),this.state.adminData.filetypes=this.state.adminData.filetypes.filter(((t,s)=>s!=e)),this.state.adminData.fileDates=this.state.adminData.fileDates.filter(((t,s)=>s!=e)),this.state.adminData.suffixes=this.state.adminData.suffixes.filter(((t,s)=>s!=e)),console.log("successfull deleted assset")}else console.log("there was an error deleting the asset")}))}},getMode(){let t=window.location.pathname.split("/").filter((t=>t&&""+t!="NaN"));if(t.length&&"assets"==t[0]&&t.shift(),t.length>0){console.log("vars",t);let e=(location.origin.toLowerCase().indexOf("000webhostapp.com"),0);if(this.state.isNumber(t[e])){this.state.mode="default";let s="";t[e]?(this.state.curPage=+t[e]-1,""+this.state.curPage=="NaN"&&(this.state.curPage=0),t[e+1]?(this.state.search.string=decodeURIComponent(t[e+1]),s="/"+t[e+1],this.state.curPage=0,this.state.jumpToPage(0),console.log("flow ",1)):(history.pushState(null,null,this.URLbase+"/"+this.state.curPage?this.state.curPage+1:""),(!this.state.curPage||this.state.curPage<0||this.state.curPage>1e6)&&(this.state.curPage=0),this.state.loggedIn&&this.fetchUserLinks(this.state.loggedinUserID),console.log("flow ",2))):(location.href!==this.URLbase+"/1"&&history.pushState(null,null,this.URLbase+"/1"),this.state.mode="default")}else switch(this.state.mode=t[e].trim(),console.log("non-default mode detected: ",this.state.mode),this.state.mode){case"col":if("undefined"!=typeof t[e+1]){let s=!1;if("undefined"!=typeof t[e+2])switch(t[e+2]){case"view":s=!0;break}let i="undefined"!=typeof t[e+3]?t[e+3]:"";console.log(`loading collection (in getMode()) -> ${this.alphaToDec(t[e+1])}`),this.loadCollection(this.alphaToDec(t[e+1]),s,i)}else location.href!==this.URLbase+"/1"&&history.pushState(null,null,this.URLbase+"/1"),this.state.mode="default",this.state.curPage=0,this.fetchUserLinks(this.state.loggedinUserID);break;case"item":"undefined"!=typeof t[e+1]?(this.state.fetchCollections(this.state.loggedinUserID),this.state.loadLinks([t[e+1]],!1,-1,t[e+1])):(location.href!==this.URLbase+"/1"&&history.pushState(null,null,this.URLbase+"/1"),this.state.mode="default",this.state.curPage=0,this.fetchUserLinks(this.state.loggedinUserID));break;case"user":if("undefined"!=typeof t[e+1]){let s=!1;if("undefined"!=typeof t[e+2])switch(t[e+2]){case"view":s=!0;break}if(this.state.userID=+t[e+1],"undefined"!=typeof t[e+2])if(this.state.isNumber(t[e+2]))this.state.curPage=+t[e+2]-1;else switch(t[e+2]){case"stats":this.$nextTick((()=>{this.state.getUserStats(+t[e+1])}));break;case"settings":this.$nextTick((()=>{this.state.showUserSettings()}));break;case"collections":this.$nextTick((()=>{this.state.showCollections=!0}));break}else this.state.curPage=0;this.state.fetchUserLinks(this.state.userID)}else location.href!==this.URLbase+"/1"&&history.pushState(null,null,this.URLbase+"/1"),this.state.mode="default",this.state.curPage=0,this.fetchUserLinks(this.state.loggedinUserID);break}}else location.href!==this.URLbase+"/1"&&history.pushState(null,null,this.URLbase+"/1"),console.log("flow ",3),this.state.curPage=0,this.state.loggedIn&&this.fetchUserLinks(this.state.loggedinUserID),this.state.loggedIn?this.state.mode="default":this.state.loadFeaturedItems();console.log("mode",this.state.mode)},submitComment(){if(!this.state.newComment||null==typeof this.state.composeCommentLink)return;if(!this.state.loggedIn)return this.state.showRegister=!1,this.state.showLoginPrompt=!0,void(this.state.commentPending=!0);let t=this.state.composeCommentLink.id,e=this.state.newComment,s={userName:this.state.loggedinUserName,passhash:this.state.passhash,linkID:t,comment:e};console.log(s),fetch(`${this.URLbase}/submitComment.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then((t=>t.json())).then((e=>{console.log(e),e[0]?(this.state.links.map((s=>{+s.id==+t&&(s.comments=e[1].map((t=>(t.editing=!1,t.edited=!!+t.edited,t))))})),this.state.userLinks.map((s=>{+s.id==+t&&(s.comments=e[1].map((t=>(t.editing=!1,t.edited=!!+t.edited,t))))})),this.state.miscLinks.map((s=>{+s.id==+t&&(s.comments=e[1].map((t=>(t.editing=!1,t.edited=!!+t.edited,t))))})),this.state.cacheLinks.map((s=>{+s.id==+t&&(s.comments=e[1].map((t=>(t.editing=!1,t.edited=!!+t.edited,t))))})),this.state.showComposeComment=!1,this.state.newComment="",this.state.composeCommentLink=null,this.state.closePrompts()):console.log("there was an error submitting the comment")}))},setLinkPropertySelected(t,e){this.state.links.map((s=>{s.selected&&this.setLinkProperty(s,t,e)})),this.state.userLinks.map((s=>{s.selected&&this.setLinkProperty(s,t,e)})),this.state.miscLinks.map((s=>{s.selected&&this.setLinkProperty(s,t,e)})),this.state.cacheLinks.map((s=>{s.selected&&this.setLinkProperty(s,t,e)}))},setLinkProperty(t,e,s,i=!0,a=!1){if(i&&this.state.editCollection.length){let i=escape(JSON.stringify({function:"visibility",link:t,property:e,value:s}));this.state.modalContent=`<div style="font-size: .85em; text-align: left; width: 500px; padding: 50px; background: #400b; position:absolute; color: white; top: 50%; left: 50%; transform: translate(-50%, -50%);">Changes to the visibility of single assets are system-wide, which may affect public viewability of this item in other collections.<br><br> You will still see all your own items if logged in, regardless.<br><br>To make an item private in one collection but not another, create a separate, private collection for such items.<br><br><button style="width: 375px;" onclick="window.choose('${i}')">OK, got it!</button></div>`,this.state.showModal=!0}else if(console.log("continuing with setLinkProperty",t,e,s),t[e]!=s||a){switch(e){case"name":break;case"description":break;default:s=+(""+s).trim();break}t[e]=s;let i={userName:this.state.loggedinUserName,passhash:this.state.passhash,linkID:t.id,property:e,value:s};fetch(`${this.URLbase}/setLinkProperty.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then((t=>t.json())).then((i=>{console.log("setLinkProperty data: ",i),i[0]?a||(this.state.links.map((i=>{i.slug===t.slug&&(i[e]=s)})),this.state.userLinks.map((i=>{i.slug===t.slug&&(i[e]=s)})),this.state.miscLinks.map((i=>{i.slug===t.slug&&(i[e]=s)})),this.state.cacheLinks.map((i=>{i.slug===t.slug&&(i[e]=s)}))):alert("there was a problem setting the property! d'oh!")}))}},isTrending(t){return-1!==this.state.featuredItems.indexOf(t)},loadLinks(t,e=!1,s=-1,i=""){t=t.filter((t=>t));let a=[],n=JSON.parse(JSON.stringify(t));if(this.state.miscLinks=this.state.miscLinks.filter((t=>{let e=!!n.filter((e=>e==t.slug)).length;return e&&(a=[...a,t.slug]),e})),n=n.filter((t=>!a.filter((e=>e==t)).length)),n.map((t=>{this.state.links.map((e=>{e.slug==t&&(a=[...a,t],this.state.miscLinks=[...this.state.miscLinks,e])}))})),n=n.filter((t=>!a.filter((e=>e==t)).length)),n.map((t=>{this.state.userLinks.map((e=>{e.slug==t&&(a=[...a,t],this.state.miscLinks=[...this.state.miscLinks,e])}))})),n=n.filter((t=>!a.filter((e=>e==t)).length)),n.length){let t={slugs:n,forCollection:e,collectionID:s,userName:this.state.loggedinUserName,passhash:this.state.passhash};fetch(`${this.URLbase}/loadLinks.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((t=>t.json())).then((t=>{console.log(t),t[0]?(t[1].map(((e,s)=>{let i={size:+t[2][s].size,filetype:t[2][s].filetype,selected:!1,ct:s,href:e,userID:+t[2][s].userID,id:+t[2][s].id,votes:+t[2][s].votes,upvotes:t[2][s].upvotes,votesCast:t[2][s].votesCast,name:decodeURIComponent(t[2][s].name),description:decodeURIComponent(t[2][s].description),slug:t[2][s].slug,hash:t[2][s].hash,comments:t[2][s].comments.map((t=>(t.editing=!1,t.edited=!!+t.edited,this.state.fetchUserInfo(t.userID),t))),originalSlug:t[2][s].originalSlug,originalDate:t[2][s].originalDate,origin:t[2][s].origin,date:t[2][s].date,private:!!+t[2][s].private,linkType:"userLink",serverTZO:t[2][s].serverTZO,views:t[2][s].views};this.state.fetchUserInfo(+t[2][s].userID),this.state.miscLinks=[...this.state.miscLinks,i]})),this.state.miscLinks.length||(location.href=location.origin),e?this.state.previewPosition<this.state.previewCollection.meta.slugs.length?(this.state.previewLink=i?this.state.miscLinks.filter((t=>t.slug==i))[0]:this.state.miscLinks[0],this.state.showPreview=!0):(this.state.modalContent='<div style="width: 500px; padding: 50px; background: #400b; position:absolute; text-align: center;font-size: 24px; color: white; top: 50%; left: 50%; transform: translate(-50%, -50%);">oh snap.<br><br>that\'s a 404 good buddy!</div>',this.state.showModal=!0):"item"==this.state.mode&&(this.state.previewLink=this.state.miscLinks.filter((t=>t.slug==i))[0],this.$nextTick((()=>{this.state.showPreview=!0})))):e?this.state.previewPosition<this.state.previewCollection.meta.slugs.length?(this.state.previewLink=this.state.miscLinks[0],this.state.showPreview=!0):(this.state.modalContent='<div style="width: 500px; padding: 50px; background: #400b; position:absolute; text-align: center;font-size: 24px; color: white; top: 50%; left: 50%; transform: translate(-50%, -50%);">oh snap.<br><br>that\'s a 404 good buddy!</div>',this.state.showModal=!0):console.log("there was a problem loading the link",t)}))}else e?(console.log("detected: for collection (is it? -loadLinks.php)"),this.state.previewPosition<this.state.previewCollection.meta.slugs.length?(this.state.previewLink=i?this.state.miscLinks.filter((t=>t.slug==i))[0]:this.state.miscLinks[0],this.state.showPreview=!0):(this.state.modalContent='<div style="width: 500px; padding: 50px; background: #400b; position:absolute; text-align: center;font-size: 24px; color: white; top: 50%; left: 50%; transform: translate(-50%, -50%);">oh snap.<br><br>that\'s a 404 good buddy!</div>',this.state.showModal=!0)):this.state.showPreview=!1},linkify(t){return t.split(" ").map((t=>(-1!=t.indexOf("://")&&(t=`<a href="${t}" target="_blank">${t}</a>`),t))).join(" ")},showEditCollection(t){console.log("collection",t),this.state.editCollection=[t]},setCollectionProperty(t,e,s){if(t.meta[e]!=s){t.meta[e]=s;let i={name:t.name,id:t.id,description:t.meta.description,slugs:t.meta.slugs,private:t.meta.private};this.updateCollection(i)}},manageCollections(){this.state.closePrompts(),this.showLoading=!0,this.state.fetchCollections(this.state.loggedinUserID,!0)},avatar(t){return-1!=this.state.userInfo[t.userID]?.avatar.indexOf("avatarDefault.png")?this.state.URLbase+"/avatarDefault.png":this.state.userInfo[t.userID]?.avatar},logout(){let t=document.cookie;switch(t.split(";").map((t=>{-1==t.indexOf("autoplay")&&(document.cookie=t+"; expires="+new Date(0).toUTCString()+"; path=/; domain="+this.state.rootDomain)})),this.state.mode){case"user":break;case"single":break;case"default":break}this.state.loggedIn=!1,this.state.isAdmin=!1,this.state.loggedinUserID=this.state.loggedinUserName="",window.location.reload()},views(t){return"views: "+t.views.toLocaleString()},size(t){let e,s=1048576,i=t,a=i/s|0,n=(i/s-a)*s/1024|0;return e=a?Math.round(i/s*100)/100+" MB":n?Math.round((i/s-a)*s/1024*100)/100+" KB":t.toLocaleString()+" B",e},addLink(t,e,s,i,a,n,o,l,r,h,d,c,u,p,m,g){let k={size:t,filetype:e,name:g,ct:s,href:i,slug:o,origin:r,votes:0,upvotes:0,votesCast:0,selected:a,userID:n,id:c,originalSlug:l,linkType:"link",serverTZO:h,views:d,date:u,originalDate:p,visibility:m};this.state.links.push(k)},age(t){let e=((new Date-new Date(t.date))/1e3|0)+3600*((new Date).getTimezoneOffset()/60-(-1===location.origin.toLowerCase().indexOf("mywebcommunity.org")&&-1===location.origin.toLowerCase().indexOf("mygameonline.org")&&-1===location.origin.toLowerCase().indexOf("000webhostapp")?4:0)),s=e/31536e3|0,i=31536e3*(e/31536e3-s)/86400|0,a=86400*(31536e3*(e/31536e3-s)/86400-i)/3600|0,n=3600*(86400*(31536e3*(e/31536e3-s)/86400-i)/3600-a)/60|0,o="";return o+=s?`${s} year${s>1?"s":""}, `:"",o+=i?`${i} day${i>1?"s":""}, `:"",o+=a?`${a} hour${a>1?"s":""}, `:"",o+=n?`${n} minute${n>1?"s":""}`:"",o||"added just now..."},prettyDate(t,e=!1){let s=new Date(t.date).toLocaleString();return e?s:s.split(",")[0]},firstSeen(t){let e=((new Date-new Date(t.originalDate))/1e3|0)+3600*((new Date).getTimezoneOffset()/60-4),s=e/31536e3|0,i=31536e3*(e/31536e3-s)/86400|0,a=86400*(31536e3*(e/31536e3-s)/86400-i)/3600|0,n=3600*(86400*(31536e3*(e/31536e3-s)/86400-i)/3600-a)/60|0,o="";return o+=s?`${s} year${s>1?"s":""}, `:"",o+=i?`${i} day${i>1?"s":""}, `:"",o+=a?`${a} hour${a>1?"s":""}, `:"",o+=n?`${n} minute${n>1?"s":""}`:"",o||"just now..."},fileName(t){let e=t.origin.split(": ")[1];return e.length>23&&(e=e.substring(0,10)+"..."+e.substring(e.length-10)),decodeURIComponent(e)},shortText(t,e){if(t)return t.length>e&&(t=t.substring(0,(e-3)/2|0)+"..."+t.substring(t.length-(e-3)/2|0)),t},fullFileName(t){let e,s=(e=t.origin.split(": ")[1].split("."))[e.length-1];return-1===t.name.indexOf(`.${s}`)?t.name+`.${s}`:t.name},checkLogin(){let t=document.cookie.split(";").filter((t=>"loggedinuser"===t.split("=")[0].trim()));if(t.length){this.state.loggedinUserName=t[0].split("=")[1],this.state.username=this.state.loggedinUserName;let e=document.cookie.split(";").filter((t=>"token"===t.split("=")[0].trim()));if(e.length){this.state.passhash=e[0].split("=")[1];let t=document.cookie.split(";").filter((t=>"loggedinuserID"===t.split("=")[0].trim()));t.length&&(this.state.loggedinUserID=+t[0].split("=")[1],this.checkEnabled())}}else this.state.loadingAssets=!1,this.getMode()}},watch:{"state.maxResultsPerPage"(t){console.log("watcher detected new maxResluts val: "+t),this.state.fetchUserLinks("user"==this.state.mode?this.state.userID:this.state.loggedinUserID)},"state.choice"(t){switch(t=JSON.parse(unescape(t)),t.function){case"delete":switch(t.name){case"collection":this.state.modalContent="",this.state.showModal=!1,this.state.collections=this.state.collections.map((e=>{e.meta.slugs=e.meta.slugs.filter((e=>e!==t.link.slug));let s={name:e.name,id:e.id,description:e.meta.description,slugs:e.meta.slugs,private:e.meta.private};return this.updateCollection(s),e})),this.state.deleteEventTally++,this.state.miscLinks=this.state.miscLinks.filter(((e,s)=>e.slug!=t.link.slug));break;case"account":this.state.modalContent="",this.state.showModal=!1,this.state.collections=this.state.collections.map((e=>{e.meta.slugs=e.meta.slugs.filter((e=>e!==t.link.slug));let s={name:e.name,id:e.id,description:e.meta.description,slugs:e.meta.slugs,private:e.meta.private};return this.updateCollection(s),e})),this.deleteSingle(t.link,!1);break}break;case"visibility":this.setLinkProperty(t.link,t.property,t.value,!1),this.state.modalContent="",this.state.showModal=!1;break}},linksChange(t){this.syncCache(),console.log(`cache synced, new cache size: ${this.state.cacheLinks.length} items`,this.state.cacheLinks)},"state.loadingAssets"(t){t?(this.state.modalContent='<div style="width: 500px; height: 100px; position:absolute; text-align: center;font-size: 24px; color: white; top: 50%; left: 50%; transform: translate(-50%, -50%);">... loading ...</div>',this.state.showModal=!0):(this.state.modalContent="",this.state.showModal=!1)},"state.uploadInProgress"(t){}},computed:{linksChange(){return 10*this.state.uploadEventTally+100*this.state.fetchEventTally+1e3*this.state.deleteEventTally+100*this.state.links.length*1e4+1e5*this.state.userLinks.length+1e6*this.state.miscLinks.length},showAdminButton(){return this.state.loggedIn&&!this.popupVisible},URLbase(){let t=window.location.origin;return-1===t.toLowerCase().split(".")[0].indexOf("imjur")&&-1===t.toLowerCase().split(".")[0].indexOf("assets")&&-1===t.toLowerCase().split(".")[0].indexOf("stuff")&&(t+="/assets"),t},popupVisible(){return this.state.userSettingsVisible||this.state.showComposeComment||this.state.showLoginPrompt||this.state.showCollections||this.state.editCollection.length||this.state.showCollectionTemplate||this.state.showPreview||this.state.showUploadModal||this.state.showRegister}},mounted(){this.state.starsLoaded=!1,this.state.starImgs=Array(9).fill().map(((t,e)=>{let s={img:new Image,loaded:!1};return s.img.onload=()=>{s.loaded=!0,this.$nextTick((()=>{9==this.state.starImgs.filter((t=>t.loaded)).length&&(console.log("stars loaded"),this.state.starsLoaded=!0)}))},s.img.src=`/star${e+1}.png`,s})),document.body.style.backgroundImage="url(./assets/new_bg.jpg)",window.choose=t=>{this.state.choice=t},this.state.doMouseDown=window.onmousedown=t=>{this.state.keys[18]=!1,this.state.click=!0,this.state.userInteraction=!0,this.$nextTick((()=>{this.state.click=!1}))},window.onkeyup=t=>{t.preventDefault(),t.stopPropagation(),this.state.keys[t.keyCode]=!1,this.state.keys[18]=!1,this.state.keys[17]=!1,this.state.click=!0,this.$nextTick((()=>{this.state.click=!1}))},window.onmousewheel=t=>{this.state.showPreview&&t.wheelDeltaY&&(this.state.magLevel+=t.wheelDelta>0?.25:-.25,this.state.magLevel=Math.max(0,Math.min(this.state.maxMagLevel,this.state.magLevel)))},this.state.onkeydown=window.onkeydown=t=>{if(!this.state.editingComment)switch(this.state.keys[t.keyCode]=!0,console.log(t.keyCode),this.state.keys[18]&&(t.preventDefault(),t.stopPropagation()),t.keyCode){case 48:this.state.magLevel=0;break;case 96:this.state.magLevel=0;break;case 109:this.state.showPreview&&(this.state.magLevel=Math.max(0,this.state.magLevel-1));break;case 107:this.state.showPreview&&(this.state.magLevel=Math.min(this.state.maxMagLevel,this.state.magLevel+1));break;case 189:this.state.showPreview&&(this.state.magLevel=Math.max(0,this.state.magLevel-1));break;case 187:this.state.showPreview&&(this.state.magLevel=Math.min(this.state.maxMagLevel,this.state.magLevel+1));break;case 116:window.location.reload();break;case 65:this.state.keys[17]&&(t.preventDefault(),t.stopPropagation(),this.state.keys[16]&&this.deSelectAll(),this.state.keys[16]||this.selectAll());break;case 46:this.deleteSelected();break;case 37:this.state.showPreview?this.prev():this.state.keys[18]&&this.state.curPage&&this.regressPage();break;case 39:this.state.showPreview?this.next():this.state.keys[18]&&this.state.curPage<this.state.totalPages&&this.advancePage();break;case 36:this.state.keys[18]&&this.firstPage();break;case 35:this.state.keys[18]&&this.lastPage();break;case 27:this.state.showPreview=!1,this.showLoading=!1,this.state.uploadInProgress||this.state.showLoginPrompt||(this.state.showModal=!1),this.closePrompts();break}},this.state.age=this.age,this.state.size=this.size,this.state.prev=this.prev,this.state.next=this.next,this.state.views=this.views,this.state.login=this.login,this.state.avatar=this.avatar,this.state.logout=this.logout,this.state.addLink=this.addLink,this.state.URLbase=this.URLbase,this.state.preview=this.preview,this.state.setVote=this.setVote,this.state.linkify=this.linkify,this.state.fileName=this.fileName,this.state.copyLink=this.copyLink,this.state.openLink=this.openLink,this.state.register=this.register,this.state.lastPage=this.lastPage,this.state.isNumber=this.isNumber,this.state.getPages=this.getPages,this.state.loadLinks=this.loadLinks,this.state.firstSeen=this.firstSeen,this.state.expandAll=this.expandAll,this.state.firstPage=this.firstPage,this.state.getAvatar=this.getAvatar,this.state.selectAll=this.selectAll,this.state.shortText=this.shortText,this.state.setCookie=this.setCookie,this.state.syncCache=this.syncCache,this.state.jumpToPage=this.jumpToPage,this.state.isTrending=this.isTrending,this.state.checkLogin=this.checkLogin,this.state.closeModal=this.closeModal,this.state.prettyDate=this.prettyDate,this.state.voteRating=this.voteRating,this.state.unExpandAll=this.unExpandAll,this.state.advancePage=this.advancePage,this.state.regressPage=this.regressPage,this.state.deSelectAll=this.deSelectAll,this.state.setUserPref=this.setUserPref,this.state.downloadZip=this.downloadZip,this.state.deleteSingle=this.deleteSingle,this.state.getAdminData=this.getAdminData,this.state.closePrompts=this.closePrompts,this.state.fullFileName=this.fullFileName,this.state.downloadLink=this.downloadLink,this.state.closePreview=this.closePreview,this.state.getUserStats=this.getUserStats,this.state.openUserPage=this.openUserPage,this.state.submitComment=this.submitComment,this.state.multipleLinks=this.multipleLinks,this.state.deleteComment=this.deleteComment,this.state.updateComment=this.updateComment,this.state.setLinksOwner=this.setLinksOwner,this.state.fetchUserInfo=this.fetchUserInfo,this.state.voteRatingPerc=this.voteRatingPerc,this.state.fetchUserLinks=this.fetchUserLinks,this.state.toggleTrending=this.toggleTrending,this.state.viewCollection=this.viewCollection,this.state.deleteSelected=this.deleteSelected,this.state.loadCollection=this.loadCollection,this.state.openCollection=this.openCollection,this.state.downloadFullZip=this.downloadFullZip,this.state.setLinkProperty=this.setLinkProperty,this.state.showUserSettings=this.showUserSettings,this.state.fetchCollections=this.fetchCollections,this.state.updateCollection=this.updateCollection,this.state.adminDeleteAsset=this.adminDeleteAsset,this.state.deleteCollection=this.deleteCollection,this.state.createCollection=this.createCollection,this.state.manageCollections=this.manageCollections,this.state.loadFeaturedItems=this.loadFeaturedItems,this.state.showEditCollection=this.showEditCollection,this.state.setCollectionProperty=this.setCollectionProperty,this.state.setLinkPropertySelected=this.setLinkPropertySelected,this.checkLogin()}};const Io=(0,vt.A)(Po,[["render",n]]);var Mo=Io;(0,i.Ef)(Mo).mount("#app")}},e={};function s(i){var a=e[i];if(void 0!==a)return a.exports;var n=e[i]={exports:{}};return t[i].call(n.exports,n,n.exports,s),n.exports}s.m=t,function(){var t=[];s.O=function(e,i,a,n){if(!i){var o=1/0;for(d=0;d<t.length;d++){i=t[d][0],a=t[d][1],n=t[d][2];for(var l=!0,r=0;r<i.length;r++)(!1&n||o>=n)&&Object.keys(s.O).every((function(t){return s.O[t](i[r])}))?i.splice(r--,1):(l=!1,n<o&&(o=n));if(l){t.splice(d--,1);var h=a();void 0!==h&&(e=h)}}return e}n=n||0;for(var d=t.length;d>0&&t[d-1][2]>n;d--)t[d]=t[d-1];t[d]=[i,a,n]}}(),function(){s.d=function(t,e){for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={524:0};s.O.j=function(e){return 0===t[e]};var e=function(e,i){var a,n,o=i[0],l=i[1],r=i[2],h=0;if(o.some((function(e){return 0!==t[e]}))){for(a in l)s.o(l,a)&&(s.m[a]=l[a]);if(r)var d=r(s)}for(e&&e(i);h<o.length;h++)n=o[h],s.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return s.O(d)},i=self["webpackChunkassets_free_nf"]=self["webpackChunkassets_free_nf"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=s.O(void 0,[504],(function(){return s(1101)}));i=s.O(i)})();
//# sourceMappingURL=app.f9089db7.js.map